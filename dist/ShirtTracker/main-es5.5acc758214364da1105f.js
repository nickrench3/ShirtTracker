!function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=n(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}}).apply(this,arguments)}function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function r(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||s(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e){if(Array.isArray(e))return e}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||c(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function v(e){var t=w();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){var t="function"==typeof Map?new Map:void 0;return(y=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return k(e,arguments,_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function k(e,t,n){return(k=w()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&b(i,n.prototype),i}).apply(null,arguments)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkshirt_tracker=self.webpackChunkshirt_tracker||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},7368:function(e,n,i){"use strict";i.d(n,{deG:function(){return Cn},tb:function(){return ed},AFp:function(){return Qh},ip1:function(){return Kh},CZH:function(){return Wh},hGG:function(){return Gd},z2F:function(){return Md},sBO:function(){return Tf},Sil:function(){return fd},_Vd:function(){return Wl},EJc:function(){return rd},SBq:function(){return $l},qLn:function(){return wi},vpe:function(){return _h},gxx:function(){return To},tBr:function(){return or},XFs:function(){return H},GSi:function(){return Ou},OlP:function(){return Rn},zs3:function(){return Vo},ZZ4:function(){return yf},aQg:function(){return wf},soG:function(){return nd},LVF:function(){return Hh},YKP:function(){return Pf},v3s:function(){return Ud},h0i:function(){return Df},PXZ:function(){return Nd},R0b:function(){return pd},FiY:function(){return ur},Lbi:function(){return Xh},g9A:function(){return $h},Qsj:function(){return tf},FYo:function(){return ef},JOm:function(){return Ci},Tiy:function(){return rf},q3G:function(){return ai},tp0:function(){return cr},EAV:function(){return qd},Rgc:function(){return Af},dDg:function(){return bd},DyG:function(){return Nn},q4F:function(){return of},GfV:function(){return af},s_b:function(){return Mf},ifc:function(){return Y},eFA:function(){return Od},G48:function(){return Cd},Gpc:function(){return S},X6Q:function(){return Rd},_c5:function(){return zd},VLi:function(){return xd},c2e:function(){return td},zSh:function(){return So},wAp:function(){return Dc},vHH:function(){return A},EiD:function(){return ri},mCW:function(){return Vr},qzn:function(){return Sr},JVY:function(){return Cr},pB0:function(){return Dr},eBb:function(){return Nr},L6k:function(){return Ar},LAX:function(){return Or},cg1:function(){return Ac},Tjo:function(){return Zd},kL8:function(){return Nc},yhl:function(){return Rr},dqk:function(){return te},sIi:function(){return Xo},CqO:function(){return Ku},QGY:function(){return Hu},F4k:function(){return Gu},zlt:function(){return Kf},RDi:function(){return Ue},AaK:function(){return I},z3N:function(){return Er},qOj:function(){return Bo},TTD:function(){return De},_Bn:function(){return Hl},xp6:function(){return xa},uIk:function(){return uu},ekj:function(){return Ts},Suo:function(){return Mh},Xpm:function(){return he},lG2:function(){return we},Yz7:function(){return L},cJS:function(){return M},oAB:function(){return me},Yjl:function(){return be},Y36:function(){return Pu},_UZ:function(){return ju},qZA:function(){return Vu},TgZ:function(){return Uu},n5z:function(){return kn},Ikx:function(){return Tc},LFG:function(){return er},$8M:function(){return bn},NdJ:function(){return Wu},CRH:function(){return Fh},Q6J:function(){return Mu},iGM:function(){return Ph},MAs:function(){return Su},LSH:function(){return si},kYT:function(){return ye},YNc:function(){return Eu},_uU:function(){return qs},Gf:function(){return Lh}});var a=i(5959),s=i(7570),c=i(8318),l=i(1906),f=i(2875),g=i(1564);function w(){return new a.xQ}function b(e){for(var t in e)if(e[t]===b)return t;throw Error("Could not find renamed property on target object.")}function x(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function I(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(I).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function T(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var E=b({__forward_ref__:b});function S(e){return e.__forward_ref__=S,e.toString=function(){return I(this())},e}function R(e){return C(e)?e():e}function C(e){return"function"==typeof e&&e.hasOwnProperty(E)&&e.__forward_ref__===S}var A=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,function(e,t){return"".concat(e?"NG0".concat(e,": "):"").concat(t)}(e,r))).code=e,i}return n}(y(Error));function N(e){return"string"==typeof e?e:null==e?"":String(e)}function O(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():N(e)}function D(e,t){var n=t?" in ".concat(t):"";throw new A("201","No provider for ".concat(O(e)," found").concat(n))}function P(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat(e)+(null==r?"":" [Expected=> ".concat(n," ").concat(r," ").concat(t," <=Actual]")))}function L(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function M(e){return{providers:e.providers||[],imports:e.imports||[]}}function F(e){return U(e,q)||U(e,Z)}function U(e,t){return e.hasOwnProperty(t)?e[t]:null}function V(e){return e&&(e.hasOwnProperty(B)||e.hasOwnProperty(z))?e[B]:null}var j,q=b({"\u0275prov":b}),B=b({"\u0275inj":b}),Z=b({ngInjectableDef:b}),z=b({ngInjectorDef:b}),H=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function G(e){var t=j;return j=e,t}function K(e,t,n){var r=F(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&H.Optional?null:void 0!==t?t:void D(I(e),"Injector")}function W(e){return{toString:e}.toString()}var Q=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),Y=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),J="undefined"!=typeof globalThis&&globalThis,$="undefined"!=typeof window&&window,X="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ee="undefined"!=typeof global&&global,te=J||ee||$||X,ne={},re=[],ie=b({"\u0275cmp":b}),ae=b({"\u0275dir":b}),oe=b({"\u0275pipe":b}),ue=b({"\u0275mod":b}),se=b({"\u0275loc":b}),ce=b({"\u0275fac":b}),le=b({__NG_ELEMENT_ID__:b}),fe=0;function he(e){return W(function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Q.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||re,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Y.Emulated,id:"c",styles:e.styles||re,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,a=e.pipes;return n.id+=fe++,n.inputs=ke(e.inputs,t),n.outputs=ke(e.outputs),i&&i.forEach(function(e){return e(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(pe)}:null,n.pipeDefs=a?function(){return("function"==typeof a?a():a).map(ve)}:null,n})}function de(e,t,n){var r=e.\u0275cmp;r.directiveDefs=function(){return t.map(pe)},r.pipeDefs=function(){return n.map(ve)}}function pe(e){return _e(e)||function(e){return e[ae]||null}(e)}function ve(e){return function(e){return e[oe]||null}(e)}var ge={};function me(e){return W(function(){var t={type:e.type,bootstrap:e.bootstrap||re,declarations:e.declarations||re,imports:e.imports||re,exports:e.exports||re,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ge[e.id]=e.type),t})}function ye(e,t){return W(function(){var n=xe(e,!0);n.declarations=t.declarations||re,n.imports=t.imports||re,n.exports=t.exports||re})}function ke(e,t){if(null==e)return ne;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}var we=he;function be(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function _e(e){return e[ie]||null}function xe(e,t){var n=e[ue]||null;if(!n&&!0===t)throw new Error("Type ".concat(I(e)," does not have '\u0275mod' property."));return n}function Ie(e){return Array.isArray(e)&&"object"==typeof e[1]}function Te(e){return Array.isArray(e)&&!0===e[1]}function Ee(e){return 0!=(8&e.flags)}function Se(e){return 2==(2&e.flags)}function Re(e){return 1==(1&e.flags)}function Ce(e){return null!==e.template}function Ae(e,t){return e.hasOwnProperty(ce)?e[ce]:null}var Ne,Oe=function(){function e(t,n,r){d(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return h(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function De(){return Pe}function Pe(e){return e.type.prototype.ngOnChanges&&(e.setInput=Me),Le}function Le(){var e=Fe(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===ne)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Me(e,t,n,r){var i=Fe(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ne,current:null}),a=i.current||(i.current={}),o=i.previous,u=this.declaredInputs[n],s=o[u];a[u]=new Oe(s&&s.currentValue,t,o===ne),e[r]=t}function Fe(e){return e.__ngSimpleChanges__||null}function Ue(e){Ne=e}function Ve(){return void 0!==Ne?Ne:"undefined"!=typeof document?document:void 0}function je(e){return!!e.listen}De.ngInherit=!0;var qe={createRenderer:function(e,t){return Ve()}};function Be(e){for(;Array.isArray(e);)e=e[0];return e}function Ze(e,t){return Be(t[e])}function ze(e,t){return Be(t[e.index])}function He(e,t){return e.data[t]}function Ge(e,t){return e[t]}function Ke(e,t){var n=t[e];return Ie(n)?n:n[0]}function We(e){return 4==(4&e[2])}function Qe(e){return 128==(128&e[2])}function Ye(e,t){return null==t?null:e[t]}function Je(e){e[18]=0}function $e(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var Xe={lFrame:Rt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function et(){return Xe.bindingsEnabled}function tt(){Xe.bindingsEnabled=!0}function nt(){Xe.bindingsEnabled=!1}function rt(){return Xe.lFrame.lView}function it(){return Xe.lFrame.tView}function at(e){return Xe.lFrame.contextLView=e,e[8]}function ot(){for(var e=ut();null!==e&&64===e.type;)e=e.parent;return e}function ut(){return Xe.lFrame.currentTNode}function st(){var e=Xe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ct(e,t){var n=Xe.lFrame;n.currentTNode=e,n.isParent=t}function lt(){return Xe.lFrame.isParent}function ft(){Xe.lFrame.isParent=!1}function ht(){return Xe.isInCheckNoChangesMode}function dt(e){Xe.isInCheckNoChangesMode=e}function pt(){var e=Xe.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function vt(){return Xe.lFrame.bindingIndex}function gt(e){return Xe.lFrame.bindingIndex=e}function mt(){return Xe.lFrame.bindingIndex++}function yt(e){var t=Xe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function kt(e){Xe.lFrame.inI18n=e}function wt(e){Xe.lFrame.currentDirectiveIndex=e}function bt(e){var t=Xe.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function _t(){return Xe.lFrame.currentQueryIndex}function xt(e){Xe.lFrame.currentQueryIndex=e}function It(e){var t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Tt(e,t,n){if(n&H.SkipSelf){for(var r=t,i=e;!(null!==(r=r.parent)||n&H.Host||(r=It(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}var a=Xe.lFrame=St();return a.currentTNode=t,a.lView=e,!0}function Et(e){var t=St(),n=e[1];Xe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function St(){var e=Xe.lFrame,t=null===e?null:e.child;return null===t?Rt(e):t}function Rt(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Ct(){var e=Xe.lFrame;return Xe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var At=Ct;function Nt(){var e=Ct();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ot(){return Xe.lFrame.selectedIndex}function Dt(e){Xe.lFrame.selectedIndex=e}function Pt(){var e=Xe.lFrame;return He(e.tView,e.selectedIndex)}function Lt(){Xe.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function Mt(){Xe.lFrame.currentNamespace="http://www.w3.org/1998/MathML/"}function Ft(){Xe.lFrame.currentNamespace=null}function Ut(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n].type.prototype,a=i.ngAfterContentInit,o=i.ngAfterContentChecked,u=i.ngAfterViewInit,s=i.ngAfterViewChecked,c=i.ngOnDestroy;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),o&&((e.contentHooks||(e.contentHooks=[])).push(n,o),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,o)),u&&(e.viewHooks||(e.viewHooks=[])).push(-n,u),s&&((e.viewHooks||(e.viewHooks=[])).push(n,s),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,s)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function Vt(e,t,n){Bt(e,t,3,n)}function jt(e,t,n,r){(3&e[2])===n&&Bt(e,t,n,r)}function qt(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Bt(e,t,n,r){for(var i=null!=r?r:-1,a=t.length-1,o=0,u=void 0!==r?65535&e[18]:0;u<a;u++)if("number"==typeof t[u+1]){if(o=t[u],null!=r&&o>=r)break}else t[u]<0&&(e[18]+=65536),(o<i||-1==i)&&(Zt(e,n,t,u),e[18]=(4294901760&e[18])+u+2),u++}function Zt(e,t,n,r){var i=n[r]<0,a=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}var zt=function e(t,n,r){d(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Ht(e,t,n){for(var r=je(e),i=0;i<n.length;){var a=n[i];if("number"==typeof a){if(0!==a)break;i++;var o=n[i++],u=n[i++],s=n[i++];r?e.setAttribute(t,u,s,o):t.setAttributeNS(o,u,s)}else{var c=a,l=n[++i];Kt(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function Gt(e){return 3===e||4===e||6===e}function Kt(e){return 64===e.charCodeAt(0)}function Wt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||Qt(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function Qt(e,t,n,r,i){var a=0,o=e.length;if(-1===t)o=-1;else for(;a<e.length;){var u=e[a++];if("number"==typeof u){if(u===t){o=-1;break}if(u>t){o=a-1;break}}}for(;a<e.length;){var s=e[a];if("number"==typeof s)break;if(s===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(e.splice(o,0,t),a=o+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function Yt(e){return-1!==e}function Jt(e){return 32767&e}function $t(e,t){for(var n=e>>16,r=t;n>0;)r=r[15],n--;return r}var Xt=!0;function en(e){var t=Xt;return Xt=e,t}var tn=0;function nn(e,t){var n=an(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,rn(r.data,e),rn(t,null),rn(r.blueprint,null));var i=on(e,t),a=e.injectorIndex;if(Yt(i))for(var o=Jt(i),u=$t(i,t),s=u[1].data,c=0;c<8;c++)t[a+c]=u[o+c]|s[o+c];return t[a+8]=i,a}function rn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function an(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function on(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,r=null,i=t;null!==i;){var a=i[1],o=a.type;if(null===(r=2===o?a.declTNode:1===o?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function un(e,t,n){!function(e,t,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(le)&&(r=n[le]),null==r&&(r=n[le]=tn++);var i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function sn(e,t,n){if(n&H.Optional)return e;D(t,"NodeInjector")}function cn(e,t,n,r){if(n&H.Optional&&void 0===r&&(r=null),0==(n&(H.Self|H.Host))){var i=e[9],a=G(void 0);try{return i?i.get(t,r,n&H.Optional):K(t,r,n&H.Optional)}finally{G(a)}}return sn(r,t,n)}function ln(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(le)?e[le]:void 0;return"number"==typeof t?t>=0?255&t:hn:t}(n);if("function"==typeof a){if(!Tt(t,e,r))return r&H.Host?sn(i,n,r):cn(t,n,r,i);try{var o=a(r);if(null!=o||r&H.Optional)return o;D(n)}finally{At()}}else if("number"==typeof a){var u=null,s=an(e,t),c=-1,l=r&H.Host?t[16][6]:null;for((-1===s||r&H.SkipSelf)&&(-1!==(c=-1===s?on(e,t):t[s+8])&&mn(r,!1)?(u=t[1],s=Jt(c),t=$t(c,t)):s=-1);-1!==s;){var f=t[1];if(gn(a,s,f.data)){var h=dn(s,t,n,u,r,l);if(h!==fn)return h}-1!==(c=t[s+8])&&mn(r,t[1].data[s+8]===l)&&gn(a,s,t)?(u=f,s=Jt(c),t=$t(c,t)):s=-1}}}return cn(t,n,r,i)}var fn={};function hn(){return new yn(ot(),rt())}function dn(e,t,n,r,i,a){var o=t[1],u=o.data[e+8],s=pn(u,o,n,null==r?Se(u)&&Xt:r!=o&&0!=(3&u.type),i&H.Host&&a===u);return null!==s?vn(t,o,s,u):fn}function pn(e,t,n,r,i){for(var a=e.providerIndexes,o=t.data,u=1048575&a,s=e.directiveStart,c=a>>20,l=i?u+c:e.directiveEnd,f=r?u:u+c;f<l;f++){var h=o[f];if(f<s&&n===h||f>=s&&h.type===n)return f}if(i){var d=o[s];if(d&&Ce(d)&&d.type===n)return s}return null}function vn(e,t,n,r){var i=e[n],a=t.data;if(i instanceof zt){var o=i;o.resolving&&function(e,t){throw new A("200","Circular dependency in DI detected for ".concat(e))}(O(a[n]));var u=en(o.canSeeViewProviders);o.resolving=!0;var s=o.injectImpl?G(o.injectImpl):null;Tt(e,r,H.Default);try{i=e[n]=o.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.type.prototype,i=r.ngOnChanges,a=r.ngOnInit,o=r.ngDoCheck;if(i){var u=Pe(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,u)}a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,a),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,a[n],t)}finally{null!==s&&G(s),en(u),o.resolving=!1,At()}}return i}function gn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function mn(e,t){return!(e&H.Self||e&H.Host&&t)}var yn=function(){function e(t,n){d(this,e),this._tNode=t,this._lView=n}return h(e,[{key:"get",value:function(e,t){return ln(this._tNode,this._lView,e,void 0,t)}}]),e}();function kn(e){return W(function(){for(var t=e.prototype.constructor,n=t[ce]||wn(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;i&&i!==r;){var a=i[ce]||wn(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return function(e){return new e}})}function wn(e){return C(e)?function(){var t=wn(R(e));return t&&t()}:Ae(e)}function bn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var a=n[i];if(Gt(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===t)return n[i+1];i+=2}}return null}(ot(),e)}var _n="__annotations__",xn="__parameters__";function In(e,t,n,r,i){return W(function(){var a=Tn(t);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof o)return a.call.apply(a,[this].concat(t)),this;var u=k(o,t);return function(e){return i&&i.apply(void 0,[e].concat(t)),(e.hasOwnProperty(_n)?e[_n]:Object.defineProperty(e,_n,{value:[]})[_n]).push(u),r&&r(e),e}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function Tn(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}function En(e,t,n){return W(function(){var r=Tn(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var a=k(i,t);return o.annotation=a,o;function o(e,t,n){for(var r=e.hasOwnProperty(xn)?e[xn]:Object.defineProperty(e,xn,{value:[]})[xn];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var Sn=En("Attribute",function(e){return{attributeName:e,__NG_ELEMENT_ID__:function(){return bn(e)}}}),Rn=function(){function e(t,n){d(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=L({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return h(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),Cn=new Rn("AnalyzeForEntryComponents");function An(){var e=te.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}var Nn=Function;function On(e){return"function"==typeof e}function Dn(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Dn(r,t)):t!==e&&t.push(r)}return t}function Pn(e,t){e.forEach(function(e){return Array.isArray(e)?Pn(e,t):t(e)})}function Ln(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Mn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Fn(e,t){for(var n=[],r=0;r<e;r++)n.push(t);return n}function Un(e,t,n){var r=jn(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function Vn(e,t){var n=jn(e,t);if(n>=0)return e[1|n]}function jn(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var a=r+(i-r>>1),o=e[a<<1];if(t===o)return a<<1;o>t?i=a:r=a+1}return~(i<<1)}(e,t)}var qn=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\))\)/,Bn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Zn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,zn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/,Hn=function(){function e(t){d(this,e),this._reflect=t||te.Reflect}return h(e,[{key:"isReflectionEnabled",value:function(){return!0}},{key:"factory",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(e,n)}}},{key:"_zipTypesAndAnnotations",value:function(e,t){var n;n=Fn(void 0===e?t.length:e.length);for(var r=0;r<n.length;r++)n[r]=void 0===e?[]:e[r]&&e[r]!=Object?[e[r]]:[],t&&null!=t[r]&&(n[r]=n[r].concat(t[r]));return n}},{key:"_ownParameters",value:function(e,t){if(n=e.toString(),qn.test(n)||zn.test(n)||Bn.test(n)&&!Zn.test(n))return null;var n;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;var r=e.ctorParameters;if(r&&r!==t.ctorParameters){var i="function"==typeof r?r():r,a=i.map(function(e){return e&&e.type}),o=i.map(function(e){return e&&Gn(e.decorators)});return this._zipTypesAndAnnotations(a,o)}var u=e.hasOwnProperty(xn)&&e[xn],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return s||u?this._zipTypesAndAnnotations(s,u):Fn(e.length)}},{key:"parameters",value:function(e){if(!On(e))return[];var t=Kn(e),n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]}},{key:"_ownAnnotations",value:function(e,t){if(e.annotations&&e.annotations!==t.annotations){var n=e.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return e.decorators&&e.decorators!==t.decorators?Gn(e.decorators):e.hasOwnProperty(_n)?e[_n]:null}},{key:"annotations",value:function(e){if(!On(e))return[];var t=Kn(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)}},{key:"_ownPropMetadata",value:function(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){var n=e.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(e.propDecorators&&e.propDecorators!==t.propDecorators){var r=e.propDecorators,i={};return Object.keys(r).forEach(function(e){i[e]=Gn(r[e])}),i}return e.hasOwnProperty("__prop__metadata__")?e.__prop__metadata__:null}},{key:"propMetadata",value:function(e){if(!On(e))return{};var t=Kn(e),n={};if(t!==Object){var r=this.propMetadata(t);Object.keys(r).forEach(function(e){n[e]=r[e]})}var i=this._ownPropMetadata(e,t);return i&&Object.keys(i).forEach(function(e){var t=[];n.hasOwnProperty(e)&&t.push.apply(t,u(n[e])),t.push.apply(t,u(i[e])),n[e]=t}),n}},{key:"ownPropMetadata",value:function(e){return On(e)&&this._ownPropMetadata(e,Kn(e))||{}}},{key:"hasLifecycleHook",value:function(e,t){return e instanceof Nn&&t in e.prototype}},{key:"guards",value:function(e){return{}}},{key:"getter",value:function(e){return new Function("o","return o."+e+";")}},{key:"setter",value:function(e){return new Function("o","v","return o."+e+" = v;")}},{key:"method",value:function(e){return new Function("o","args","if (!o.".concat(e,") throw new Error('\"").concat(e,"\" is undefined');\n        return o.").concat(e,".apply(o, args);"))}},{key:"importUri",value:function(e){return"object"==typeof e&&e.filePath?e.filePath:"./".concat(I(e))}},{key:"resourceUri",value:function(e){return"./".concat(I(e))}},{key:"resolveIdentifier",value:function(e,t,n,r){return r}},{key:"resolveEnum",value:function(e,t){return e[t]}}]),e}();function Gn(e){return e?e.map(function(e){return k(e.type.annotationCls,u(e.args?e.args:[]))}):[]}function Kn(e){var t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}var Wn,Qn={},Yn=/\n/gm,Jn=b({provide:String,useValue:b});function $n(e){var t=Wn;return Wn=e,t}function Xn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;if(void 0===Wn)throw new Error("inject() must be called from an injection context");return null===Wn?K(e,void 0,t):Wn.get(e,t&H.Optional?null:void 0,t)}function er(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;return(j||Xn)(R(e),t)}function tr(e){throw new Error("invalid")}function nr(e){for(var t=[],n=0;n<e.length;n++){var r=R(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,a=H.Default,o=0;o<r.length;o++){var u=r[o],s=u.__NG_DI_FLAG__;"number"==typeof s?-1===s?i=u.token:a|=s:i=u}t.push(er(i,a))}else t.push(er(r))}return t}function rr(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}var ir,ar,or=rr(En("Inject",function(e){return{token:e}}),-1),ur=rr(En("Optional"),8),sr=rr(En("Self"),2),cr=rr(En("SkipSelf"),4),lr=rr(En("Host"),1),fr=null;function hr(e){return dr((fr=fr||new Hn).parameters(e))}function dr(e){return e.map(function(e){return function(e){var t={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(e)&&e.length>0)for(var n=0;n<e.length;n++){var r=e[n];if(void 0!==r){var i=Object.getPrototypeOf(r);if(r instanceof ur||"Optional"===i.ngMetadataName)t.optional=!0;else if(r instanceof cr||"SkipSelf"===i.ngMetadataName)t.skipSelf=!0;else if(r instanceof sr||"Self"===i.ngMetadataName)t.self=!0;else if(r instanceof lr||"Host"===i.ngMetadataName)t.host=!0;else if(r instanceof or)t.token=r.token;else if(r instanceof Sn){if(void 0===r.attributeName)throw new Error("Attribute name must be defined.");t.attribute=r.attributeName}else t.token=r}}else t.token=void 0===e||Array.isArray(e)&&0===e.length?null:e;return t}(e)})}function pr(){if(void 0===ir&&(ir=null,te.trustedTypes))try{ir=te.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return ir}function vr(e){var t;return(null===(t=pr())||void 0===t?void 0:t.createHTML(e))||e}function gr(){if(void 0===ar&&(ar=null,te.trustedTypes))try{ar=te.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return ar}function mr(e){var t;return(null===(t=gr())||void 0===t?void 0:t.createHTML(e))||e}function yr(e){var t;return(null===(t=gr())||void 0===t?void 0:t.createScript(e))||e}function kr(e){var t;return(null===(t=gr())||void 0===t?void 0:t.createScriptURL(e))||e}var wr=function(){function e(t){d(this,e),this.changingThisBreaksApplicationSecurity=t}return h(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),e}(),br=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(wr),_r=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(wr),xr=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(wr),Ir=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(wr),Tr=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(wr);function Er(e){return e instanceof wr?e.changingThisBreaksApplicationSecurity:e}function Sr(e,t){var n=Rr(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===t}function Rr(e){return e instanceof wr&&e.getTypeName()||null}function Cr(e){return new br(e)}function Ar(e){return new _r(e)}function Nr(e){return new xr(e)}function Or(e){return new Ir(e)}function Dr(e){return new Tr(e)}function Pr(e){var t=new Mr(e);return function(){try{return!!(new window.DOMParser).parseFromString(vr(""),"text/html")}catch(e){return!1}}()?new Lr(t):t}var Lr=function(){function e(t){d(this,e),this.inertDocumentHelper=t}return h(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(vr(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(n){return null}}}]),e}(),Mr=function(){function e(t){if(d(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return h(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=vr(e),t;var n=this.inertDocument.createElement("body");return n.innerHTML=vr(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),Fr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ur=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vr(e){return(e=String(e)).match(Fr)||e.match(Ur)?e:"unsafe:"+e}function jr(e){return(e=String(e)).split(",").map(function(e){return Vr(e.trim())}).join(", ")}function qr(e){var t,n={},r=o(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Br(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var u in o)o.hasOwnProperty(u)&&(e[u]=!0)}return e}var Zr,zr=qr("area,br,col,hr,img,wbr"),Hr=qr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gr=qr("rp,rt"),Kr=Br(Gr,Hr),Wr=Br(zr,Br(Hr,qr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Br(Gr,qr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kr),Qr=qr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yr=qr("srcset"),Jr=Br(Qr,Yr,qr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$r=qr("script,style,template"),Xr=function(){function e(){d(this,e),this.sanitizedSomething=!1,this.buf=[]}return h(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!Wr.hasOwnProperty(t))return this.sanitizedSomething=!0,!$r.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n=e.attributes,r=0;r<n.length;r++){var i=n.item(r),a=i.name,o=a.toLowerCase();if(Jr.hasOwnProperty(o)){var u=i.value;Qr[o]&&(u=Vr(u)),Yr[o]&&(u=jr(u)),this.buf.push(" ",a,'="',ni(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();Wr.hasOwnProperty(t)&&!zr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(ni(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),ei=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ti=/([^\#-~ |!])/g;function ni(e){return e.replace(/&/g,"&amp;").replace(ei,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(ti,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ri(e,t){var n=null;try{Zr=Zr||Pr(e);var r=t?String(t):"";n=Zr.getInertBodyElement(r);var i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=Zr.getInertBodyElement(r)}while(r!==a);return vr((new Xr).sanitizeChildren(ii(n)||n))}finally{if(n)for(var o=ii(n)||n;o.firstChild;)o.removeChild(o.firstChild)}}function ii(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var ai=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function oi(e){var t=pi();return t?mr(t.sanitize(ai.HTML,e)||""):Sr(e,"HTML")?mr(Er(e)):ri(Ve(),N(e))}function ui(e){var t=pi();return t?t.sanitize(ai.STYLE,e)||"":Sr(e,"Style")?Er(e):N(e)}function si(e){var t=pi();return t?t.sanitize(ai.URL,e)||"":Sr(e,"URL")?Er(e):Vr(N(e))}function ci(e){var t=pi();if(t)return kr(t.sanitize(ai.RESOURCE_URL,e)||"");if(Sr(e,"ResourceURL"))return kr(Er(e));throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)")}function li(e){var t=pi();if(t)return yr(t.sanitize(ai.SCRIPT,e)||"");if(Sr(e,"Script"))return yr(Er(e));throw new Error("unsafe value used in a script context")}function fi(e){return vr(e[0])}function hi(e){return function(e){var t;return(null===(t=pr())||void 0===t?void 0:t.createScriptURL(e))||e}(e[0])}function di(e,t,n){return function(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?ci:si}(t,n)(e)}function pi(){var e=rt();return e&&e[12]}function vi(e,t){e.__ngContext__=t}function gi(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function mi(e){return e.ngDebugContext}function yi(e){return e.ngOriginalError}function ki(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var wi=function(){function e(){d(this,e),this._console=console}return h(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||ki}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?mi(e)?mi(e):this._findContext(yi(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=yi(e);t&&yi(t);)t=yi(t);return t}}]),e}(),bi=/^>|^->|<!--|-->|--!>|<!-$/g,_i=/(<|>)/,xi=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(te);function Ii(e){return e.ownerDocument.defaultView}function Ti(e){return e.ownerDocument}function Ei(e){return e.ownerDocument.body}function Si(e){return e instanceof Function?e():e}var Ri,Ci=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function Ai(e,t){return Ri(e,t)}function Ni(e){var t=e[3];return Te(t)?t[3]:t}function Oi(e){return Pi(e[13])}function Di(e){return Pi(e[4])}function Pi(e){for(;null!==e&&!Te(e);)e=e[4];return e}function Li(e,t,n,r,i){if(null!=r){var a,o=!1;Te(r)?a=r:Ie(r)&&(o=!0,r=r[0]);var u=Be(r);0===e&&null!==n?null==i?Ki(t,n,u):Gi(t,n,u,i||null,!0):1===e&&null!==n?Gi(t,n,u,i||null,!0):2===e?aa(t,u,o):3===e&&t.destroyNode(u),null!=a&&function(e,t,n,r,i){var a=n[7];a!==Be(n)&&Li(t,e,r,a,i);for(var o=10;o<n.length;o++){var u=n[o];ua(u[1],u,e,t,r,a)}}(t,e,a,n,i)}}function Mi(e,t){return je(e)?e.createText(t):e.createTextNode(t)}function Fi(e,t,n){je(e)?e.setValue(t,n):t.textContent=n}function Ui(e,t){return e.createComment(function(e){return e.replace(bi,function(e){return e.replace(_i,"\u200b$1\u200b")})}(t))}function Vi(e,t,n){return je(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function ji(e,t){var n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,$e(i,-1)),n.splice(r,1)}function qi(e,t){if(!(e.length<=10)){var n,r=10+t,i=e[r];if(i){var a=i[17];null!==a&&a!==e&&ji(a,i),t>0&&(e[r-1][4]=i[4]);var o=Mn(e,10+t);ua(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var u=o[19];null!==u&&u.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function Bi(e,t){if(!(256&t[2])){var n=t[11];je(n)&&n.destroyNode&&ua(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Zi(e[1],e);for(;t;){var n=null;if(Ie(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)Ie(t)&&Zi(t[1],t),t=t[3];null===t&&(t=e),Ie(t)&&Zi(t[1],t),n=t&&t[4]}t=n}}(t)}}function Zi(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof zt)){var a=n[r+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2){var u=i[a[o]],s=a[o+1];try{s.call(u)}finally{}}else try{a.call(i)}finally{}}}}(e,t),function(e,t){var n=e.cleanup,r=t[7],i=-1;if(null!==n)for(var a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){var o=n[a+1],u="function"==typeof o?o(t):Be(t[o]),s=r[i=n[a+2]],c=n[a+3];"boolean"==typeof c?u.removeEventListener(n[a],s,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),a+=2}else{var l=r[i=n[a+1]];n[a].call(l)}if(null!==r){for(var f=i+1;f<r.length;f++)(0,r[f])();t[7]=null}}(e,t),1===t[1].type&&je(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&Te(t[3])){n!==t[3]&&ji(n,t);var r=t[19];null!==r&&r.detachView(e)}}}function zi(e,t,n){return Hi(e,t.parent,n)}function Hi(e,t,n){for(var r=t;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){var i=e.data[r.directiveStart].encapsulation;if(i===Y.None||i===Y.Emulated)return null}return ze(r,n)}function Gi(e,t,n,r,i){je(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Ki(e,t,n){je(e)?e.appendChild(t,n):t.appendChild(n)}function Wi(e,t,n,r,i){null!==r?Gi(e,t,n,r,i):Ki(e,t,n)}function Qi(e,t){return je(e)?e.parentNode(t):t.parentNode}function Yi(e,t,n){return Xi(e,t,n)}function Ji(e,t,n){return 40&e.type?ze(e,n):null}var $i,Xi=Ji;function ea(e,t){Xi=e,$i=t}function ta(e,t,n,r){var i=zi(e,r,t),a=t[11],o=Yi(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(var u=0;u<n.length;u++)Wi(a,i,n[u],o,!1);else Wi(a,i,n,o,!1);void 0!==$i&&$i(a,r,t,n,i)}function na(e,t){if(null!==t){var n=t.type;if(3&n)return ze(t,e);if(4&n)return ia(-1,e[t.index]);if(8&n){var r=t.child;if(null!==r)return na(e,r);var i=e[t.index];return Te(i)?ia(-1,i):Be(i)}if(32&n)return Ai(t,e)()||Be(e[t.index]);var a=ra(e,t);return null!==a?Array.isArray(a)?a[0]:na(Ni(e[16]),a):na(e,t.next)}return null}function ra(e,t){return null!==t?e[16][6].projection[t.projection]:null}function ia(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return na(r,i)}return t[7]}function aa(e,t,n){var r=Qi(e,t);r&&function(e,t,n,r){je(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}function oa(e,t,n,r,i,a,o){for(;null!=n;){var u=r[n.index],s=n.type;if(o&&0===t&&(u&&vi(Be(u),r),n.flags|=4),64!=(64&n.flags))if(8&s)oa(e,t,n.child,r,i,a,!1),Li(t,e,i,u,a);else if(32&s){for(var c=Ai(n,r),l=void 0;l=c();)Li(t,e,i,l,a);Li(t,e,i,u,a)}else 16&s?sa(e,t,r,n,i,a):Li(t,e,i,u,a);n=o?n.projectionNext:n.next}}function ua(e,t,n,r,i,a){oa(n,r,e.firstChild,t,i,a,!1)}function sa(e,t,n,r,i,a){var o=n[16],u=o[6].projection[r.projection];if(Array.isArray(u))for(var s=0;s<u.length;s++)Li(t,e,i,u[s],a);else oa(e,t,u,o[3],i,a,!0)}function ca(e,t,n){je(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function la(e,t,n){je(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function fa(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}function ha(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==fa((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function da(e){return 4===e.type&&"ng-template"!==e.value}function pa(e,t,n){return t===(4!==e.type||n?e.value:"ng-template")}function va(e,t,n){for(var r=4,i=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(Gt(e[t]))return t;return e.length}(i),o=!1,u=0;u<t.length;u++){var s=t[u];if("number"!=typeof s){if(!o)if(4&r){if(r=2|1&r,""!==s&&!pa(e,s,n)||""===s&&1===t.length){if(ga(r))return!1;o=!0}}else{var c=8&r?s:t[++u];if(8&r&&null!==e.attrs){if(!ha(e.attrs,c,n)){if(ga(r))return!1;o=!0}continue}var l=ma(8&r?"class":s,i,da(e),n);if(-1===l){if(ga(r))return!1;o=!0;continue}if(""!==c){var f;f=l>a?"":i[l+1].toLowerCase();var h=8&r?f:null;if(h&&-1!==fa(h,c,0)||2&r&&c!==f){if(ga(r))return!1;o=!0}}}}else{if(!o&&!ga(r)&&!ga(s))return!1;if(o&&ga(s))continue;o=!1,r=s|1&r}}return ga(r)||o}function ga(e){return 0==(1&e)}function ma(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var a=!1;i<t.length;){var o=t[i];if(o===e)return i;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var u=t[++i];"string"==typeof u;)u=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=a?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ya(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(va(e,t[r],n))return!0;return!1}function ka(e,t){e:for(var n=0;n<t.length;n++){var r=t[n];if(e.length===r.length){for(var i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function wa(e,t){return e?":not("+t.trim()+")":t}function ba(e){for(var t=e[0],n=1,r=2,i="",a=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var u=e[++n];i+="["+o+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ga(o)||(t+=wa(a,i),i=""),r=o,a=a||!ga(r);n++}return""!==i&&(t+=wa(a,i)),t}var _a={};function xa(e){Ia(it(),rt(),Ot()+e,ht())}function Ia(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&Vt(t,i,n)}else{var a=e.preOrderHooks;null!==a&&jt(t,a,0,n)}Dt(n)}function Ta(e,t){return e<<17|t<<2}function Ea(e){return e>>17&32767}function Sa(e){return 2|e}function Ra(e){return(131068&e)>>2}function Ca(e,t){return-131069&e|t<<2}function Aa(e){return 1|e}function Na(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1];if(-1!==a){var o=e.data[a];xt(i),o.contentQueries(2,t[a],a)}}}function Oa(e,t,n,r,i,a,o,u,s,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Je(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=u||e&&e[11],l[12]=s||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=a,l[16]=2==t.type?e[16]:l,l}function Da(e,t,n,r,i){var a=e.data[t];if(null===a)a=Pa(e,t,n,r,i),Xe.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;var o=st();a.injectorIndex=null===o?-1:o.injectorIndex}return ct(a,!0),a}function Pa(e,t,n,r,i){var a=ut(),o=lt(),u=e.data[t]=function(e,t,n,r,i,a){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==a&&(o?null==a.child&&null!==u.parent&&(a.child=u):null===a.next&&(a.next=u)),u}function La(e,t,n,r){if(0===n)return-1;for(var i=t.length,a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Ma(e,t,n){Et(t);try{var r=e.viewQuery;null!==r&&vo(1,r,n);var i=e.template;null!==i&&Va(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Na(e,t),e.staticViewQueries&&vo(2,e.viewQuery,n);var a=e.components;null!==a&&function(e,t){for(var n=0;n<t.length;n++)co(e,t[n])}(t,a)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),o}finally{t[2]&=-5,Nt()}}function Fa(e,t,n,r){var i=t[2];if(256!=(256&i)){Et(t);var a=ht();try{Je(t),gt(e.bindingStartIndex),null!==n&&Va(e,t,n,2,r);var o=3==(3&i);if(!a)if(o){var u=e.preOrderCheckHooks;null!==u&&Vt(t,u,null)}else{var s=e.preOrderHooks;null!==s&&jt(t,s,0,null),qt(t,0)}if(function(e){for(var t=Oi(e);null!==t;t=Di(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r],a=i[3];0==(1024&i[2])&&$e(a,1),i[2]|=1024}}(t),function(e){for(var t=Oi(e);null!==t;t=Di(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];Qe(r)&&Fa(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&Na(e,t),!a)if(o){var c=e.contentCheckHooks;null!==c&&Vt(t,c)}else{var l=e.contentHooks;null!==l&&jt(t,l,1),qt(t,1)}!function(e,t){var n,r,i,a=e.hostBindingOpCodes;if(null!==a)try{for(var o=0;o<a.length;o++){var u=a[o];if(u<0)Dt(~u);else{var s=u,c=a[++o],l=a[++o];n=c,r=s,i=void 0,(i=Xe.lFrame).bindingIndex=i.bindingRootIndex=n,wt(r),l(2,t[s])}}}finally{Dt(-1)}}(e,t);var f=e.components;null!==f&&function(e,t){for(var n=0;n<t.length;n++)uo(e,t[n])}(t,f);var h=e.viewQuery;if(null!==h&&vo(2,h,r),!a)if(o){var d=e.viewCheckHooks;null!==d&&Vt(t,d)}else{var p=e.viewHooks;null!==p&&jt(t,p,2),qt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,$e(t[3],-1))}finally{Nt()}}}function Ua(e,t,n,r){var i=t[10],a=!ht(),o=We(t);try{a&&!o&&i.begin&&i.begin(),o&&Ma(e,t,r),Fa(e,t,n,r)}finally{a&&!o&&i.end&&i.end()}}function Va(e,t,n,r,i){var a=Ot(),o=2&r;try{Dt(-1),o&&t.length>20&&Ia(e,t,20,ht()),n(r,i)}finally{Dt(a)}}function ja(e,t,n){if(Ee(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var a=e.data[i];a.contentQueries&&a.contentQueries(1,n[i],i)}}function qa(e,t,n){et()&&(function(e,t,n,r){var i=n.directiveStart,a=n.directiveEnd;e.firstCreatePass||nn(n,t),vi(r,t);for(var o=n.initialInputs,u=i;u<a;u++){var s=e.data[u],c=Ce(s);c&&to(t,n,s);var l=vn(t,e,u,n);vi(l,t),null!==o&&io(0,u-i,l,s,0,o),c&&(Ke(n.index,t)[8]=l)}}(e,t,n,ze(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,a=n.index,o=Xe.lFrame.currentDirectiveIndex;try{Dt(a);for(var u=r;u<i;u++){var s=e.data[u],c=t[u];wt(u),null===s.hostBindings&&0===s.hostVars&&null===s.hostAttrs||Ya(s,c)}}finally{Dt(-1),wt(o)}}(e,t,n))}function Ba(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ze,r=t.localNames;if(null!==r)for(var i=t.index+1,a=0;a<r.length;a+=2){var o=r[a+1],u=-1===o?n(t,e):e[o];e[i++]=u}}function Za(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=za(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function za(e,t,n,r,i,a,o,u,s,c){var l=20+r,f=l+i,h=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:_a);return n}(l,f),d="function"==typeof c?c():c;return h[1]={type:e,blueprint:h,template:n,queries:null,viewQuery:u,declTNode:t,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:s,consts:d,incompleteFirstPass:!1}}function Ha(e,t,n,r){var i=mo(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&yo(e).push(r,i.length-1))}function Ga(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Ka(e,t,n,r,i,a,o,u){var s,c,l=ze(t,n),f=t.inputs;!u&&null!=f&&(s=f[r])?(bo(e,n,s,r,i),Se(t)&&function(e,t){var n=Ke(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=o?o(i,t.value||"",r):i,je(a)?a.setProperty(l,r,i):Kt(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Wa(e,t,n,r){var i=!1;if(et()){var a=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var a=0;a<r.length;a++){var o=r[a];ya(n,o.selectors,!1)&&(i||(i=[]),un(nn(n,t),e,o.type),Ce(o)?(Ja(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==a){i=!0,Xa(n,e.data.length,a.length);for(var u=0;u<a.length;u++){var s=a[u];s.providersResolver&&s.providersResolver(s)}for(var c=!1,l=!1,f=La(e,t,a.length,null),h=0;h<a.length;h++){var d=a[h];n.mergedAttrs=Wt(n.mergedAttrs,d.hostAttrs),eo(e,n,t,f,d),$a(f,d,o),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),c=!0),l||!p.ngOnChanges&&!p.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),f++}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,a=[],o=null,u=null,s=t.directiveStart;s<n;s++){var c=r[s],l=c.inputs,f=null===i||da(t)?null:ao(l,i);a.push(f),o=Ga(l,s,o),u=Ga(c.outputs,s,u)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=o,t.outputs=u}(e,n)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var a=n[t[i+1]];if(null==a)throw new A("301","Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],a)}}(n,r,o)}return n.mergedAttrs=Wt(n.mergedAttrs,n.attrs),i}function Qa(e,t,n,r,i,a){var o=a.hostBindings;if(o){var u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);var s=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(u)!=s&&u.push(s),u.push(r,i,o)}}function Ya(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Ja(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function $a(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ce(t)&&(n[""]=e)}}function Xa(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function eo(e,t,n,r,i){e.data[r]=i;var a=i.factory||(i.factory=Ae(i.type)),o=new zt(a,Ce(i),null);e.blueprint[r]=o,n[r]=o,Qa(e,t,0,r,La(e,n,i.hostVars,_a),i)}function to(e,t,n){var r=ze(t,e),i=Za(n),a=e[10],o=lo(e,Oa(e,i,null,n.onPush?64:16,r,t,a,a.createRenderer(r,n),null,null));e[t.index]=o}function no(e,t,n,r,i,a){var o=ze(e,t);ro(t[11],o,a,e.value,n,r,i)}function ro(e,t,n,r,i,a,o){if(null==a)je(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{var u=null==o?N(a):o(a,r||"",i);je(e)?e.setAttribute(t,i,u,n):n?t.setAttributeNS(n,i,u):t.setAttribute(i,u)}}function io(e,t,n,r,i,a){var o=a[t];if(null!==o)for(var u=r.setInput,s=0;s<o.length;){var c=o[s++],l=o[s++],f=o[s++];null!==u?r.setInput(n,f,c,l):n[l]=f}}function ao(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function oo(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function uo(e,t){var n=Ke(t,e);if(Qe(n)){var r=n[1];80&n[2]?Fa(r,n,r.template,n[8]):n[5]>0&&so(n)}}function so(e){for(var t=Oi(e);null!==t;t=Di(t))for(var n=10;n<t.length;n++){var r=t[n];if(1024&r[2]){var i=r[1];Fa(i,r,i.template,r[8])}else r[5]>0&&so(r)}var a=e[1].components;if(null!==a)for(var o=0;o<a.length;o++){var u=Ke(a[o],e);Qe(u)&&u[5]>0&&so(u)}}function co(e,t){var n=Ke(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Ma(r,n,n[8])}function lo(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function fo(e){for(;e;){e[2]|=64;var t=Ni(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function ho(e,t,n){var r=t[10];r.begin&&r.begin();try{Fa(e,t,e.template,n)}catch(i){throw wo(t,i),i}finally{r.end&&r.end()}}function po(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=gi(n),i=r[1];Ua(i,r,i.template,n)}}(e[8])}function vo(e,t,n){xt(0),t(e,n)}var go=Promise.resolve(null);function mo(e){return e[7]||(e[7]=[])}function yo(e){return e.cleanup||(e.cleanup=[])}function ko(e,t,n){return(null===e||Ce(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}function wo(e,t){var n=e[9],r=n?n.get(wi,null):null;r&&r.handleError(t)}function bo(e,t,n,r,i){for(var a=0;a<n.length;){var o=n[a++],u=n[a++],s=t[o],c=e.data[o];null!==c.setInput?c.setInput(s,i,r,u):s[u]=i}}function _o(e,t,n){var r=Ze(t,e);Fi(e[11],r,n)}function xo(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(var o=0;o<t.length;o++){var u=t[o];"number"==typeof u?a=u:1==a?i=T(i,u):2==a&&(r=T(r,u+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Io,To=new Rn("INJECTOR",-1),Eo=function(){function e(){d(this,e)}return h(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qn;if(t===Qn){var n=new Error("NullInjectorError: No provider for ".concat(I(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),So=new Rn("Set Injector scope."),Ro={},Co={};function Ao(){return void 0===Io&&(Io=new Eo),Io}function No(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Oo(e,n,t||Ao(),r)}var Oo=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&Pn(n,function(e){return i.processProvider(e,t,n)}),Pn([t],function(e){return i.processInjectorType(e,[],o)}),this.records.set(To,Lo(void 0,this));var u=this.records.get(So);this.scope=null!=u?u.value:null,this.source=a||("object"==typeof t?null:I(t))}return h(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;this.assertNotDestroyed();var r,i=$n(this);try{if(!(n&H.SkipSelf)){var a=this.records.get(e);if(void 0===a){var o=("function"==typeof(r=e)||"object"==typeof r&&r instanceof Rn)&&F(e);a=o&&this.injectableDefInScope(o)?Lo(Do(e),Ro):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&H.Self?Ao():this.parent).get(e,t=n&H.Optional&&t===Qn?null:t)}catch(u){if("NullInjectorError"===u.name){if((u.ngTempTokenPath=u.ngTempTokenPath||[]).unshift(I(e)),i)throw u;return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=I(t);if(Array.isArray(t))i=t.map(I).join(" -> ");else if("object"==typeof t){var a=[];for(var o in t)if(t.hasOwnProperty(o)){var u=t[o];a.push(o+":"+("string"==typeof u?JSON.stringify(u):I(u)))}i="{".concat(a.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(Yn,"\n  "))}("\n"+e.message,i,"R3InjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(u,e,0,this.source)}throw u}finally{$n(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(t){return e.get(t)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(t,n){return e.push(I(n))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=R(e)))return!1;var i=V(e),a=null==i&&e.ngModule||void 0,o=void 0===a?e:a,u=-1!==n.indexOf(o);if(void 0!==a&&(i=V(a)),null==i)return!1;if(null!=i.imports&&!u){var s;n.push(o);try{Pn(i.imports,function(e){r.processInjectorType(e,t,n)&&(void 0===s&&(s=[]),s.push(e))})}finally{}if(void 0!==s)for(var c=function(e){var t=s[e],n=t.ngModule,i=t.providers;Pn(i,function(e){return r.processProvider(e,n,i||re)})},l=0;l<s.length;l++)c(l)}this.injectorDefTypes.add(o);var f=Ae(o)||function(){return new o};this.records.set(o,Lo(f,Ro));var h=i.providers;if(null!=h&&!u){var d=e;Pn(h,function(e){return r.processProvider(e,d,h)})}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=Fo(e=R(e))?e:R(e&&e.provide),i=function(e,t,n){return Mo(e)?Lo(void 0,e.useValue):Lo(Po(e),Ro)}(e);if(Fo(e)||!0!==e.multi)this.records.get(r);else{var a=this.records.get(r);a||((a=Lo(void 0,Ro,!0)).factory=function(){return nr(a.multi)},this.records.set(r,a)),r=e,a.multi.push(e)}this.records.set(r,i)}},{key:"hydrate",value:function(e,t){var n;return t.value===Ro&&(t.value=Co,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var t=R(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}]),e}();function Do(e){var t=F(e),n=null!==t?t.factory:Ae(e);if(null!==n)return n;if(e instanceof Rn)throw new Error("Token ".concat(I(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=Fn(t,"?");throw new Error("Can't resolve all parameters for ".concat(I(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[q]||e[Z]);if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function Po(e,t,n){var r,i;if(Fo(e)){var a=R(e);return Ae(a)||Do(a)}if(Mo(e))r=function(){return R(e.useValue)};else if((i=e)&&i.useFactory)r=function(){return e.useFactory.apply(e,u(nr(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))r=function(){return er(R(e.useExisting))};else{var o=R(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ae(o)||Do(o);r=function(){return k(o,u(nr(e.deps)))}}return r}function Lo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Mo(e){return null!==e&&"object"==typeof e&&Jn in e}function Fo(e){return"function"==typeof e}var Uo=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=No(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},Vo=function(){var e=function(){function e(){d(this,e)}return h(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Uo(e,t,""):Uo(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=Qn,e.NULL=new Eo,e.\u0275prov=L({token:e,providedIn:"any",factory:function(){return er(To)}}),e.__NG_ELEMENT_ID__=-1,e}();function jo(e,t){Ut(gi(e)[1],ot())}function qo(e){return Object.getPrototypeOf(e.prototype).constructor}function Bo(e){for(var t=qo(e.type),n=!0,r=[e];t;){var i=void 0;if(Ce(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var a=e;a.inputs=Zo(e.inputs),a.declaredInputs=Zo(e.declaredInputs),a.outputs=Zo(e.outputs);var o=i.hostBindings;o&&Go(e,o);var u=i.viewQuery,s=i.contentQueries;if(u&&zo(e,u),s&&Ho(e,s),x(e.inputs,i.inputs),x(e.declaredInputs,i.declaredInputs),x(e.outputs,i.outputs),Ce(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var f=0;f<l.length;f++){var h=l[f];h&&h.ngInherit&&h(e),h===Bo&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Wt(i.hostAttrs,n=Wt(n,i.hostAttrs))}}(r)}function Zo(e){return e===ne?{}:e===re?[]:e}function zo(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function Ho(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function Go(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var Ko=["providersResolver"],Wo=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function Qo(e){var t,n=qo(e.type);t=Ce(e)?n.\u0275cmp:n.\u0275dir;var r,i=e,a=o(Ko);try{for(a.s();!(r=a.n()).done;){var u=r.value;i[u]=t[u]}}catch(f){a.e(f)}finally{a.f()}if(Ce(t)){var s,c=o(Wo);try{for(c.s();!(s=c.n()).done;){var l=s.value;i[l]=t[l]}}catch(f){c.e(f)}finally{c.f()}}}var Yo=null;function Jo(){if(!Yo){var e=te.Symbol;if(e&&e.iterator)Yo=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Yo=r)}}return Yo}var $o=function(){function e(t){d(this,e),this.wrapped=t}return h(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function Xo(e){return!!eu(e)&&(Array.isArray(e)||!(e instanceof Map)&&Jo()in e)}function eu(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function tu(e,t,n){return e[t]=n}function nu(e,t){return e[t]}function ru(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function iu(e,t,n,r){var i=ru(e,t,n);return ru(e,t+1,r)||i}function au(e,t,n,r,i){var a=iu(e,t,n,r);return ru(e,t+2,i)||a}function ou(e,t,n,r,i,a){var o=iu(e,t,n,r);return iu(e,t+2,i,a)||o}function uu(e,t,n,r){var i=rt();return ru(i,mt(),t)&&(it(),no(Pt(),i,e,t,n,r)),uu}function su(e,t){for(var n=!1,r=vt(),i=1;i<t.length;i+=2)n=ru(e,r++,t[i])||n;if(gt(r),!n)return _a;for(var a=t[0],o=1;o<t.length;o+=2)a+=N(t[o])+t[o+1];return a}function cu(e,t,n,r){return ru(e,mt(),n)?t+N(n)+r:_a}function lu(e,t,n,r,i,a){var o=iu(e,vt(),n,i);return yt(2),o?t+N(n)+r+N(i)+a:_a}function fu(e,t,n,r,i,a,o,u){var s=au(e,vt(),n,i,o);return yt(3),s?t+N(n)+r+N(i)+a+N(o)+u:_a}function hu(e,t,n,r,i,a,o,u,s,c){var l=ou(e,vt(),n,i,o,s);return yt(4),l?t+N(n)+r+N(i)+a+N(o)+u+N(s)+c:_a}function du(e,t,n,r,i,a,o,u,s,c,l,f){var h=vt(),d=ou(e,h,n,i,o,s);return d=ru(e,h+4,l)||d,yt(5),d?t+N(n)+r+N(i)+a+N(o)+u+N(s)+c+N(l)+f:_a}function pu(e,t,n,r,i,a,o,u,s,c,l,f,h,d){var p=vt(),v=ou(e,p,n,i,o,s);return v=iu(e,p+4,l,h)||v,yt(6),v?t+N(n)+r+N(i)+a+N(o)+u+N(s)+c+N(l)+f+N(h)+d:_a}function vu(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v){var g=vt(),m=ou(e,g,n,i,o,s);return m=au(e,g+4,l,h,p)||m,yt(7),m?t+N(n)+r+N(i)+a+N(o)+u+N(s)+c+N(l)+f+N(h)+d+N(p)+v:_a}function gu(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g,m){var y=vt(),k=ou(e,y,n,i,o,s);return k=ou(e,y+4,l,h,p,g)||k,yt(8),k?t+N(n)+r+N(i)+a+N(o)+u+N(s)+c+N(l)+f+N(h)+d+N(p)+v+N(g)+m:_a}function mu(e,t,n,r,i,a){var o=rt(),u=cu(o,t,n,r);return u!==_a&&no(Pt(),o,e,u,i,a),mu}function yu(e,t,n,r,i,a,o,u){var s=rt(),c=lu(s,t,n,r,i,a);return c!==_a&&no(Pt(),s,e,c,o,u),yu}function ku(e,t,n,r,i,a,o,u,s,c){var l=rt(),f=fu(l,t,n,r,i,a,o,u);return f!==_a&&no(Pt(),l,e,f,s,c),ku}function wu(e,t,n,r,i,a,o,u,s,c,l,f){var h=rt(),d=hu(h,t,n,r,i,a,o,u,s,c);return d!==_a&&no(Pt(),h,e,d,l,f),wu}function bu(e,t,n,r,i,a,o,u,s,c,l,f,h,d){var p=rt(),v=du(p,t,n,r,i,a,o,u,s,c,l,f);return v!==_a&&no(Pt(),p,e,v,h,d),bu}function _u(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v){var g=rt(),m=pu(g,t,n,r,i,a,o,u,s,c,l,f,h,d);return m!==_a&&no(Pt(),g,e,m,p,v),_u}function xu(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g,m){var y=rt(),k=vu(y,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v);return k!==_a&&no(Pt(),y,e,k,g,m),xu}function Iu(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g,m,y,k){var w=rt(),b=gu(w,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g,m);return b!==_a&&no(Pt(),w,e,b,y,k),Iu}function Tu(e,t,n,r){var i=rt(),a=su(i,t);return a!==_a&&no(Pt(),i,e,a,n,r),Tu}function Eu(e,t,n,r,i,a,o,u){var s=rt(),c=it(),l=e+20,f=c.firstCreatePass?function(e,t,n,r,i,a,o,u,s){var c=t.consts,l=Da(t,e,4,o||null,Ye(c,u));Wa(t,n,l,Ye(c,s)),Ut(t,l);var f=l.tViews=za(2,l,r,i,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),f.queries=t.queries.embeddedTView(l)),l}(l,c,s,t,n,r,i,a,o):c.data[l];ct(f,!1);var h=s[11].createComment("");ta(c,s,h,f),vi(h,s),lo(s,s[l]=oo(h,s,h,f)),Re(f)&&qa(c,s,f),null!=o&&Ba(s,f,u)}function Su(e){return Ge(Xe.lFrame.contextLView,20+e)}var Ru={"\u0275\u0275defineInjectable":L,"\u0275\u0275defineInjector":M,"\u0275\u0275inject":er,"\u0275\u0275invalidFactoryDep":tr,resolveForwardRef:R},Cu=b({provide:String,useValue:b});function Au(e){return void 0!==e.useClass}function Nu(e){return void 0!==e.useFactory}var Ou=In("Injectable",void 0,void 0,void 0,function(e,t){return Du(e,t)}),Du=function(e,t){var n=null,r=null;e.hasOwnProperty(q)||Object.defineProperty(e,q,{get:function(){return null===n&&(n=An().compileInjectable(Ru,"ng:///".concat(e.name,"/\u0275prov.js"),function(e,t){var n=t||{providedIn:null},r={name:e.name,type:e,typeArgumentCount:0,providedIn:n.providedIn};return(Au(n)||Nu(n))&&void 0!==n.deps&&(r.deps=dr(n.deps)),Au(n)?r.useClass=n.useClass:function(e){return Cu in e}(n)?r.useValue=n.useValue:Nu(n)?r.useFactory=n.useFactory:function(e){return void 0!==e.useExisting}(n)&&(r.useExisting=n.useExisting),r}(e,t))),n}}),e.hasOwnProperty(ce)||Object.defineProperty(e,ce,{get:function(){if(null===r){var t=An();r=t.compileFactory(Ru,"ng:///".concat(e.name,"/\u0275fac.js"),{name:e.name,type:e,typeArgumentCount:0,deps:hr(e),target:t.FactoryTarget.Injectable})}return r},configurable:!0})};function Pu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default,n=rt();return null===n?er(e,t):ln(ot(),n,R(e),t)}function Lu(){throw new Error("invalid")}function Mu(e,t,n){var r=rt();return ru(r,mt(),t)&&Ka(it(),Pt(),r,e,t,r[11],n,!1),Mu}function Fu(e,t,n,r,i){var a=i?"class":"style";bo(e,n,t.inputs[a],a,r)}function Uu(e,t,n,r){var i=rt(),a=it(),o=20+e,u=i[11],s=i[o]=Vi(u,t,Xe.lFrame.currentNamespace),c=a.firstCreatePass?function(e,t,n,r,i,a,o){var u=t.consts,s=Da(t,e,2,i,Ye(u,a));return Wa(t,n,s,Ye(u,o)),null!==s.attrs&&xo(s,s.attrs,!1),null!==s.mergedAttrs&&xo(s,s.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,s),s}(o,a,i,0,t,n,r):a.data[o];ct(c,!0);var l=c.mergedAttrs;null!==l&&Ht(u,s,l);var f=c.classes;null!==f&&la(u,s,f);var h=c.styles;null!==h&&ca(u,s,h),64!=(64&c.flags)&&ta(a,i,s,c),0===Xe.lFrame.elementDepthCount&&vi(s,i),Xe.lFrame.elementDepthCount++,Re(c)&&(qa(a,i,c),ja(a,c,i)),null!==r&&Ba(i,c)}function Vu(){var e=ot();lt()?ft():ct(e=e.parent,!1);var t=e;Xe.lFrame.elementDepthCount--;var n=it();n.firstCreatePass&&(Ut(n,e),Ee(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Fu(n,t,rt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Fu(n,t,rt(),t.stylesWithoutHost,!1)}function ju(e,t,n,r){Uu(e,t,n,r),Vu()}function qu(e,t,n){var r=rt(),i=it(),a=e+20,o=i.firstCreatePass?function(e,t,n,r,i){var a=t.consts,o=Ye(a,r),u=Da(t,e,8,"ng-container",o);return null!==o&&xo(u,o,!0),Wa(t,n,u,Ye(a,i)),null!==t.queries&&t.queries.elementStart(t,u),u}(a,i,r,t,n):i.data[a];ct(o,!0);var u=r[a]=r[11].createComment("");ta(i,r,u,o),vi(u,r),Re(o)&&(qa(i,r,o),ja(i,o,r)),null!=n&&Ba(r,o)}function Bu(){var e=ot(),t=it();lt()?ft():ct(e=e.parent,!1),t.firstCreatePass&&(Ut(t,e),Ee(e)&&t.queries.elementEnd(e))}function Zu(e,t,n){qu(e,t,n),Bu()}function zu(){return rt()}function Hu(e){return!!e&&"function"==typeof e.then}function Gu(e){return!!e&&"function"==typeof e.subscribe}var Ku=Gu;function Wu(e,t,n,r){var i=rt(),a=it(),o=ot();return Yu(a,i,i[11],o,e,t,!!n,r),Wu}function Qu(e,t){var n=ot(),r=rt(),i=it();return Yu(i,r,ko(bt(i.data),n,r),n,e,t,!1),Qu}function Yu(e,t,n,r,i,a,o,u){var s=Re(r),c=e.firstCreatePass&&yo(e),l=mo(t),f=!0;if(3&r.type||u){var h=ze(r,t),d=u?u(h):h,p=l.length,v=u?function(e){return u(Be(e[r.index]))}:r.index;if(je(n)){var g=null;if(!u&&s&&(g=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var a=0;a<i.length-1;a+=2){var o=i[a];if(o===n&&i[a+1]===r){var u=t[7],s=i[a+2];return u.length>s?u[s]:null}"string"==typeof o&&(a+=2)}return null}(e,t,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,f=!1;else{a=$u(r,t,0,a,!1);var m=n.listen(d,i,a);l.push(a,m),c&&c.push(i,v,p,p+1)}}else a=$u(r,t,0,a,!0),d.addEventListener(i,a,o),l.push(a),c&&c.push(i,v,p,o)}else a=$u(r,t,0,a,!1);var y,k=r.outputs;if(f&&null!==k&&(y=k[i])){var w=y.length;if(w)for(var b=0;b<w;b+=2){var _=t[y[b]][y[b+1]].subscribe(a),x=l.length;l.push(a,_),c&&c.push(i,r.index,x,-(x+1))}}}function Ju(e,t,n,r){try{return!1!==n(r)}catch(i){return wo(e,i),!1}}function $u(e,t,n,r,i){return function n(a){if(a===Function)return r;var o=2&e.flags?Ke(e.index,t):t;0==(32&t[2])&&fo(o);for(var u=Ju(t,0,r,a),s=n.__ngNextListenerFn__;s;)u=Ju(t,0,s,a)&&u,s=s.__ngNextListenerFn__;return i&&!1===u&&(a.preventDefault(),a.returnValue=!1),u}}function Xu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(Xe.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Xe.lFrame.contextLView))[8]}(e)}function es(e,t){for(var n=null,r=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e),i=0;i<t.length;i++){var a=t[i];if("*"!==a){if(null===r?ya(e,a,!0):ka(r,a))return i}else n=i}return n}function ts(e){var t=rt()[16][6];if(!t.projection)for(var n=t.projection=Fn(e?e.length:1,null),r=n.slice(),i=t.child;null!==i;){var a=e?es(i,e):0;null!==a&&(r[a]?r[a].projectionNext=i:n[a]=i,r[a]=i),i=i.next}}function ns(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=rt(),i=it(),a=Da(i,20+e,16,null,n||null);null===a.projection&&(a.projection=t),ft(),64!=(64&a.flags)&&function(e,t,n){sa(t[11],0,t,n,zi(e,n,t),Yi(n.parent||t[6],n,t))}(i,r,a)}function rs(e,t,n){return is(e,"",t,"",n),rs}function is(e,t,n,r,i){var a=rt(),o=cu(a,t,n,r);return o!==_a&&Ka(it(),Pt(),a,e,o,a[11],i,!1),is}function as(e,t,n,r,i,a,o){var u=rt(),s=lu(u,t,n,r,i,a);return s!==_a&&Ka(it(),Pt(),u,e,s,u[11],o,!1),as}function os(e,t,n,r,i,a,o,u,s){var c=rt(),l=fu(c,t,n,r,i,a,o,u);return l!==_a&&Ka(it(),Pt(),c,e,l,c[11],s,!1),os}function us(e,t,n,r,i,a,o,u,s,c,l){var f=rt(),h=hu(f,t,n,r,i,a,o,u,s,c);return h!==_a&&Ka(it(),Pt(),f,e,h,f[11],l,!1),us}function ss(e,t,n,r,i,a,o,u,s,c,l,f,h){var d=rt(),p=du(d,t,n,r,i,a,o,u,s,c,l,f);return p!==_a&&Ka(it(),Pt(),d,e,p,d[11],h,!1),ss}function cs(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p){var v=rt(),g=pu(v,t,n,r,i,a,o,u,s,c,l,f,h,d);return g!==_a&&Ka(it(),Pt(),v,e,g,v[11],p,!1),cs}function ls(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g){var m=rt(),y=vu(m,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v);return y!==_a&&Ka(it(),Pt(),m,e,y,m[11],g,!1),ls}function fs(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g,m,y){var k=rt(),w=gu(k,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g,m);return w!==_a&&Ka(it(),Pt(),k,e,w,k[11],y,!1),fs}function hs(e,t,n){var r=rt(),i=su(r,t);return i!==_a&&Ka(it(),Pt(),r,e,i,r[11],n,!1),hs}function ds(e,t,n,r,i){for(var a=e[n+1],o=null===t,u=r?Ea(a):Ra(a),s=!1;0!==u&&(!1===s||o);){var c=e[u+1];ps(e[u],t)&&(s=!0,e[u+1]=r?Aa(c):Sa(c)),u=r?Ea(c):Ra(c)}s&&(e[n+1]=r?Sa(a):Aa(a))}function ps(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&jn(e,t)>=0}var vs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gs(e){return e.substring(vs.key,vs.keyEnd)}function ms(e){return e.substring(vs.value,vs.valueEnd)}function ys(e,t){var n=vs.textEnd;return n===t?-1:(t=vs.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,vs.key=t,n),bs(e,t,n))}function ks(e,t){var n=vs.textEnd,r=vs.key=bs(e,t,n);return n===r?-1:(r=vs.keyEnd=function(e,t,n){for(var r;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=_s(e,r,n),r=vs.value=bs(e,r,n),r=vs.valueEnd=function(e,t,n){for(var r=-1,i=-1,a=-1,o=t,u=o;o<n;){var s=e.charCodeAt(o++);if(59===s)return u;34===s||39===s?u=o=xs(e,s,o,n):t===o-4&&85===a&&82===i&&76===r&&40===s?u=o=xs(e,41,o,n):s>32&&(u=o),a=i,i=r,r=-33&s}return u}(e,r,n),_s(e,r,n))}function ws(e){vs.key=0,vs.keyEnd=0,vs.value=0,vs.valueEnd=0,vs.textEnd=e.length}function bs(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function _s(e,t,n,r){return(t=bs(e,t,n))<n&&t++,t}function xs(e,t,n,r){for(var i=-1,a=n;a<r;){var o=e.charCodeAt(a++);if(o==t&&92!==i)return a;i=92==o&&92===i?0:o}throw new Error}function Is(e,t,n){return As(e,t,n,!1),Is}function Ts(e,t){return As(e,t,null,!0),Ts}function Es(e){Ns(Ms,Ss,e,!1)}function Ss(e,t){for(var n=function(e){return ws(e),ks(e,bs(e,0,vs.textEnd))}(t);n>=0;n=ks(t,n))Ms(e,gs(t),ms(t))}function Rs(e){Ns(Un,Cs,e,!0)}function Cs(e,t){for(var n=function(e){return ws(e),ys(e,bs(e,0,vs.textEnd))}(t);n>=0;n=ys(t,n))Un(e,gs(t),!0)}function As(e,t,n,r){var i=rt(),a=it(),o=yt(2);a.firstUpdatePass&&Ds(a,e,o,r),t!==_a&&ru(i,o,t)&&Fs(a,a.data[Ot()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=I(Er(e)))),e}(t,n),r,o)}function Ns(e,t,n,r){var i=it(),a=yt(2);i.firstUpdatePass&&Ds(i,null,a,r);var o=rt();if(n!==_a&&ru(o,a,n)){var u=i.data[Ot()];if(js(u,r)&&!Os(i,a)){var s=r?u.classesWithoutHost:u.stylesWithoutHost;null!==s&&(n=T(s,n||"")),Fu(i,u,o,n,r)}else!function(e,t,n,r,i,a,o,u){i===_a&&(i=re);for(var s=0,c=0,l=0<i.length?i[0]:null,f=0<a.length?a[0]:null;null!==l||null!==f;){var h=s<i.length?i[s+1]:void 0,d=c<a.length?a[c+1]:void 0,p=void 0,v=null;l===f?(s+=2,c+=2,h!==d&&(v=f,p=d)):null===f||null!==l&&l<f?(s+=2,v=l):(c+=2,v=f,p=d),null!==v&&Fs(e,t,n,r,v,p,o,u),l=s<i.length?i[s]:null,f=c<a.length?a[c]:null}}(i,u,o,o[11],o[a+1],o[a+1]=function(e,t,n){if(null==n||""===n)return re;var r=[],i=Er(n);if(Array.isArray(i))for(var a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(var o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,a)}}function Os(e,t){return t>=e.expandoStartIndex}function Ds(e,t,n,r){var i=e.data;if(null===i[n+1]){var a=i[Ot()],o=Os(e,n);js(a,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var i=bt(e),a=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Ls(n=Ps(null,e,t,n,r),t.attrs,r),a=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Ps(i,e,t,n,r),null===a){var u=function(e,t,n){var r=n?t.classBindings:t.styleBindings;if(0!==Ra(r))return e[Ea(r)]}(e,t,r);void 0!==u&&Array.isArray(u)&&function(e,t,n,r){e[Ea(n?t.classBindings:t.styleBindings)]=r}(e,t,r,u=Ls(u=Ps(null,e,t,u[1],r),t.attrs,r))}else a=function(e,t,n){for(var r,i=t.directiveEnd,a=1+t.directiveStylingLast;a<i;a++)r=Ls(r,e[a].hostAttrs,n);return Ls(r,t.attrs,n)}(e,t,r)}return void 0!==a&&(r?t.residualClasses=a:t.residualStyles=a),n}(i,a,t,r),function(e,t,n,r,i,a){var o=a?t.classBindings:t.styleBindings,u=Ea(o),s=Ra(o);e[r]=n;var c,l=!1;if(Array.isArray(n)){var f=n;(null===(c=f[1])||jn(f,c)>0)&&(l=!0)}else c=n;if(i)if(0!==s){var h=Ea(e[u+1]);e[r+1]=Ta(h,u),0!==h&&(e[h+1]=Ca(e[h+1],r)),e[u+1]=131071&e[u+1]|r<<17}else e[r+1]=Ta(u,0),0!==u&&(e[u+1]=Ca(e[u+1],r)),u=r;else e[r+1]=Ta(s,0),0===u?u=r:e[s+1]=Ca(e[s+1],r),s=r;l&&(e[r+1]=Sa(e[r+1])),ds(e,c,r,!0),ds(e,c,r,!1),function(e,t,n,r,i){var a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&jn(a,t)>=0&&(n[r+1]=Aa(n[r+1]))}(t,c,e,r,a),o=Ta(u,s),a?t.classBindings=o:t.styleBindings=o}(i,a,t,n,o,r)}}function Ps(e,t,n,r,i){var a=null,o=n.directiveEnd,u=n.directiveStylingLast;for(-1===u?u=n.directiveStart:u++;u<o&&(r=Ls(r,(a=t[u]).hostAttrs,i),a!==e);)u++;return null!==e&&(n.directiveStylingLast=u),r}function Ls(e,t,n){var r=n?1:2,i=-1;if(null!==t)for(var a=0;a<t.length;a++){var o=t[a];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Un(e,o,!!n||t[++a]))}return void 0===e?null:e}function Ms(e,t,n){Un(e,t,Er(n))}function Fs(e,t,n,r,i,a,o,u){if(3&t.type){var s=e.data,c=s[u+1];Vs(1==(1&c)?Us(s,t,n,i,Ra(c),o):void 0)||(Vs(a)||2==(2&c)&&(a=Us(s,null,n,i,u,o)),function(e,t,n,r,i){var a=je(e);if(t)i?a?e.addClass(n,r):n.classList.add(r):a?e.removeClass(n,r):n.classList.remove(r);else{var o=-1===r.indexOf("-")?void 0:Ci.DashCase;if(null==i)a?e.removeStyle(n,r,o):n.style.removeProperty(r);else{var u="string"==typeof i&&i.endsWith("!important");u&&(i=i.slice(0,-10),o|=Ci.Important),a?e.setStyle(n,r,i,o):n.style.setProperty(r,i,u?"important":"")}}}(r,o,Ze(Ot(),n),i,a))}}function Us(e,t,n,r,i,a){for(var o,u=null===t;i>0;){var s=e[i],c=Array.isArray(s),l=c?s[1]:s,f=null===l,h=n[i+1];h===_a&&(h=f?re:void 0);var d=f?Vn(h,r):l===r?h:void 0;if(c&&!Vs(d)&&(d=Vn(s,r)),Vs(d)&&(o=d,u))return o;var p=e[i+1];i=u?Ea(p):Ra(p)}if(null!==t){var v=a?t.residualClasses:t.residualStyles;null!=v&&(o=Vn(v,r))}return o}function Vs(e){return void 0!==e}function js(e,t){return 0!=(e.flags&(t?16:32))}function qs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=rt(),r=it(),i=e+20,a=r.firstCreatePass?Da(r,i,1,t,null):r.data[i],o=n[i]=Mi(n[11],t);ta(r,n,o,a),ct(a,!1)}function Bs(e){return Zs("",e,""),Bs}function Zs(e,t,n){var r=rt(),i=cu(r,e,t,n);return i!==_a&&_o(r,Ot(),i),Zs}function zs(e,t,n,r,i){var a=rt(),o=lu(a,e,t,n,r,i);return o!==_a&&_o(a,Ot(),o),zs}function Hs(e,t,n,r,i,a,o){var u=rt(),s=fu(u,e,t,n,r,i,a,o);return s!==_a&&_o(u,Ot(),s),Hs}function Gs(e,t,n,r,i,a,o,u,s){var c=rt(),l=hu(c,e,t,n,r,i,a,o,u,s);return l!==_a&&_o(c,Ot(),l),Gs}function Ks(e,t,n,r,i,a,o,u,s,c,l){var f=rt(),h=du(f,e,t,n,r,i,a,o,u,s,c,l);return h!==_a&&_o(f,Ot(),h),Ks}function Ws(e,t,n,r,i,a,o,u,s,c,l,f,h){var d=rt(),p=pu(d,e,t,n,r,i,a,o,u,s,c,l,f,h);return p!==_a&&_o(d,Ot(),p),Ws}function Qs(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p){var v=rt(),g=vu(v,e,t,n,r,i,a,o,u,s,c,l,f,h,d,p);return g!==_a&&_o(v,Ot(),g),Qs}function Ys(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g){var m=rt(),y=gu(m,e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g);return y!==_a&&_o(m,Ot(),y),Ys}function Js(e){var t=rt(),n=su(t,e);return n!==_a&&_o(t,Ot(),n),Js}function $s(e,t,n){Ns(Un,Cs,cu(rt(),e,t,n),!0)}function Xs(e,t,n,r,i){Ns(Un,Cs,lu(rt(),e,t,n,r,i),!0)}function ec(e,t,n,r,i,a,o){Ns(Un,Cs,fu(rt(),e,t,n,r,i,a,o),!0)}function tc(e,t,n,r,i,a,o,u,s){Ns(Un,Cs,hu(rt(),e,t,n,r,i,a,o,u,s),!0)}function nc(e,t,n,r,i,a,o,u,s,c,l){Ns(Un,Cs,du(rt(),e,t,n,r,i,a,o,u,s,c,l),!0)}function rc(e,t,n,r,i,a,o,u,s,c,l,f,h){Ns(Un,Cs,pu(rt(),e,t,n,r,i,a,o,u,s,c,l,f,h),!0)}function ic(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p){Ns(Un,Cs,vu(rt(),e,t,n,r,i,a,o,u,s,c,l,f,h,d,p),!0)}function ac(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g){Ns(Un,Cs,gu(rt(),e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g),!0)}function oc(e){Ns(Un,Cs,su(rt(),e),!0)}function uc(e,t,n){Es(cu(rt(),e,t,n))}function sc(e,t,n,r,i){Es(lu(rt(),e,t,n,r,i))}function cc(e,t,n,r,i,a,o){Es(fu(rt(),e,t,n,r,i,a,o))}function lc(e,t,n,r,i,a,o,u,s){Es(hu(rt(),e,t,n,r,i,a,o,u,s))}function fc(e,t,n,r,i,a,o,u,s,c,l){Es(du(rt(),e,t,n,r,i,a,o,u,s,c,l))}function hc(e,t,n,r,i,a,o,u,s,c,l,f,h){Es(pu(rt(),e,t,n,r,i,a,o,u,s,c,l,f,h))}function dc(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p){Es(vu(rt(),e,t,n,r,i,a,o,u,s,c,l,f,h,d,p))}function pc(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g){Es(gu(rt(),e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g))}function vc(e){Es(su(rt(),e))}function gc(e,t,n,r,i){return As(e,cu(rt(),t,n,r),i,!1),gc}function mc(e,t,n,r,i,a,o){return As(e,lu(rt(),t,n,r,i,a),o,!1),mc}function yc(e,t,n,r,i,a,o,u,s){return As(e,fu(rt(),t,n,r,i,a,o,u),s,!1),yc}function kc(e,t,n,r,i,a,o,u,s,c,l){return As(e,hu(rt(),t,n,r,i,a,o,u,s,c),l,!1),kc}function wc(e,t,n,r,i,a,o,u,s,c,l,f,h){return As(e,du(rt(),t,n,r,i,a,o,u,s,c,l,f),h,!1),wc}function bc(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p){return As(e,pu(rt(),t,n,r,i,a,o,u,s,c,l,f,h,d),p,!1),bc}function _c(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g){return As(e,vu(rt(),t,n,r,i,a,o,u,s,c,l,f,h,d,p,v),g,!1),_c}function xc(e,t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g,m,y){return As(e,gu(rt(),t,n,r,i,a,o,u,s,c,l,f,h,d,p,v,g,m),y,!1),xc}function Ic(e,t,n){return As(e,su(rt(),t),n,!1),Ic}function Tc(e,t,n){var r=rt();return ru(r,mt(),t)&&Ka(it(),Pt(),r,e,t,r[11],n,!0),Tc}function Ec(e,t,n){var r=rt();if(ru(r,mt(),t)){var i=it(),a=Pt();Ka(i,a,r,e,t,ko(bt(i.data),a,r),n,!0)}return Ec}var Sc=void 0,Rc=["en",[["a","p"],["AM","PM"],Sc],[["AM","PM"],Sc,Sc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sc,"{1} 'at' {0}",Sc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Cc={};function Ac(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Oc(t);if(n)return n;var r=t.split("-")[0];if(n=Oc(r))return n;if("en"===r)return Rc;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function Nc(e){return Ac(e)[Dc.PluralCase]}function Oc(e){return e in Cc||(Cc[e]=te.ng&&te.ng.common&&te.ng.common.locales&&te.ng.common.locales[e]),Cc[e]}var Dc=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({}),Pc=["zero","one","two","few","many"],Lc={marker:"element"},Mc={marker:"ICU"},Fc=function(e){return e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT",e}({}),Uc="en-US";function Vc(e){var t;null==(t=e)&&P("Expected localeId to be defined",t,null,"!="),"string"==typeof e&&(Uc=e.toLowerCase().replace(/_/g,"-"))}function jc(e,t,n){var r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Ji(e,0,n):Be(n[i])}function qc(e,t,n,r,i){var a=t.insertBeforeIndex;if(Array.isArray(a)){var o=r,u=null;if(3&t.type||(u=o,o=i),null!==o&&0==(2&t.flags))for(var s=1;s<a.length;s++)Gi(e,o,n[a[s]],u,!1)}}function Bc(e,t){if(e.push(t),e.length>1)for(var n=e.length-2;n>=0;n--){var r=e[n];Zc(r)||zc(r,t)&&null===(i=void 0,i=r.insertBeforeIndex,Array.isArray(i)?i[0]:i)&&Hc(r,t.index)}var i}function Zc(e){return!(64&e.type)}function zc(e,t){return Zc(t)||e.index>t.index}function Hc(e,t){var n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(ea(jc,qc),e.insertBeforeIndex=t)}function Gc(e,t){var n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function Kc(e,t,n){var r=Pa(e,n,64,null,null);return Bc(t,r),r}function Wc(e,t){var n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}var Qc=0,Yc=0;function Jc(e,t,n,r){for(var i,a=n[11],o=null,u=0;u<t.length;u++){var s=t[u];if("string"==typeof s){var c=t[++u];null===n[c]&&(n[c]=Mi(a,s))}else if("number"==typeof s)switch(1&s){case 0:var l=s>>>17,f=void 0,h=void 0;if(null===o&&(o=l,i=Qi(a,r)),l===o?(f=r,h=i):(f=null,h=Be(n[l])),null!==h){var d=(131070&s)>>>1;Gi(a,h,n[d],f,!1);var p=Gc(e,d);if(null!==p&&"object"==typeof p){var v=Wc(p,n);null!==v&&Jc(e,p.create[v],n,n[p.anchorIdx])}}break;case 1:var g=t[++u],m=t[++u];ro(a,Ze(s>>>1,n),null,null,g,m,null);break;default:throw new Error('Unable to determine the type of mutate operation for "'.concat(s,'"'))}else switch(s){case Mc:var y=t[++u],k=t[++u];null===n[k]&&vi(n[k]=Ui(a,y),n);break;case Lc:var w=t[++u],b=t[++u];null===n[b]&&vi(n[b]=Vi(a,w,null),n)}}}function $c(e,t,n,r,i){for(var a=0;a<n.length;a++){var o=n[a],u=n[++a];if(o&i)for(var s="",c=a+1;c<=a+u;c++){var l=n[c];if("string"==typeof l)s+=l;else if("number"==typeof l)if(l<0)s+=N(t[r-l]);else{var f=l>>>2;switch(3&l){case 1:var h=n[++c],d=n[++c],p=e.data[f];"string"==typeof p?ro(t[11],t[f],null,p,h,s,d):Ka(e,p,t,h,s,t[11],d,!1);break;case 0:var v=t[f];null!==v&&Fi(t[11],v,s);break;case 2:el(e,Gc(e,f),t,s);break;case 3:Xc(e,Gc(e,f),r,t)}}}else{var g=n[a+1];if(g>0&&3==(3&g)){var m=Gc(e,g>>>2);t[m.currentCaseLViewIndex]<0&&Xc(e,m,r,t)}}a+=u}}function Xc(e,t,n,r){var i=r[t.currentCaseLViewIndex];if(null!==i){var a=Qc;i<0&&(i=r[t.currentCaseLViewIndex]=~i,a=-1),$c(e,r,t.update[i],n,a)}}function el(e,t,n,r){var i=function(e,t){var n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:var r=function(e,t){var n=Nc(t)(parseInt(e,10)),r=Pc[n];return void 0!==r?r:"other"}(t,Uc);-1===(n=e.cases.indexOf(r))&&"other"!==r&&(n=e.cases.indexOf("other"));break;case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(Wc(t,n)!==i&&(tl(e,t,n),n[t.currentCaseLViewIndex]=null===i?null:~i,null!==i)){var a=n[t.anchorIdx];a&&Jc(e,t.create[i],n,a)}}function tl(e,t,n){var r=Wc(t,n);if(null!==r)for(var i=t.remove[r],a=0;a<i.length;a++){var o=i[a];if(o>0){var u=Ze(o,n);null!==u&&aa(n[11],u)}else tl(e,Gc(e,~o),n)}}var nl=/\ufffd(\d+):?\d*\ufffd/gi,rl=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,il=/\ufffd(\d+)\ufffd/,al=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,ol=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ul=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,sl=/\uE500/g;function cl(e,t,n,r,i,a,o){var u=La(e,r,1,null),s=u<<Fc.SHIFT,c=st();t===c&&(c=null),null===c&&(s|=Fc.APPEND_EAGERLY),o&&(s|=Fc.COMMENT,void 0===Ri&&(Ri=function(){var e,t,n=[],r=-1;function i(e,n){r=0;var i=Wc(e,n);t=null!==i?e.remove[i]:re}function a(){if(r<t.length){var o=t[r++];return o>0?e[o]:(n.push(r,t),i(e[1].data[~o],e),a())}return 0===n.length?null:(t=n.pop(),r=n.pop(),a())}return function(t,r){for(e=r;n.length;)n.pop();return i(t.value,r),a}}())),i.push(s,null===a?"":a);var l=Pa(e,u,o?32:1,null===a?"":a,null);Bc(n,l);var f=l.index;return ct(l,!1),null!==c&&t!==c&&function(e,t){var n,r=e.insertBeforeIndex;null===r?(ea(jc,qc),r=e.insertBeforeIndex=[null,t]):(1!=(n=Array.isArray(r))&&P("Expecting array here",n,!0,"=="),r.push(t))}(c,f),l}function ll(e,t,n,r,i,a,o){var u=o.match(nl),s=cl(e,t,n,a,r,u?null:o,!1);u&&fl(i,o,s.index,null,0,null)}function fl(e,t,n,r,i,a){var o=e.length,u=o+1;e.push(null,null);for(var s=o+2,c=t.split(nl),l=0,f=0;f<c.length;f++){var h=c[f];if(1&f){var d=i+parseInt(h,10);e.push(-1-d),l|=dl(d)}else""!==h&&e.push(h)}return e.push(n<<2|(r?1:0)),r&&e.push(r,a),e[o]=l,e[u]=e.length-s,l}function hl(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];"number"==typeof r&&r<0&&t++}return t}function dl(e){return 1<<Math.min(e,31)}function pl(e){for(var t,n,r="",i=0,a=!1;null!==(t=ol.exec(e));)a?t[0]==="\ufffd/*".concat(n,"\ufffd")&&(i=t.index,a=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],a=!0);return r+=e.substr(i)}function vl(e,t,n,r,i,a){var o=0,u={type:i.type,currentCaseLViewIndex:La(e,t,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(dl(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,i,a),function(e,t,n){var r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,a,u);for(var s=i.values,c=0;c<s.length;c++){for(var l=s[c],f=[],h=0;h<l.length;h++){var d=l[h];if("string"!=typeof d){var p=f.push(d)-1;l[h]="\x3c!--\ufffd".concat(p,"\ufffd--\x3e")}}o=yl(e,u,t,n,r,i.cases[c],l.join(""),f)|o}o&&function(e,t,n){e.push(t,1,n<<2|3)}(n,o,a)}function gl(e){for(var t=[],n=[],r=1,i=0,a=ml(e=e.replace(al,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""})),o=0;o<a.length;){var u=a[o++].trim();1===r&&(u=u.replace(/\s*(?:=)?(\w+)\s*/,"$1")),u.length&&t.push(u);var s=ml(a[o++]);t.length>n.length&&n.push(s)}return{type:r,mainBinding:i,cases:t,values:n}}function ml(e){if(!e)return[];var t,n=0,r=[],i=[],a=/[{}]/g;for(a.lastIndex=0;t=a.exec(e);){var o=t.index;if("}"==t[0]){if(r.pop(),0==r.length){var u=e.substring(n,o);al.test(u)?i.push(gl(u)):i.push(u),n=o+1}}else{if(0==r.length){var s=e.substring(n,o);i.push(s),n=o+1}r.push("{")}}var c=e.substring(n);return i.push(c),i}function yl(e,t,n,r,i,a,o,u){var s=[],c=[],l=[];t.cases.push(a),t.create.push(s),t.remove.push(c),t.update.push(l);var f=Pr(Ve()).getInertBodyElement(o),h=ii(f)||f;return h?kl(e,t,n,r,s,c,l,h,i,u,0):0}function kl(e,t,n,r,i,a,o,u,s,c,l){for(var f=0,h=u.firstChild;h;){var d=La(e,n,1,null);switch(h.nodeType){case Node.ELEMENT_NODE:var p=h,v=p.tagName.toLowerCase();if(Wr.hasOwnProperty(v)){_l(i,Lc,v,s,d),e.data[d]=v;for(var g=p.attributes,m=0;m<g.length;m++){var y=g.item(m),k=y.name.toLowerCase();y.value.match(nl)?Jr.hasOwnProperty(k)&&fl(o,y.value,d,y.name,0,Qr[k]?Vr:Yr[k]?jr:null):xl(i,d,y)}f=kl(e,t,n,r,i,a,o,h,d,c,l+1)|f,wl(a,d,l)}break;case Node.TEXT_NODE:var w=h.textContent||"",b=w.match(nl);_l(i,null,b?"":w,s,d),wl(a,d,l),b&&(f=fl(o,w,d,null,0,null)|f);break;case Node.COMMENT_NODE:var _=il.exec(h.textContent||"");if(_){var x=c[parseInt(_[1],10)];_l(i,Mc,"",s,d),vl(e,n,r,s,x,d),bl(a,d,l)}}h=h.nextSibling}return f}function wl(e,t,n){0===n&&e.push(t)}function bl(e,t,n){0===n&&(e.push(~t),e.push(t))}function _l(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,0|r<<17|i<<1)}function xl(e,t,n){e.push(t<<1|1,n.name,n.value)}var Il=/\[(\ufffd.+?\ufffd?)\]/,Tl=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,El=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,Sl=/{([A-Z0-9_]+)}/g,Rl=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,Cl=/\/\*/,Al=/\d+\:(\d+)/;function Nl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=it(),i=rt(),a=20+e,o=Ye(r.consts,t),u=st();r.firstCreatePass&&function(e,t,n,r,i,a){for(var o,u=st(),s=[],c=[],l=[[]],f=(o=i=function(e,t){if(function(e){return-1===e}(t))return pl(e);var n=e.indexOf(":".concat(t,"\ufffd"))+2+t.toString().length,r=e.search(new RegExp("\ufffd\\/\\*\\d+:".concat(t,"\ufffd")));return pl(e.substring(n,r))}(i,a),o.replace(sl," ")).split(ul),h=0;h<f.length;h++){var d=f[h];if(0==(1&h))for(var p=ml(d),v=0;v<p.length;v++){var g=p[v];if(0==(1&v)){var m=g;""!==m&&ll(e,u,l[0],s,c,n,m)}else{var y=g;if("object"!=typeof y)throw new Error('Unable to parse ICU expression in "'.concat(i,'" message.'));vl(e,n,c,t,y,cl(e,u,l[0],n,s,"",!0).index)}}else{var k=47===d.charCodeAt(0),w=(d.charCodeAt(k?1:0),20+Number.parseInt(d.substring(k?2:1)));if(k)l.shift(),ct(st(),!1);else{var b=Kc(e,l[0],w);l.unshift([]),ct(b,!0)}}}e.data[r]={create:s,update:c}}(r,null===u?0:u.index,i,a,o,n);var s=r.data[a],c=Hi(r,u===i[6]?null:u,i);!function(e,t,n,r){for(var i=e[11],a=0;a<t.length;a++){var o=t[a++],u=t[a],s=(o&Fc.COMMENT)===Fc.COMMENT,c=(o&Fc.APPEND_EAGERLY)===Fc.APPEND_EAGERLY,l=o>>>Fc.SHIFT,f=e[l];null===f&&(f=e[l]=s?i.createComment(u):Mi(i,u)),c&&null!==n&&Gi(i,n,f,r,!1)}}(i,s.create,c,u&&8&u.type?i[u.index]:null),kt(!0)}function Ol(){kt(!1)}function Dl(e,t,n){Nl(e,t,n),Ol()}function Pl(e,t){var n=it();!function(e,t,n){var r=ot().index,i=[];if(e.firstCreatePass&&null===e.data[t]){for(var a=0;a<n.length;a+=2){var o=n[a],u=n[a+1];if(""!==u){if(rl.test(u))throw new Error('ICU expressions are not supported in attributes. Message: "'.concat(u,'".'));fl(i,u,r,o,hl(i),null)}}e.data[t]=i}}(n,e+20,Ye(n.consts,t))}function Ll(e){return ru(rt(),mt(),e)&&(Qc|=1<<Math.min(Yc,31)),Yc++,Ll}function Ml(e){!function(e,t,n){if(Yc>0){var r=e.data[n];$c(e,t,Array.isArray(r)?r:r.update,vt()-Yc-1,Qc)}Qc=0,Yc=0}(it(),rt(),e+20)}function Fl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if(Il.test(e)){var i={},a=[0];n=n.replace(Tl,function(e,t,n){var o=t||n,u=i[o]||[];if(u.length||(o.split("|").forEach(function(e){var t=e.match(Al),n=t?parseInt(t[1],10):0,r=Cl.test(e);u.push([n,r,e])}),i[o]=u),!u.length)throw new Error("i18n postprocess: unmatched placeholder - ".concat(o));for(var s=a[a.length-1],c=0,l=0;l<u.length;l++)if(u[l][0]===s){c=l;break}var f=r(u[c],3),h=f[0],d=f[1],p=f[2];return d?a.pop():s!==h&&a.push(h),u.splice(c,1),p})}return Object.keys(t).length?n=(n=(n=n.replace(El,function(e,n,r,i,a,o){return t.hasOwnProperty(r)?"".concat(n).concat(t[r]).concat(o):e})).replace(Sl,function(e,n){return t.hasOwnProperty(n)?t[n]:e})).replace(Rl,function(e,n){if(t.hasOwnProperty(n)){var r=t[n];if(!r.length)throw new Error("i18n postprocess: unmatched ICU - ".concat(e," with key: ").concat(n));return r.shift()}return e}):n}(e,t)}function Ul(e,t,n,r,i){if(e=R(e),Array.isArray(e))for(var a=0;a<e.length;a++)Ul(e[a],t,n,r,i);else{var o=it(),u=rt(),s=Fo(e)?e:R(e.provide),c=Po(e),l=ot(),f=1048575&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>20;if(Fo(e)||!e.multi){var p=new zt(c,i,Pu),v=ql(s,t,i?f:f+d,h);-1===v?(un(nn(l,u),o,s),Vl(o,e,t.length),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),u.push(p)):(n[v]=p,u[v]=p)}else{var g=ql(s,t,f+d,h),m=ql(s,t,f,f+d),y=g>=0&&n[g],k=m>=0&&n[m];if(i&&!k||!i&&!y){un(nn(l,u),o,s);var w=function(e,t,n,r,i){var a=new zt(e,n,Pu);return a.multi=[],a.index=t,a.componentProviders=0,jl(a,i,r&&!n),a}(i?Zl:Bl,n.length,i,r,c);!i&&k&&(n[m].providerFactory=w),Vl(o,e,t.length,0),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(w),u.push(w)}else Vl(o,e,g>-1?g:m,jl(n[i?m:g],c,!i&&r));!i&&r&&k&&n[m].componentProviders++}}}function Vl(e,t,n,r){var i=Fo(t);if(i||t.useClass){var a=(t.useClass||t).prototype.ngOnDestroy;if(a){var o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var u=o.indexOf(n);-1===u?o.push(n,[r,a]):o[u+1].push(r,a)}else o.push(n,a)}}}function jl(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ql(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function Bl(e,t,n,r){return zl(this.multi,[])}function Zl(e,t,n,r){var i,a=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,u=vn(n,n[1],this.providerFactory.index,r);zl(a,i=u.slice(0,o));for(var s=o;s<u.length;s++)i.push(u[s])}else zl(a,i=[]);return i}function zl(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function Hl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=it();if(r.firstCreatePass){var i=Ce(e);Ul(n,r.data,r.blueprint,i,!0),Ul(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}var Gl=function e(){d(this,e)},Kl=function(){function e(){d(this,e)}return h(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(I(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Wl=function(){var e=function e(){d(this,e)};return e.NULL=new Kl,e}();function Ql(){}function Yl(e,t){return new $l(ze(e,t))}var Jl=function(){return Yl(ot(),rt())},$l=function(){var e=function e(t){d(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=Jl,e}();function Xl(e){return e instanceof $l?e.nativeElement:e}var ef=function e(){d(this,e)},tf=function(){var e=function e(){d(this,e)};return e.__NG_ELEMENT_ID__=function(){return nf()},e}(),nf=function(){var e=rt(),t=Ke(ot().index,e);return function(e){return e[11]}(Ie(t)?t:e)},rf=function(){var e=function e(){d(this,e)};return e.\u0275prov=L({token:e,providedIn:"root",factory:function(){return null}}),e}(),af=function e(t){d(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},of=new af("12.0.5"),uf=function(){function e(){d(this,e)}return h(e,[{key:"supports",value:function(e){return Xo(e)}},{key:"create",value:function(e){return new cf(e)}}]),e}(),sf=function(e,t){return t},cf=function(){function e(t){d(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||sf}return h(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var a=!n||t&&t.currentIndex<df(n,r,i)?t:n,o=df(a,r,i),u=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{i||(i=[]);var s=o-r,c=u-r;if(s!=c){for(var l=0;l<s;l++){var f=l<i.length?i[l]:i[l]=0,h=f+l;c<=h&&h<s&&(i[l]=f+1)}i[a.previousIndex]=c-s}}o!==u&&e(a,o,u)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Xo(e))throw new Error("Error trying to diff '".concat(I(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,a=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var u=0;u<this.length;u++)r=e[u],i=this._trackByFn(u,r),null!==a&&Object.is(a.trackById,i)?(o&&(a=this._verifyReinsertion(a,r,i,u)),Object.is(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,u),o=!0),a=a._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Jo()]();!(r=i.next()).done;)t(r.value)}(e,function(e){i=t._trackByFn(n,e),null!==a&&Object.is(a.trackById,i)?(o&&(a=t._verifyReinsertion(a,e,i,n)),Object.is(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,i,n),o=!0),a=a._next,n++}),this.length=n;return this._truncate(a),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new lf(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new hf),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),lf=function e(t,n){d(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},ff=function(){function e(){d(this,e),this._head=null,this._tail=null}return h(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),hf=function(){function e(){d(this,e),this.map=new Map}return h(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new ff,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function df(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var pf=function(){function e(){d(this,e)}return h(e,[{key:"supports",value:function(e){return e instanceof Map||eu(e)}},{key:"create",value:function(){return new vf}}]),e}(),vf=function(){function e(){d(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return h(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||eu(e)))throw new Error("Error trying to diff '".concat(I(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var a=new gf(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})}}]),e}(),gf=function e(t){d(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function mf(){return new yf([new uf])}var yf=function(){var e=function(){function e(t){d(this,e),this.factories=t}return h(e,[{key:"find",value:function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||mf())},deps:[[e,new cr,new ur]]}}}]),e}();return e.\u0275prov=L({token:e,providedIn:"root",factory:mf}),e}();function kf(){return new wf([new pf])}var wf=function(){var e=function(){function e(t){d(this,e),this.factories=t}return h(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||kf())},deps:[[e,new cr,new ur]]}}}]),e}();return e.\u0275prov=L({token:e,providedIn:"root",factory:kf}),e}();function bf(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var a=t[n.index];if(null!==a&&r.push(Be(a)),Te(a))for(var o=10;o<a.length;o++){var s=a[o],c=s[1].firstChild;null!==c&&bf(s[1],s,c,r)}var l=n.type;if(8&l)bf(e,t,n.child,r);else if(32&l)for(var f=Ai(n,t),h=void 0;h=f();)r.push(h);else if(16&l){var d=ra(t,n);if(Array.isArray(d))r.push.apply(r,u(d));else{var p=Ni(t[16]);bf(p[1],p,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var _f=function(){function e(t,n){d(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return h(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return bf(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(e){this._lView[8]=e}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(Te(e)){var t=e[8],n=t?t.indexOf(this):-1;n>-1&&(qi(e,n),Mn(t,n))}this._attachedToViewContainer=!1}Bi(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){Ha(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){fo(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){ho(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){dt(!0);try{ho(e,t,n)}finally{dt(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,ua(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),xf=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e))._view=e,r}return h(n,[{key:"detectChanges",value:function(){po(this._view)}},{key:"checkNoChanges",value:function(){!function(e){dt(!0);try{po(e)}finally{dt(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(_f),If=function(e){return function(e,t,n){if(Se(e)&&!n){var r=Ke(e.index,t);return new _f(r,r)}return 47&e.type?new _f(t[16],t):null}(ot(),rt(),16==(16&e))},Tf=function(){var e=function e(){d(this,e)};return e.__NG_ELEMENT_ID__=If,e}(),Ef=[new pf],Sf=new yf([new uf]),Rf=new wf(Ef),Cf=function(){return Of(ot(),rt())},Af=function(){var e=function e(){d(this,e)};return e.__NG_ELEMENT_ID__=Cf,e}(),Nf=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._declarationLView=e,a._declarationTContainer=r,a.elementRef=i,a}return h(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=Oa(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Ma(t,n,e),new _f(n)}}]),n}(Af);function Of(e,t){return 4&e.type?new Nf(t,e,Yl(e,t)):null}var Df=function e(){d(this,e)},Pf=function e(){d(this,e)},Lf=function(){return jf(ot(),rt())},Mf=function(){var e=function e(){d(this,e)};return e.__NG_ELEMENT_ID__=Lf,e}(),Ff=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._lContainer=e,a._hostTNode=r,a._hostLView=i,a}return h(n,[{key:"element",get:function(){return Yl(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new yn(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=on(this._hostTNode,this._hostLView);if(Yt(e)){var t=$t(e,this._hostLView),n=Jt(e);return new yn(t[1].data[n+8],t)}return new yn(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=Uf(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var a=n||this.parentInjector;if(!i&&null==e.ngModule&&a){var o=a.get(Df,null);o&&(i=o)}var u=e.create(a,r,void 0,i);return this.insert(u.hostView,t),u}},{key:"insert",value:function(e,t){var r=e._lView,i=r[1];if(Te(r[3])){var a=this.indexOf(e);if(-1!==a)this.detach(a);else{var o=r[3],u=new n(o,o[6],o[3]);u.detach(u.indexOf(e))}}var s=this._adjustIndex(t),c=this._lContainer;!function(e,t,n,r){var i=10+r,a=n.length;r>0&&(n[i-1][4]=t),r<a-10?(t[4]=n[i],Ln(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);var u=t[19];null!==u&&u.insertView(e),t[2]|=128}(i,r,c,s);var l=ia(s,c),f=r[11],h=Qi(f,c[7]);return null!==h&&function(e,t,n,r,i,a){r[0]=i,r[6]=t,ua(e,r,n,1,i,a)}(i,c[6],f,r,h,l),e.attachToViewContainerRef(),Ln(Vf(c),s,e),e}},{key:"move",value:function(e,t){return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=Uf(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=qi(this._lContainer,t);n&&(Mn(Vf(this._lContainer),t),Bi(n[1],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=qi(this._lContainer,t);return n&&null!=Mn(Vf(this._lContainer),t)?new _f(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}}]),n}(Mf);function Uf(e){return e[8]}function Vf(e){return e[8]||(e[8]=[])}function jf(e,t){var n,r=t[e.index];if(Te(r))n=r;else{var i;if(8&e.type)i=Be(r);else{var a=t[11];i=a.createComment("");var o=ze(e,t);Gi(a,Qi(a,o),i,function(e,t){return je(e)?e.nextSibling(t):t.nextSibling}(a,o),!1)}t[e.index]=n=oo(r,t,i,e),lo(t,n)}return new Ff(n,e,t)}var qf={},Bf=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).ngModule=e,r}return h(n,[{key:"resolveComponentFactory",value:function(e){var t=_e(e);return new Hf(t,this.ngModule)}}]),n}(Wl);function Zf(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var zf=new Rn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return xi}}),Hf=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(ba).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return h(n,[{key:"inputs",get:function(){return Zf(this.componentDef.inputs)}},{key:"outputs",get:function(){return Zf(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,a,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var a=e.get(n,qf,i);return a!==qf||r===qf?a:t.get(n,r,i)}}}(e,r.injector):e,u=o.get(ef,qe),s=o.get(rf,null),c=u.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",f=n?function(e,t,n){if(je(e))return e.selectRootElement(t,n===Y.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Vi(u.createRenderer(null,this.componentDef),l,function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),h=this.componentDef.onPush?576:528,d={components:[],scheduler:xi,clean:go,playerHandler:null,flags:0},p=za(0,null,null,1,0,null,null,null,null,null),v=Oa(null,p,d,h,null,null,u,c,s,o);Et(v);try{var g=function(e,t,n,r,i,a){var o=n[1];n[20]=e;var u=Da(o,20,2,"#host",null),s=u.mergedAttrs=t.hostAttrs;null!==s&&(xo(u,s,!0),null!==e&&(Ht(i,e,s),null!==u.classes&&la(i,e,u.classes),null!==u.styles&&ca(i,e,u.styles)));var c=r.createRenderer(e,t),l=Oa(n,Za(t),null,t.onPush?64:16,n[20],u,r,c,null,null);return o.firstCreatePass&&(un(nn(u,n),o,t.type),Ja(o,u),Xa(u,n.length,1)),lo(n,l),n[20]=l}(f,this.componentDef,v,u,c);if(f)if(n)Ht(c,f,["ng-version",of.full]);else{var m=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!ga(i))break;i=a}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=m.attrs,k=m.classes;y&&Ht(c,f,y),k&&k.length>0&&la(c,f,k.join(" "))}if(a=He(p,20),void 0!==t)for(var w=a.projection=[],b=0;b<this.ngContentSelectors.length;b++){var _=t[b];w.push(null!=_?Array.from(_):null)}i=function(e,t,n,r,i){var a=n[1],o=function(e,t,n){var r=ot();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),eo(e,r,t,La(e,t,1,null),n));var i=vn(t,e,r.directiveStart,r);vi(i,t);var a=ze(r,t);return a&&vi(a,t),i}(a,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(function(e){return e(o,t)}),t.contentQueries){var u=ot();t.contentQueries(1,o,u.directiveStart)}var s=ot();return!a.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Dt(s.index),Qa(n[1],s,0,s.directiveStart,s.directiveEnd,t),Ya(t,o)),o}(g,this.componentDef,v,d,[jo]),Ma(p,v,null)}finally{Nt()}return new Gf(this.componentType,i,Yl(a,v),v,a)}}]),n}(Gl),Gf=function(e){p(n,e);var t=v(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this)).location=i,u._rootLView=a,u._tNode=o,u.instance=r,u.hostView=u.changeDetectorRef=new xf(a),u.componentType=e,u}return h(n,[{key:"injector",get:function(){return new yn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(function(){return function e(){d(this,e)}}());function Kf(e,t,n,r){return W(function(){var i,a=e;null!==t&&(a.hasOwnProperty("decorators")&&void 0!==a.decorators?(i=a.decorators).push.apply(i,u(t)):a.decorators=t),null!==n&&(a.ctorParameters=n),null!==r&&(a.propDecorators=a.hasOwnProperty("propDecorators")&&void 0!==a.propDecorators?Object.assign(Object.assign({},a.propDecorators),r):r)})}var Wf=new Map,Qf=function(e){p(n,e);var t=v(n);function n(e,r){var i;d(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=m(i),i.destroyCbs=[],i.componentFactoryResolver=new Bf(m(i));var a=xe(e),o=e[se]||null;return o&&Vc(o),i._bootstrapComponents=Si(a.bootstrap),i._r3Injector=No(e,r,[{provide:Df,useValue:m(i)},{provide:Wl,useValue:i.componentFactoryResolver}],I(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return h(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vo.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;return e===Vo||e===Df||e===To?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Df),Yf=function(e){p(n,e);var t=v(n);function n(e){var r,i,a;return d(this,n),(r=t.call(this)).moduleType=e,null!==xe(e)&&(i=e,a=new Set,function e(t){var n=xe(t,!0),r=n.id;null!==r&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(I(t)," vs ").concat(I(t.name)))}(r,Wf.get(r),t),Wf.set(r,t));var i,u=o(Si(n.imports));try{for(u.s();!(i=u.n()).done;){var s=i.value;a.has(s)||(a.add(s),e(s))}}catch(c){u.e(c)}finally{u.f()}}(i)),r}return h(n,[{key:"create",value:function(e){return new Qf(this.moduleType,e)}}]),n}(Pf);function Jf(e,t,n){var r=pt()+e,i=rt();return i[r]===_a?tu(i,r,n?t.call(n):t()):nu(i,r)}function $f(e,t,n,r){return sh(rt(),pt(),e,t,n,r)}function Xf(e,t,n,r,i){return ch(rt(),pt(),e,t,n,r,i)}function eh(e,t,n,r,i,a){return lh(rt(),pt(),e,t,n,r,i,a)}function th(e,t,n,r,i,a,o){return fh(rt(),pt(),e,t,n,r,i,a,o)}function nh(e,t,n,r,i,a,o,u){var s=pt()+e,c=rt(),l=ou(c,s,n,r,i,a);return ru(c,s+4,o)||l?tu(c,s+5,u?t.call(u,n,r,i,a,o):t(n,r,i,a,o)):nu(c,s+5)}function rh(e,t,n,r,i,a,o,u,s){var c=pt()+e,l=rt(),f=ou(l,c,n,r,i,a);return iu(l,c+4,o,u)||f?tu(l,c+6,s?t.call(s,n,r,i,a,o,u):t(n,r,i,a,o,u)):nu(l,c+6)}function ih(e,t,n,r,i,a,o,u,s,c){var l=pt()+e,f=rt(),h=ou(f,l,n,r,i,a);return au(f,l+4,o,u,s)||h?tu(f,l+7,c?t.call(c,n,r,i,a,o,u,s):t(n,r,i,a,o,u,s)):nu(f,l+7)}function ah(e,t,n,r,i,a,o,u,s,c,l){var f=pt()+e,h=rt(),d=ou(h,f,n,r,i,a);return ou(h,f+4,o,u,s,c)||d?tu(h,f+8,l?t.call(l,n,r,i,a,o,u,s,c):t(n,r,i,a,o,u,s,c)):nu(h,f+8)}function oh(e,t,n,r){return hh(rt(),pt(),e,t,n,r)}function uh(e,t){var n=e[t];return n===_a?void 0:n}function sh(e,t,n,r,i,a){var o=t+n;return ru(e,o,i)?tu(e,o+1,a?r.call(a,i):r(i)):uh(e,o+1)}function ch(e,t,n,r,i,a,o){var u=t+n;return iu(e,u,i,a)?tu(e,u+2,o?r.call(o,i,a):r(i,a)):uh(e,u+2)}function lh(e,t,n,r,i,a,o,u){var s=t+n;return au(e,s,i,a,o)?tu(e,s+3,u?r.call(u,i,a,o):r(i,a,o)):uh(e,s+3)}function fh(e,t,n,r,i,a,o,u,s){var c=t+n;return ou(e,c,i,a,o,u)?tu(e,c+4,s?r.call(s,i,a,o,u):r(i,a,o,u)):uh(e,c+4)}function hh(e,t,n,r,i,a){for(var o=t+n,u=!1,s=0;s<i.length;s++)ru(e,o++,i[s])&&(u=!0);return u?tu(e,o,r.apply(a,i)):uh(e,o)}function dh(e,t){var n,r=it(),i=e+20;r.firstCreatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var r=t[n];if(e===r.name)return r}throw new A("302","The pipe '".concat(e,"' could not be found!"))}(t,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var a=n.factory||(n.factory=Ae(n.type)),o=G(Pu);try{var u=en(!1),s=a();return en(u),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(r,rt(),i,s),s}finally{G(o)}}function ph(e,t,n){var r=e+20,i=rt(),a=Ge(i,r);return wh(i,kh(i,r)?sh(i,pt(),t,a.transform,n,a):a.transform(n))}function vh(e,t,n,r){var i=e+20,a=rt(),o=Ge(a,i);return wh(a,kh(a,i)?ch(a,pt(),t,o.transform,n,r,o):o.transform(n,r))}function gh(e,t,n,r,i){var a=e+20,o=rt(),u=Ge(o,a);return wh(o,kh(o,a)?lh(o,pt(),t,u.transform,n,r,i,u):u.transform(n,r,i))}function mh(e,t,n,r,i,a){var o=e+20,u=rt(),s=Ge(u,o);return wh(u,kh(u,o)?fh(u,pt(),t,s.transform,n,r,i,a,s):s.transform(n,r,i,a))}function yh(e,t,n){var r=e+20,i=rt(),a=Ge(i,r);return wh(i,kh(i,r)?hh(i,pt(),t,a.transform,n,a):a.transform.apply(a,n))}function kh(e,t){return e[1].data[t].pure}function wh(e,t){return $o.isWrapped(t)&&(t=$o.unwrap(t),e[vt()]=_a),t}function bh(e){return function(t){setTimeout(e,void 0,t)}}var _h=function(e){p(r,e);var n=v(r);function r(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return d(this,r),(e=n.call(this)).__isAsync=t,e}return h(r,[{key:"emit",value:function(e){t(_(r.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,n,i){var a,o,u,c=e,l=n||function(){return null},f=i;if(e&&"object"==typeof e){var h=e;c=null===(a=h.next)||void 0===a?void 0:a.bind(h),l=null===(o=h.error)||void 0===o?void 0:o.bind(h),f=null===(u=h.complete)||void 0===u?void 0:u.bind(h)}this.__isAsync&&(l=bh(l),c&&(c=bh(c)),f&&(f=bh(f)));var d=t(_(r.prototype),"subscribe",this).call(this,{next:c,error:l,complete:f});return e instanceof s.w&&e.add(d),d}}]),r}(a.xQ);function xh(){return this._results[Jo()]()}var Ih=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=Jo(),r=e.prototype;r[n]||(r[n]=xh)}return h(e,[{key:"changes",get:function(){return this._changes||(this._changes=new _h)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){this.dirty=!1;var n=Dn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],a=t[r];if(n&&(i=n(i),a=n(a)),a!==i)return!1}return!0}(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}},{key:"notifyOnChanges",value:function(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),Th=function(){function e(t){d(this,e),this.queryList=t,this.matches=null}return h(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),Eh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,e),this.queries=t}return h(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],a=0;a<r;a++){var o=n.getByIndex(a);i.push(this.queries[o.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==jh(e,t).matches&&this.queries[t].setDirty()}}]),e}(),Sh=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.predicate=t,this.flags=n,this.read=r},Rh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,e),this.queries=t}return h(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),Ch=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;d(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return h(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(e,t,Ah(t,i)),this.matchTNodeWithReadOption(e,t,pn(t,e,i,!1,!1))}else n===Af?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,pn(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===$l||r===Mf||r===Af&&4&t.type)this.addMatch(t.index,-2);else{var i=pn(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function Ah(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Nh(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Yl(e,t):4&e.type?Of(e,t):null}(t,e):-2===n?function(e,t,n){return n===$l?Yl(t,e):n===Af?Of(t,e):n===Mf?jf(t,e):void 0}(e,t,r):vn(e,e[1],n,t)}function Oh(e,t,n,r){var i=t[19].queries[r];if(null===i.matches){for(var a=e.data,o=n.matches,u=[],s=0;s<o.length;s+=2){var c=o[s];u.push(c<0?null:Nh(t,a[c],o[s+1],n.metadata.read))}i.matches=u}return i.matches}function Dh(e,t,n,r){var i=e.queries.getByIndex(n),a=i.matches;if(null!==a)for(var o=Oh(e,t,i,n),u=0;u<a.length;u+=2){var s=a[u];if(s>0)r.push(o[u/2]);else{for(var c=a[u+1],l=t[-s],f=10;f<l.length;f++){var h=l[f];h[17]===h[3]&&Dh(h[1],h,c,r)}if(null!==l[9])for(var d=l[9],p=0;p<d.length;p++){var v=d[p];Dh(v[1],v,c,r)}}}return r}function Ph(e){var t=rt(),n=it(),r=_t();xt(r+1);var i=jh(n,r);if(e.dirty&&We(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{var a=i.crossesNgTemplate?Dh(n,t,r,[]):Oh(n,t,i,r);e.reset(a,Xl),e.notifyOnChanges()}return!0}return!1}function Lh(e,t,n){var r=it();r.firstCreatePass&&(Vh(r,new Sh(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Uh(r,rt(),t)}function Mh(e,t,n,r){var i=it();if(i.firstCreatePass){var a=ot();Vh(i,new Sh(t,n,r),a.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Uh(i,rt(),n)}function Fh(){return e=rt(),t=_t(),e[19].queries[t].queryList;var e,t}function Uh(e,t,n){var r=new Ih(4==(4&n));Ha(e,t,r,r.destroy),null===t[19]&&(t[19]=new Eh),t[19].queries.push(new Th(r))}function Vh(e,t,n){null===e.queries&&(e.queries=new Rh),e.queries.track(new Ch(t,n))}function jh(e,t){return e.queries.getByIndex(t)}function qh(e,t){return Of(e,t)}var Bh={"\u0275\u0275attribute":uu,"\u0275\u0275attributeInterpolate1":mu,"\u0275\u0275attributeInterpolate2":yu,"\u0275\u0275attributeInterpolate3":ku,"\u0275\u0275attributeInterpolate4":wu,"\u0275\u0275attributeInterpolate5":bu,"\u0275\u0275attributeInterpolate6":_u,"\u0275\u0275attributeInterpolate7":xu,"\u0275\u0275attributeInterpolate8":Iu,"\u0275\u0275attributeInterpolateV":Tu,"\u0275\u0275defineComponent":he,"\u0275\u0275defineDirective":we,"\u0275\u0275defineInjectable":L,"\u0275\u0275defineInjector":M,"\u0275\u0275defineNgModule":me,"\u0275\u0275definePipe":be,"\u0275\u0275directiveInject":Pu,"\u0275\u0275getInheritedFactory":kn,"\u0275\u0275inject":er,"\u0275\u0275injectAttribute":bn,"\u0275\u0275invalidFactory":Lu,"\u0275\u0275invalidFactoryDep":tr,"\u0275\u0275templateRefExtractor":qh,"\u0275\u0275NgOnChangesFeature":De,"\u0275\u0275ProvidersFeature":Hl,"\u0275\u0275CopyDefinitionFeature":Qo,"\u0275\u0275InheritDefinitionFeature":Bo,"\u0275\u0275nextContext":Xu,"\u0275\u0275namespaceHTML":Ft,"\u0275\u0275namespaceMathML":Mt,"\u0275\u0275namespaceSVG":Lt,"\u0275\u0275enableBindings":tt,"\u0275\u0275disableBindings":nt,"\u0275\u0275elementStart":Uu,"\u0275\u0275elementEnd":Vu,"\u0275\u0275element":ju,"\u0275\u0275elementContainerStart":qu,"\u0275\u0275elementContainerEnd":Bu,"\u0275\u0275elementContainer":Zu,"\u0275\u0275pureFunction0":Jf,"\u0275\u0275pureFunction1":$f,"\u0275\u0275pureFunction2":Xf,"\u0275\u0275pureFunction3":eh,"\u0275\u0275pureFunction4":th,"\u0275\u0275pureFunction5":nh,"\u0275\u0275pureFunction6":rh,"\u0275\u0275pureFunction7":ih,"\u0275\u0275pureFunction8":ah,"\u0275\u0275pureFunctionV":oh,"\u0275\u0275getCurrentView":zu,"\u0275\u0275restoreView":at,"\u0275\u0275listener":Wu,"\u0275\u0275projection":ns,"\u0275\u0275syntheticHostProperty":Ec,"\u0275\u0275syntheticHostListener":Qu,"\u0275\u0275pipeBind1":ph,"\u0275\u0275pipeBind2":vh,"\u0275\u0275pipeBind3":gh,"\u0275\u0275pipeBind4":mh,"\u0275\u0275pipeBindV":yh,"\u0275\u0275projectionDef":ts,"\u0275\u0275hostProperty":Tc,"\u0275\u0275property":Mu,"\u0275\u0275propertyInterpolate":rs,"\u0275\u0275propertyInterpolate1":is,"\u0275\u0275propertyInterpolate2":as,"\u0275\u0275propertyInterpolate3":os,"\u0275\u0275propertyInterpolate4":us,"\u0275\u0275propertyInterpolate5":ss,"\u0275\u0275propertyInterpolate6":cs,"\u0275\u0275propertyInterpolate7":ls,"\u0275\u0275propertyInterpolate8":fs,"\u0275\u0275propertyInterpolateV":hs,"\u0275\u0275pipe":dh,"\u0275\u0275queryRefresh":Ph,"\u0275\u0275viewQuery":Lh,"\u0275\u0275loadQuery":Fh,"\u0275\u0275contentQuery":Mh,"\u0275\u0275reference":Su,"\u0275\u0275classMap":Rs,"\u0275\u0275classMapInterpolate1":$s,"\u0275\u0275classMapInterpolate2":Xs,"\u0275\u0275classMapInterpolate3":ec,"\u0275\u0275classMapInterpolate4":tc,"\u0275\u0275classMapInterpolate5":nc,"\u0275\u0275classMapInterpolate6":rc,"\u0275\u0275classMapInterpolate7":ic,"\u0275\u0275classMapInterpolate8":ac,"\u0275\u0275classMapInterpolateV":oc,"\u0275\u0275styleMap":Es,"\u0275\u0275styleMapInterpolate1":uc,"\u0275\u0275styleMapInterpolate2":sc,"\u0275\u0275styleMapInterpolate3":cc,"\u0275\u0275styleMapInterpolate4":lc,"\u0275\u0275styleMapInterpolate5":fc,"\u0275\u0275styleMapInterpolate6":hc,"\u0275\u0275styleMapInterpolate7":dc,"\u0275\u0275styleMapInterpolate8":pc,"\u0275\u0275styleMapInterpolateV":vc,"\u0275\u0275styleProp":Is,"\u0275\u0275stylePropInterpolate1":gc,"\u0275\u0275stylePropInterpolate2":mc,"\u0275\u0275stylePropInterpolate3":yc,"\u0275\u0275stylePropInterpolate4":kc,"\u0275\u0275stylePropInterpolate5":wc,"\u0275\u0275stylePropInterpolate6":bc,"\u0275\u0275stylePropInterpolate7":_c,"\u0275\u0275stylePropInterpolate8":xc,"\u0275\u0275stylePropInterpolateV":Ic,"\u0275\u0275classProp":Ts,"\u0275\u0275advance":xa,"\u0275\u0275template":Eu,"\u0275\u0275text":qs,"\u0275\u0275textInterpolate":Bs,"\u0275\u0275textInterpolate1":Zs,"\u0275\u0275textInterpolate2":zs,"\u0275\u0275textInterpolate3":Hs,"\u0275\u0275textInterpolate4":Gs,"\u0275\u0275textInterpolate5":Ks,"\u0275\u0275textInterpolate6":Ws,"\u0275\u0275textInterpolate7":Qs,"\u0275\u0275textInterpolate8":Ys,"\u0275\u0275textInterpolateV":Js,"\u0275\u0275i18n":Dl,"\u0275\u0275i18nAttributes":Pl,"\u0275\u0275i18nExp":Ll,"\u0275\u0275i18nStart":Nl,"\u0275\u0275i18nEnd":Ol,"\u0275\u0275i18nApply":Ml,"\u0275\u0275i18nPostprocess":Fl,"\u0275\u0275resolveWindow":Ii,"\u0275\u0275resolveDocument":Ti,"\u0275\u0275resolveBody":Ei,"\u0275\u0275setComponentScope":de,"\u0275\u0275setNgModuleScope":ye,"\u0275\u0275sanitizeHtml":oi,"\u0275\u0275sanitizeStyle":ui,"\u0275\u0275sanitizeResourceUrl":ci,"\u0275\u0275sanitizeScript":li,"\u0275\u0275sanitizeUrl":si,"\u0275\u0275sanitizeUrlOrResourceUrl":di,"\u0275\u0275trustConstantHtml":fi,"\u0275\u0275trustConstantResourceUrl":hi,forwardRef:S,resolveForwardRef:R},Zh=[];function zh(e){return function(e){return void 0!==e.ngModule}(e)?e.ngModule:e}var Hh=In("NgModule",function(e){return e},void 0,void 0,function(e,t){return Gh(e,t)}),Gh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){var n=Dn(t.declarations||re),r=null;Object.defineProperty(e,ue,{configurable:!0,get:function(){return null===r&&((r=An().compileNgModule(Bh,"ng:///".concat(e.name,"/\u0275mod.js"),{type:e,bootstrap:Dn(t.bootstrap||re).map(R),declarations:n.map(R),imports:Dn(t.imports||re).map(R).map(zh),exports:Dn(t.exports||re).map(R).map(zh),schemas:t.schemas?Dn(t.schemas):null,id:t.id||null})).schemas||(r.schemas=[])),r}});var i=null;Object.defineProperty(e,ce,{get:function(){if(null===i){var t=An();i=t.compileFactory(Bh,"ng:///".concat(e.name,"/\u0275fac.js"),{name:e.name,type:e,deps:hr(e),target:t.FactoryTarget.NgModule,typeArgumentCount:0})}return i},configurable:!1});var a=null;Object.defineProperty(e,B,{get:function(){if(null===a){var n={name:e.name,type:e,providers:t.providers||re,imports:[(t.imports||re).map(R),(t.exports||re).map(R)]};a=An().compileInjector(Bh,"ng:///".concat(e.name,"/\u0275inj.js"),n)}return a},configurable:!1})}(e,t),function(e,t){Zh.push({moduleType:e,ngModule:t})}(e,t)},Kh=new Rn("Application Initializer"),Wh=function(){var e=function(){function e(t){var n=this;d(this,e),this.appInits=t,this.resolve=Ql,this.reject=Ql,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return h(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=function(n){var r=e.appInits[n]();if(Hu(r))t.push(r);else if(Ku(r)){var i=new Promise(function(e,t){r.subscribe({complete:e,error:t})});t.push(i)}},i=0;i<this.appInits.length;i++)r(i);Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(er(Kh,8))},e.\u0275prov=L({token:e,factory:e.\u0275fac}),e}(),Qh=new Rn("AppId"),Yh={provide:Qh,useFactory:function(){return"".concat(Jh()).concat(Jh()).concat(Jh())},deps:[]};function Jh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var $h=new Rn("Platform Initializer"),Xh=new Rn("Platform ID"),ed=new Rn("appBootstrapListener"),td=function(){var e=function(){function e(){d(this,e)}return h(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac}),e}(),nd=new Rn("LocaleId"),rd=new Rn("DefaultCurrencyCode"),id=function e(t,n){d(this,e),this.ngModuleFactory=t,this.componentFactories=n},ad=function(e){return new Yf(e)},od=ad,ud=function(e){return Promise.resolve(ad(e))},sd=function(e){var t=ad(e),n=Si(xe(e).declarations).reduce(function(e,t){var n=_e(t);return n&&e.push(new Hf(n)),e},[]);return new id(t,n)},cd=sd,ld=function(e){return Promise.resolve(sd(e))},fd=function(){var e=function(){function e(){d(this,e),this.compileModuleSync=od,this.compileModuleAsync=ud,this.compileModuleAndAllComponentsSync=cd,this.compileModuleAndAllComponentsAsync=ld}return h(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac}),e}(),hd=Promise.resolve(0);function dd(e){"undefined"==typeof Zone?hd.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var pd=function(){function e(t){var n,r,i=t.enableLongStackTrace,a=void 0!==i&&i,o=t.shouldCoalesceEventChangeDetection,u=void 0!==o&&o,s=t.shouldCoalesceRunChangeDetection,c=void 0!==s&&s;if(d(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _h(!1),this.onMicrotaskEmpty=new _h(!1),this.onStable=new _h(!1),this.onError=new _h(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!c&&u,this.shouldCoalesceRunChangeDetection=c,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=te.requestAnimationFrame,t=te.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=function(){!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(te,function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){e.lastRequestAnimationFrameId=-1,md(e),e.isCheckStableRunning=!0,gd(e),e.isCheckStableRunning=!1},void 0,function(){},function(){})),e.fakeTopEventTask.invoke()}),md(e))}(n)},(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,i,a,o,u){try{return yd(n),e.invokeTask(i,a,o,u)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||n.shouldCoalesceRunChangeDetection)&&r(),kd(n)}},onInvoke:function(e,t,i,a,o,u,s){try{return yd(n),e.invoke(i,a,o,u,s)}finally{n.shouldCoalesceRunChangeDetection&&r(),kd(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,md(n),gd(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular(function(){return n.onError.emit(i)}),!1}})}return h(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,e,vd,Ql,Ql);try{return i.runTask(a,t,n)}finally{i.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}(),vd={};function gd(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function md(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function yd(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function kd(e){e._nesting--,gd(e)}var wd=function(){function e(){d(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _h,this.onMicrotaskEmpty=new _h,this.onStable=new _h,this.onError=new _h}return h(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),bd=function(){var e=function(){function e(t){var n=this;d(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return h(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){pd.assertNotInAngularZone(),dd(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())dd(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(er(pd))},e.\u0275prov=L({token:e,factory:e.\u0275fac}),e}(),_d=function(){var e=function(){function e(){d(this,e),this._applications=new Map,Td.addToWindow(this)}return h(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Td.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac}),e}();function xd(e){Td=e}var Id,Td=new(function(){function e(){d(this,e)}return h(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Ed=!0,Sd=!1;function Rd(){return Sd=!0,Ed}function Cd(){if(Sd)throw new Error("Cannot enable prod mode after platform setup.");Ed=!1}var Ad=new Rn("AllowMultipleToken"),Nd=function e(t,n){d(this,e),this.name=t,this.token=n};function Od(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new Rn(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=Dd();if(!a||a.injector.get(Ad,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0},{provide:So,useValue:"platform"});!function(e){if(Id&&!Id.destroyed&&!Id.injector.get(Ad,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Id=e.get(Pd);var t=e.get($h,null);t&&t.forEach(function(e){return e()})}(Vo.create({providers:o,name:r}))}return function(e){var t=Dd();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Dd(){return Id&&!Id.destroyed?Id:null}var Pd=function(){var e=function(){function e(t){d(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return h(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,i=this,a=(n=t?t.ngZone:void 0,r={ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1},"noop"===n?new wd:("zone.js"===n?void 0:n)||new pd({enableLongStackTrace:Rd(),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)})),o=[{provide:pd,useValue:a}];return a.run(function(){var t=Vo.create({providers:o,parent:i.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(wi,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(function(){var e=a.onError.subscribe({next:function(e){r.handleError(e)}});n.onDestroy(function(){Fd(i._modules,n),e.unsubscribe()})}),function(e,t,r){try{var a=((o=n.injector.get(Wh)).runInitializers(),o.donePromise.then(function(){return Vc(n.injector.get(nd,"en-US")||"en-US"),i._moduleDoBootstrap(n),n}));return Hu(a)?a.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):a}catch(u){throw t.runOutsideAngular(function(){return e.handleError(u)}),u}var o}(r,a)})}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Ld({},n);return function(e,t,n){var r=new Yf(n);return Promise.resolve(r)}(0,0,e).then(function(e){return t.bootstrapModuleFactory(e,r)})}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(Md);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(I(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(er(Vo))},e.\u0275prov=L({token:e,factory:e.\u0275fac}),e}();function Ld(e,t){return Array.isArray(t)?t.reduce(Ld,e):Object.assign(Object.assign({},e),t)}var Md=function(){var e=function(){function e(t,n,r,i,a){var o=this;d(this,e),this._zone=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run(function(){o.tick()})}});var u=new c.y(function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular(function(){e.next(o._stable),e.complete()})}),s=new c.y(function(e){var t;o._zone.runOutsideAngular(function(){t=o._zone.onStable.subscribe(function(){pd.assertNotInAngularZone(),dd(function(){o._stable||o._zone.hasPendingMacrotasks||o._zone.hasPendingMicrotasks||(o._stable=!0,e.next(!0))})})});var n=o._zone.onUnstable.subscribe(function(){pd.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,l.T)(u,s.pipe(function(e){return(0,g.x)()((t=w,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,f.N);return r.source=e,r.subjectFactory=n,r})(e));var t}))}return h(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Gl?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(Df),a=n.create(Vo.NULL,[],t||n.selector,i),o=a.location.nativeElement,u=a.injector.get(bd,null),s=u&&a.injector.get(_d);return u&&s&&s.registerApplication(o,u),a.onDestroy(function(){r.detachView(a.hostView),Fd(r.components,a),s&&s.unregisterApplication(o)}),this._loadComponent(a),a}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=o(this._views);try{for(n.s();!(t=n.n()).done;){t.value.detectChanges()}}catch(r){n.e(r)}finally{n.f()}}catch(i){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(i)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;Fd(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ed,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(e){return e.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(er(pd),er(Vo),er(wi),er(Wl),er(Wh))},e.\u0275prov=L({token:e,factory:e.\u0275fac}),e}();function Fd(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Ud=function e(){d(this,e)},Vd=function e(){d(this,e)},jd={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},qd=function(){var e=function(){function e(t,n){d(this,e),this._compiler=t,this._config=n||jd}return h(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,n=r(e.split("#"),2),a=n[0],o=n[1];return void 0===o&&(o="default"),i(8255)(a).then(function(e){return e[o]}).then(function(e){return Bd(e,a,o)}).then(function(e){return t._compiler.compileModuleAsync(e)})}},{key:"loadFactory",value:function(e){var t=r(e.split("#"),2),n=t[0],a=t[1],o="NgFactory";return void 0===a&&(a="default",o=""),i(8255)(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then(function(e){return e[a+o]}).then(function(e){return Bd(e,n,a)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(er(fd),er(Vd,8))},e.\u0275prov=L({token:e,factory:e.\u0275fac}),e}();function Bd(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var Zd=function(e){return null},zd=Od(null,"core",[{provide:Xh,useValue:"unknown"},{provide:Pd,deps:[Vo]},{provide:_d,deps:[]},{provide:td,deps:[]}]),Hd=[{provide:Md,useClass:Md,deps:[pd,Vo,wi,Wl,Wh]},{provide:zf,deps:[pd],useFactory:function(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Wh,useClass:Wh,deps:[[new ur,Kh]]},{provide:fd,useClass:fd,deps:[]},Yh,{provide:yf,useFactory:function(){return Sf},deps:[]},{provide:wf,useFactory:function(){return Rf},deps:[]},{provide:nd,useFactory:function(e){return Vc(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new or(nd),new ur,new cr]]},{provide:rd,useValue:"USD"}],Gd=function(){var e=function e(t){d(this,e)};return e.\u0275fac=function(t){return new(t||e)(er(Md))},e.\u0275mod=me({type:e}),e.\u0275inj=M({providers:Hd}),e}()},9748:function(e,t,n){"use strict";n.d(t,{hO:function(){return k},xv:function(){return v},Dh:function(){return p},GT:function(){return l},cc:function(){return w},on:function(){return g},pX:function(){return c}});var i=n(7368),a=n(9001),o=n(8934);e=n.hmd(e);var s=["ngOnDestroy"],c=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(e,{get:function(i,a){return n.runOutsideAngular(function(){var i;if(e[a])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(a,e[a]),e[a];if(s.indexOf(a)>-1)return function(){};var o=t.toPromise().then(function(e){var t=e&&e[a];return"function"==typeof t?t.bind(e):t&&t.then?t.then(function(e){return n.run(function(){return e})}):n.run(function(){return t})});return new Proxy(function(){},{get:function(e,t){return o[t]},apply:function(e,t,n){return o.then(function(e){var t,i=e&&e.apply(void 0,u(n));return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(a,n,i),i})}})})}})},l=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype||t).forEach(function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})},f=function e(t){return d(this,e),t},p=new i.OlP("angularfire2.app.options"),v=new i.OlP("angularfire2.app.name");function g(t,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var o=a.Z.apps.filter(function(e){return e&&e.name===i.name})[0]||n.runOutsideAngular(function(){return a.Z.initializeApp(t,i)});try{JSON.stringify(t)!==JSON.stringify(o.options)&&m("error","".concat(o.name," Firebase App already initialized with different options").concat(e.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(u){}return new f(o)}var m=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)},y={provide:f,useFactory:g,deps:[p,i.R0b,[new i.FiY,v]]},k=function(){var e=function(){function e(t){d(this,e),a.Z.registerVersion("angularfire",o.q4.full,"core"),a.Z.registerVersion("angularfire",o.q4.full,"app-compat"),a.Z.registerVersion("angular",i.q4F.full,t.toString())}return h(e,null,[{key:"initializeApp",value:function(t,n){return{ngModule:e,providers:[{provide:p,useValue:t},{provide:v,useValue:n}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.Lbi))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[y]}),e}();function w(e,t,n,i,a){var o=r(globalThis.\u0275AngularfireInstanceCache.find(function(t){return t[0]===e})||[],3),u=o[1],s=o[2];if(u)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(a,s)||(_("error","".concat(t," was already initialized on the ").concat(n," Firebase App with different settings.").concat(b?" You may need to reload as Firebase is not HMR aware.":"")),_("warn",{is:a,was:s})),u;var c=i();return globalThis.\u0275AngularfireInstanceCache.push([e,c,a]),c}var b=!!e.hot,_=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8934:function(e,t,n){"use strict";n.d(t,{q4:function(){return yn},iC:function(){return Rn},HU:function(){return In},vb:function(){return wn},JM:function(){return kn},u3:function(){return An}});var i=n(7368),a=n(1858),s=n(6304),c=n(7964),l=n(5725),f=n(1947),p=n(8678),v=n(2087),g=new l.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function m(e){return e instanceof l.ZR&&e.code.includes("request-failed")}function y(e){var t=e.projectId;return"https://firebaseinstallations.googleapis.com/v1/projects/".concat(t,"/installations")}function k(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function w(e,t){return b.apply(this,arguments)}function b(){return(b=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent.error,e.abrupt("return",g.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function x(e,t){var n=t.refreshToken,r=_(e);return r.append("Authorization",function(e){return"FIS_v2 ".concat(e)}(n)),r}function I(e){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.abrupt("return",n.status>=500&&n.status<600?t():n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(e,t){return S.apply(this,arguments)}function S(){return(S=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fid,i=y(t),a={method:"POST",headers:_(t),body:JSON.stringify({fid:r,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.5.4"})},e.next=5,I(function(){return fetch(i,a)});case 5:if(!(o=e.sent).ok){e.next=11;break}return e.next=9,o.json();case 9:return u=e.sent,e.abrupt("return",{fid:u.fid||r,registrationStatus:2,refreshToken:u.refreshToken,authToken:k(u.authToken)});case 11:return e.next=13,w("Create Installation",o);case 13:throw e.sent;case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e){return new Promise(function(t){setTimeout(t,e)})}var C=/^[cdef][\w-]{21}$/;function A(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,u(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return C.test(t)?t:""}catch(n){return""}}function N(e){return"".concat(e.appName,"!").concat(e.appId)}var O=new Map;function D(e,t){var n=N(e);P(n,t),function(e,t){var n=(!L&&"BroadcastChannel"in self&&((L=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){P(e.data.key,e.data.fid)}),L);n&&n.postMessage({key:e,fid:t}),0===O.size&&L&&(L.close(),L=null)}(n,t)}function P(e,t){var n=O.get(e);if(n){var r,i=o(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var L=null,M="firebase-installations-store",F=null;function U(){return F||(F=(0,v.openDb)("firebase-installations-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore(M)}})),F}function V(e,t){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),e.next=3,U();case 3:return i=e.sent.transaction(M,"readwrite"),a=i.objectStore(M),e.next=7,a.get(r);case 7:return o=e.sent,e.next=10,a.put(n,r);case 10:return e.next=12,i.complete;case 12:return o&&o.fid===n.fid||D(t,n.fid),e.abrupt("return",n);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e){return B.apply(this,arguments)}function B(){return(B=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(t),e.next=3,U();case 3:return r=e.sent.transaction(M,"readwrite"),e.next=6,r.objectStore(M).delete(n);case 6:return e.next=8,r.complete;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Z(e,t){return z.apply(this,arguments)}function z(){return(z=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),e.next=3,U();case 3:return i=e.sent.transaction(M,"readwrite"),a=i.objectStore(M),e.next=7,a.get(r);case 7:if(o=e.sent,void 0!==(u=n(o))){e.next=14;break}return e.next=12,a.delete(r);case 12:e.next=16;break;case 14:return e.next=16,a.put(u,r);case 16:return e.next=18,i.complete;case 18:return!u||o&&o.fid===u.fid||D(t,u.fid),e.abrupt("return",u);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e){return G.apply(this,arguments)}function G(){return(G=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t,function(e){var r=K(e),i=W(t,r);return n=i.registrationPromise,i.installationEntry});case 2:if(""!==(r=e.sent).fid){e.next=10;break}return e.next=6,n;case 6:e.t1=e.sent,e.t0={installationEntry:e.t1},e.next=11;break;case 10:e.t0={installationEntry:r,registrationPromise:n};case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(e){return X(e||{fid:A(),registrationStatus:0})}function W(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(g.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return Q.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Y(e)}:{installationEntry:t}}function Q(){return(Q=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=V,e.t1=t,e.next=5,E(t,n);case 5:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 9:if(e.prev=9,e.t3=e.catch(0),!m(e.t3)||409!==e.t3.customData.serverCode){e.next=16;break}return e.next=14,q(t);case 14:e.next=18;break;case 16:return e.next=18,V(t,{fid:n.fid,registrationStatus:0});case 18:throw e.t3;case 19:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}function Y(e){return J.apply(this,arguments)}function J(){return(J=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,R(100);case 6:return e.next=8,$(t);case 8:n=e.sent;case 9:e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=18;break}return e.next=14,H(t);case 14:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",a||i);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $(e){return Z(e,function(e){if(!e)throw g.create("installation-not-found");return X(e)})}function X(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appConfig,i=t.platformLoggerProvider,a=ne(r,n),o=x(r,n),(u=i.getImmediate({optional:!0}))&&o.append("x-firebase-client",u.getPlatformInfoString()),s={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:"w:0.5.4"}})},e.next=6,I(function(){return fetch(a,s)});case 6:if(!(c=e.sent).ok){e.next=13;break}return e.t0=k,e.next=11,c.json();case 11:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:return e.next=15,w("Generate Auth Token",c);case 15:throw e.sent;case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ne(e,t){var n=t.fid;return"".concat(y(e),"/").concat(n,"/authTokens:generate")}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],e.next=3,Z(t.appConfig,function(e){if(!le(e))throw g.create("not-registered");var i=e.authToken;if(!n&&fe(i))return e;if(1===i.requestStatus)return r=ae(t,n),e;if(!navigator.onLine)throw g.create("app-offline");var a=he(e);return r=se(t,a),a});case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t){return oe.apply(this,arguments)}function oe(){return(oe=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,R(100);case 6:return e.next=8,ue(t.appConfig);case 8:r=e.sent;case 9:e.next=3;break;case 11:return i=r.authToken,e.abrupt("return",0===i.requestStatus?re(t,n):i);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(e){return Z(e,function(e){if(!le(e))throw g.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function se(e,t){return ce.apply(this,arguments)}function ce(){return(ce=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,V(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),m(e.t0)&&(401===e.t0.customData.serverCode||404===e.t0.customData.serverCode)){e.next=18;break}return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=16,V(t.appConfig,a);case 16:e.next=20;break;case 18:return e.next=20,q(t.appConfig);case 20:throw e.t0;case 21:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function le(e){return void 0!==e&&2===e.registrationStatus}function fe(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function he(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function de(){return(de=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,H(n.appConfig);case 3:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",(a?a.catch(console.error):re(n).catch(console.error),i.fid));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(){return(pe=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=t,e.next=4,ve(r.appConfig);case 4:return e.next=6,re(r,n);case 6:return e.abrupt("return",e.sent.token);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e){return ge.apply(this,arguments)}function ge(){return(ge=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:if(n=e.sent,r=n.registrationPromise,e.t0=r,!e.t0){e.next=8;break}return e.next=8,r;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e){return g.create("missing-app-config-values",{valueName:e})}(0,c._registerComponent)(new f.wA("installations",function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw me("App Configuration");if(!e.name)throw me("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw me(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:(0,c._getProvider)(t,"platform-logger"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),(0,c._registerComponent)(new f.wA("installations-internal",function(e){var t=e.getProvider("app").getImmediate(),n=(0,c._getProvider)(t,"installations").getImmediate();return{getId:function(){return function(e){return de.apply(this,arguments)}(n)},getToken:function(e){return function(e){return pe.apply(this,arguments)}(n,e)}}},"PRIVATE")),(0,c.registerVersion)("@firebase/installations","0.5.4"),(0,c.registerVersion)("@firebase/installations","0.5.4","esm2017");var ye=new l.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"}),ke=function(){function e(t,n,r,i){d(this,e),this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return h(e,[{key:"isCachedDataFresh",value:function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: ".concat(n,". Cache max age millis (minimumFetchIntervalMillis setting): ").concat(e,". Is cache hit: ").concat(r,".")),r}},{key:"fetch",value:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark(function n(){var i,a,o,u,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);case 2:if(i=n.sent,a=r(i,2),o=a[0],!(u=a[1])||!t.isCachedDataFresh(e.cacheMaxAgeMillis,o)){n.next=8;break}return n.abrupt("return",u);case 8:return e.eTag=u&&u.eTag,n.next=11,t.client.fetch(e);case 11:return s=n.sent,c=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===s.status&&c.push(t.storage.setLastSuccessfulFetchResponse(s)),n.next=16,Promise.all(c);case 16:return n.abrupt("return",s);case 17:case"end":return n.stop()}},n)}))()}}]),e}();function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}var be=function(){function e(t,n,r,i,a,o){d(this,e),this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=o}return h(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark(function n(){var i,a,o,u,s,c,l,f,h,d,p,v,g,m,y,k,w;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]);case 2:return i=n.sent,a=r(i,2),o=a[0],u=a[1],s="".concat(window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com","/v1/projects/").concat(t.projectId,"/namespaces/").concat(t.namespace,":fetch?key=").concat(t.apiKey),c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:t.sdkVersion,app_instance_id:o,app_instance_id_token:u,app_id:t.appId,language_code:we()},f={method:"POST",headers:c,body:JSON.stringify(l)},h=fetch(s,f),d=new Promise(function(t,n){e.signal.addEventListener(function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)})}),n.prev=12,n.next=15,Promise.race([h,d]);case 15:return n.next=17,h;case 17:p=n.sent,n.next=24;break;case 20:throw n.prev=20,n.t0=n.catch(12),v="fetch-client-network","AbortError"===n.t0.name&&(v="fetch-timeout"),ye.create(v,{originalErrorMessage:n.t0.message});case 24:if(g=p.status,m=p.headers.get("ETag")||void 0,200!==p.status){n.next=37;break}return n.prev=27,n.next=30,p.json();case 30:w=n.sent,n.next=36;break;case 33:throw n.prev=33,n.t1=n.catch(27),ye.create("fetch-client-parse",{originalErrorMessage:n.t1.message});case 36:y=w.entries,k=w.state;case 37:if("INSTANCE_STATE_UNSPECIFIED"===k?g=500:"NO_CHANGE"===k?g=304:"NO_TEMPLATE"!==k&&"EMPTY_CONFIG"!==k||(y={}),304===g||200===g){n.next=39;break}throw ye.create("fetch-status",{httpStatus:g});case 39:return n.abrupt("return",{status:g,eTag:m,config:y});case 40:case"end":return n.stop()}},n,null,[[12,20],[27,33]])}))()})}]),e}(),_e=function(){function e(t,n){d(this,e),this.client=t,this.storage=n}return h(e,[{key:"fetch",value:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.getThrottleMetadata();case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return r=n.t0,n.abrupt("return",t.attemptFetch(e,r));case 7:case"end":return n.stop()}},n)}))()}},{key:"attemptFetch",value:function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount,i=this;return(0,s.Z)(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(ye.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,n);case 2:return t.prev=2,t.next=5,i.client.fetch(e);case 5:return a=t.sent,t.next=8,i.storage.deleteThrottleMetadata();case 8:return t.abrupt("return",a);case 11:if(t.prev=11,t.t0=t.catch(2),function(e){if(!(e instanceof l.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t.t0)){t.next=15;break}throw t.t0;case 15:return o={throttleEndTimeMillis:Date.now()+(0,l.$s)(r),backoffCount:r+1},t.next=18,i.storage.setThrottleMetadata(o);case 18:return t.abrupt("return",i.attemptFetch(e,o));case 19:case"end":return t.stop()}},t,null,[[2,11]])}))()}}]),e}(),xe=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return h(e,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),e}();function Ie(e,t){var n=e.target.error||void 0;return ye.create(t,{originalErrorMessage:n&&n.message})}var Te=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise(function(e,t){try{var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(Ie(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}catch(r){t(ye.create("storage-open",{originalErrorMessage:r}))}});d(this,e),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return h(e,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(e){return this.set("last_fetch_status",e)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.set("last_successful_fetch_timestamp_millis",e)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(e){return this.set("last_successful_fetch_response",e)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(e){return this.set("active_config",e)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(e){return this.set("active_config_etag",e)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(e){return this.set("throttle_metadata",e)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{var u=a.get(o);u.onerror=function(e){i(Ie(e,"storage-get"))},u.onsuccess=function(e){var t=e.target.result;n(t?t.value:void 0)}}catch(s){i(ye.create("storage-get",{originalErrorMessage:s&&s.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){var n=this;return(0,s.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.openDbPromise;case 2:return i=r.sent,r.abrupt("return",new Promise(function(r,a){var o=i.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),u=n.createCompositeKey(e);try{var s=o.put({compositeKey:u,value:t});s.onerror=function(e){a(Ie(e,"storage-set"))},s.onsuccess=function(){r()}}catch(c){a(ye.create("storage-set",{originalErrorMessage:c&&c.message}))}}));case 4:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{var u=a.delete(o);u.onerror=function(e){i(Ie(e,"storage-delete"))},u.onsuccess=function(){n()}}catch(s){i(ye.create("storage-delete",{originalErrorMessage:s&&s.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"createCompositeKey",value:function(e){return[this.appId,this.appName,this.namespace,e].join()}}]),e}(),Ee=function(){function e(t){d(this,e),this.storage=t}return h(e,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),t.next=5,n;case 5:return(a=t.sent)&&(e.lastFetchStatus=a),t.next=9,r;case 9:return(o=t.sent)&&(e.lastSuccessfulFetchTimestampMillis=o),t.next=13,i;case 13:(u=t.sent)&&(e.activeConfig=u);case 15:case"end":return t.stop()}},t)}))()}},{key:"setLastFetchStatus",value:function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}},{key:"setActiveConfig",value:function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}]),e}();function Se(){return(Se=(0,s.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.hl)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,l.eu)();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}(0,c._registerComponent)(new f.wA("remote-config",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ye.create("registration-window");if(!(0,l.hl)())throw ye.create("indexed-db-unavailable");var a=r.options,o=a.projectId,u=a.apiKey,s=a.appId;if(!o)throw ye.create("registration-project-id");if(!u)throw ye.create("registration-api-key");if(!s)throw ye.create("registration-app-id");var f=new Te(s,r.name,n=n||"firebase"),h=new Ee(f),d=new p.Yd("@firebase/remote-config");d.logLevel=p.in.ERROR;var v,g,m=new be(i,c.SDK_VERSION,n,o,u,s),y=new _e(m,f),k=new ke(y,f,h,d),w=new xe(r,k,h,f,d);return v=w,(g=(0,l.m9)(v))._initializePromise||(g._initializePromise=g._storageCache.loadFromStorage().then(function(){g._isInitializationComplete=!0})),w},"PUBLIC").setMultipleInstances(!0)),(0,c.registerVersion)("@firebase/remote-config","0.3.3"),(0,c.registerVersion)("@firebase/remote-config","0.3.3","esm2017");var Re,Ce,Ae="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function Ne(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,u(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oe(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Re||(Re={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Ce||(Ce={}));var De="fcm_token_details_db";function Pe(e){return Le.apply(this,arguments)}function Le(){return(Le=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="databases"in indexedDB,!e.t0){e.next=5;break}return e.next=4,indexedDB.databases();case 4:e.t0=!e.sent.map(function(e){return e.name}).includes(De);case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",null);case 7:return n=null,e.next=10,(0,v.openDb)(De,5,function(){var e=(0,s.Z)(regeneratorRuntime.mark(function e(r){var i,a,o,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.oldVersion<2)){e.next=2;break}return e.abrupt("return");case 2:if(r.objectStoreNames.contains("fcm_token_object_Store")){e.next=4;break}return e.abrupt("return");case 4:return a=r.transaction.objectStore("fcm_token_object_Store"),e.next=7,a.index("fcmSenderId").get(t);case 7:return o=e.sent,e.next=10,a.clear();case 10:if(!o){e.next=19;break}if(2!==r.oldVersion){e.next=18;break}if((u=o).auth&&u.p256dh&&u.endpoint){e.next=15;break}return e.abrupt("return");case 15:n={token:u.fcmToken,createTime:null!==(i=u.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:"string"==typeof u.vapidKey?u.vapidKey:Ne(u.vapidKey)}},e.next=19;break;case 18:3===r.oldVersion?n={token:(s=o).fcmToken,createTime:s.createTime,subscriptionOptions:{auth:Ne(s.auth),p256dh:Ne(s.p256dh),endpoint:s.endpoint,swScope:s.swScope,vapidKey:Ne(s.vapidKey)}}:4===r.oldVersion&&(n={token:(c=o).fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Ne(c.auth),p256dh:Ne(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Ne(c.vapidKey)}});case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:return e.sent.close(),e.next=13,(0,v.deleteDb)(De);case 13:return e.next=15,(0,v.deleteDb)("fcm_vapid_details_db");case 15:return e.next=17,(0,v.deleteDb)("undefined");case 17:return e.abrupt("return",Me(n)?n:null);case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Me(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var Fe=null;function Ue(){return Fe||(Fe=(0,v.openDb)("firebase-messaging-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore("firebase-messaging-store")}})),Fe}function Ve(e){return je.apply(this,arguments)}function je(){return(je=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=He(t),e.next=3,Ue();case 3:return r=e.sent,e.next=6,r.transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(n);case 6:if(!(i=e.sent)){e.next=9;break}return e.abrupt("return",i);case 9:return e.next=11,Pe(t.appConfig.senderId);case 11:if(!(a=e.sent)){e.next=16;break}return e.next=15,qe(t,a);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qe(e,t){return Be.apply(this,arguments)}function Be(){return(Be=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=He(t),e.next=3,Ue();case 3:return i=e.sent.transaction("firebase-messaging-store","readwrite"),e.next=6,i.objectStore("firebase-messaging-store").put(n,r);case 6:return e.next=8,i.complete;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ze(e){return ze.apply(this,arguments)}function ze(){return(ze=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=He(t),e.next=3,Ue();case 3:return r=e.sent.transaction("firebase-messaging-store","readwrite"),e.next=6,r.objectStore("firebase-messaging-store").delete(n);case 6:return e.next=8,r.complete;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function He(e){return e.appConfig.appId}var Ge=new l.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ke(e,t){return We.apply(this,arguments)}function We(){return(We=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(t);case 2:return r=e.sent,i=nt(n),a={method:"POST",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch(Xe(t.appConfig),a);case 8:return u=e.sent,e.next=11,u.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),Ge.create("token-subscribe-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=19;break}throw Ge.create("token-subscribe-failed",{errorInfo:o.error.message});case 19:if(o.token){e.next=21;break}throw Ge.create("token-subscribe-no-token");case 21:return e.abrupt("return",o.token);case 22:case"end":return e.stop()}},e,null,[[5,14]])}))).apply(this,arguments)}function Qe(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(t);case 2:return r=e.sent,i=nt(n.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch("".concat(Xe(t.appConfig),"/").concat(n.token),a);case 8:return u=e.sent,e.next=11,u.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),Ge.create("token-update-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=19;break}throw Ge.create("token-update-failed",{errorInfo:o.error.message});case 19:if(o.token){e.next=21;break}throw Ge.create("token-update-no-token");case 21:return e.abrupt("return",o.token);case 22:case"end":return e.stop()}},e,null,[[5,14]])}))).apply(this,arguments)}function Je(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(t);case 2:return e.t0=e.sent,r={method:"DELETE",headers:e.t0},e.prev=4,e.next=7,fetch("".concat(Xe(t.appConfig),"/").concat(n),r);case 7:return i=e.sent,e.next=10,i.json();case 10:if(!(a=e.sent).error){e.next=13;break}throw Ge.create("token-unsubscribe-failed",{errorInfo:a.error.message});case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(4),Ge.create("token-unsubscribe-failed",{errorInfo:e.t1});case 18:case"end":return e.stop()}},e,null,[[4,15]])}))).apply(this,arguments)}function Xe(e){var t=e.projectId;return"https://fcmregistrations.googleapis.com/v1/projects/".concat(t,"/registrations")}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return i=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(i)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nt(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,a={web:{endpoint:r,auth:n,p256dh:t}};return i!==Ae&&(a.web.applicationPubKey=i),a}function rt(e){return it.apply(this,arguments)}function it(){return(it=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:Ne(n.getKey("auth")),p256dh:Ne(n.getKey("p256dh"))},e.next=6,Ve(t.firebaseDependencies);case 6:if(!(i=e.sent)){e.next=19;break}if(!dt(i.subscriptionOptions,r)){e.next=10;break}return e.abrupt("return",Date.now()>=i.createTime+6048e5?ut(t,{token:i.token,createTime:Date.now(),subscriptionOptions:r}):i.token);case 10:return e.prev=10,e.next=13,Je(t.firebaseDependencies,i.token);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.warn(e.t0);case 18:case 19:return e.abrupt("return",ct(t.firebaseDependencies,r));case 20:case"end":return e.stop()}},e,null,[[10,15]])}))).apply(this,arguments)}function at(e){return ot.apply(this,arguments)}function ot(){return(ot=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(t.firebaseDependencies);case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=9;break}return e.next=7,Je(t.firebaseDependencies,n.token);case 7:return e.next=9,Ze(t.firebaseDependencies);case 9:return e.next=11,t.swRegistration.pushManager.getSubscription();case 11:return r=e.sent,e.abrupt("return",!r||r.unsubscribe());case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ut(e,t){return st.apply(this,arguments)}function st(){return(st=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe(t.firebaseDependencies,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,qe(t.firebaseDependencies,i);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,at(t);case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function ct(e,t){return lt.apply(this,arguments)}function lt(){return(lt=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke(t,n);case 2:return e.t0=e.sent,e.t1=Date.now(),e.t2=n,r={token:e.t0,createTime:e.t1,subscriptionOptions:e.t2},e.next=8,qe(t,r);case 8:return e.abrupt("return",r.token);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ft(e,t){return ht.apply(this,arguments)}function ht(){return(ht=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oe(n)});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dt(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function pt(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}function vt(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function gt(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function mt(e){return Ge.create("missing-app-config-values",{valueName:e})}gt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var yt=function(){function e(t,n,r){d(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw mt("App Configuration Object");if(!e.name)throw mt("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var i=r[n];if(!t[i])throw mt(i)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}return h(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();function kt(e){return wt.apply(this,arguments)}function wt(){return(wt=(0,s.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"});case 3:t.swRegistration=e.sent,t.swRegistration.update().catch(function(){}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),Ge.create("failed-service-worker-registration",{browserErrorMessage:e.t0.message});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function bt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n||t.swRegistration,e.t0){e.next=4;break}return e.next=4,kt(t);case 4:if(!n&&t.swRegistration){e.next=8;break}if(n instanceof ServiceWorkerRegistration){e.next=7;break}throw Ge.create("invalid-sw-registration");case 7:t.swRegistration=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xt(e,t){return It.apply(this,arguments)}function It(){return(It=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n?t.vapidKey=n:t.vapidKey||(t.vapidKey=Ae);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(){return(Tt=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw Ge.create("only-available-in-window");case 2:if(e.t0="default"===Notification.permission,!e.t0){e.next=6;break}return e.next=6,Notification.requestPermission();case 6:if("granted"===Notification.permission){e.next=8;break}throw Ge.create("permission-blocked");case 8:return e.next=10,xt(t,null==n?void 0:n.vapidKey);case 10:return e.next=12,bt(t,null==n?void 0:n.serviceWorkerRegistration);case 12:return e.abrupt("return",rt(t));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Et(e,t,n){return St.apply(this,arguments)}function St(){return(St=(0,s.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rt(n),e.next=3,t.firebaseDependencies.analyticsProvider.get();case 3:e.sent.logEvent(i,{message_id:r["google.c.a.c_id"],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rt(e){switch(e){case Ce.NOTIFICATION_CLICKED:return"notification_open";case Ce.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ct(){return(Ct=(0,s.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.data).isFirebaseMessaging){e.next=3;break}return e.abrupt("return");case 3:if(t.onMessageHandler&&r.messageType===Ce.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(pt(r)):t.onMessageHandler.next(pt(r))),i=r.data,e.t0=vt(i)&&"1"===i["google.c.a.e"],!e.t0){e.next=9;break}return e.next=9,Et(t,r.messageType,i);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(){return(At=(0,s.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t7="undefined"!=typeof window&&(0,l.hl)(),!e.t7){e.next=5;break}return e.next=4,(0,l.eu)();case 4:e.t7=e.sent;case 5:if(e.t6=e.t7,!e.t6){e.next=8;break}e.t6=(0,l.zI)();case 8:if(e.t5=e.t6,!e.t5){e.next=11;break}e.t5="serviceWorker"in navigator;case 11:if(e.t4=e.t5,!e.t4){e.next=14;break}e.t4="PushManager"in window;case 14:if(e.t3=e.t4,!e.t3){e.next=17;break}e.t3="Notification"in window;case 17:if(e.t2=e.t3,!e.t2){e.next=20;break}e.t2="fetch"in window;case 20:if(e.t1=e.t2,!e.t1){e.next=23;break}e.t1=ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification");case 23:if(e.t0=e.t1,!e.t0){e.next=26;break}e.t0=PushSubscription.prototype.hasOwnProperty("getKey");case 26:return e.abrupt("return",e.t0);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}(0,c._registerComponent)(new f.wA("messaging",function(e){var t=new yt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",function(e){return function(e,t){return Ct.apply(this,arguments)}(t,e)}),t},"PUBLIC")),(0,c._registerComponent)(new f.wA("messaging-internal",function(e){var t=e.getProvider("messaging").getImmediate();return{getToken:function(e){return function(e,t){return Tt.apply(this,arguments)}(t,e)}}},"PRIVATE")),(0,c.registerVersion)("@firebase/messaging","0.9.4"),(0,c.registerVersion)("@firebase/messaging","0.9.4","esm2017");var Nt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ot="https://www.googletagmanager.com/gtag/js",Dt=new p.Yd("@firebase/analytics");function Pt(e){return Promise.all(e.map(function(e){return e.catch(function(e){return e})}))}function Lt(e,t){var n=document.createElement("script");n.src="".concat(Ot,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function Mt(e,t,n,r,i,a){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,s.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a,o){var u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,Pt(r);case 9:if(s=e.sent.find(function(e){return e.measurementId===a}),e.t0=s,!e.t0){e.next=14;break}return e.next=14,n[s.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),Dt.error(e.t1);case 19:t("config",a,o);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function Ut(e,t,n,r,i){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,s.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var u,s,c,l,f,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u=[],!a||!a.send_to){e.next=26;break}return s=a.send_to,Array.isArray(s)||(s=[s]),e.next=7,Pt(r);case 7:c=e.sent,l=o(s),e.prev=9,h=function(){var e=f.value,t=c.find(function(t){return t.measurementId===e}),r=t&&n[t.appId];if(!r)return u=[],"break";u.push(r)},l.s();case 12:if((f=l.n()).done){e.next=18;break}if("break"!==h()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),l.e(e.t0);case 23:return e.prev=23,l.f(),e.finish(23);case 26:return 0===u.length&&(u=Object.values(n)),e.next=29,Promise.all(u);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),Dt.error(e.t1);case 35:case"end":return e.stop()}},e,null,[[0,32],[9,20,23,26]])}))).apply(this,arguments)}function jt(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Ot))return r}return null}var qt=new l.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Bt=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;d(this,e),this.throttleMetadata=t,this.intervalMillis=n}return h(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}());function Zt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function zt(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:Zt(i)},o=Nt.replace("{app-id}",r),e.next=6,fetch(o,a);case 6:if(200===(u=e.sent).status||304===u.status){e.next=19;break}return s="",e.prev=9,e.next=12,u.json();case 12:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:throw qt.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 19:return e.abrupt("return",u.json());case 20:case"end":return e.stop()}},e,null,[[9,16]])}))).apply(this,arguments)}function Gt(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,s.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,c,l,f=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:Bt,r=f.length>2?f[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,u=i.measurementId,a){e.next=5;break}throw qt.create("no-app-id");case 5:if(o){e.next=9;break}if(!u){e.next=8;break}return e.abrupt("return",{measurementId:u,appId:a});case 8:throw qt.create("no-api-key");case 9:return c=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new $t,e.abrupt("return",(setTimeout((0,s.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}},e)})),void 0!==r?r:6e4),Wt({appId:a,apiKey:o,measurementId:u},c,l,n)));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wt(e,t,n){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,s.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s,c,f,h,d=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=d.length>3&&void 0!==d[3]?d[3]:Bt,u=t.appId,s=t.measurementId,e.prev=3,e.next=6,Yt(r,i);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(3),!s){e.next=12;break}return e.abrupt("return",(Dt.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(s,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t0.message,"]")),{appId:u,measurementId:s}));case 12:throw e.t0;case 13:return e.prev=13,e.next=16,zt(t);case 16:return c=e.sent,e.abrupt("return",(o.deleteThrottleMetadata(u),c));case 20:if(e.prev=20,e.t1=e.catch(13),Jt(e.t1)){e.next=26;break}if(o.deleteThrottleMetadata(u),!s){e.next=25;break}return e.abrupt("return",(Dt.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(s,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t1.message,"]")),{appId:u,measurementId:s}));case 25:throw e.t1;case 26:return f=503===Number(e.t1.customData.httpStatus)?(0,l.$s)(a,o.intervalMillis,30):(0,l.$s)(a,o.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:a+1},e.abrupt("return",(o.setThrottleMetadata(u,h),Dt.debug("Calling attemptFetch again in ".concat(f," millis")),Wt(t,h,r,o)));case 28:case"end":return e.stop()}},e,null,[[3,8],[13,20]])}))).apply(this,arguments)}function Yt(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(qt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Jt(e){if(!(e instanceof l.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var $t=function(){function e(){d(this,e),this.listeners=[]}return h(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach(function(e){return e()})}}]),e}();function Xt(){return en.apply(this,arguments)}function en(){return(en=(0,s.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.hl)()){e.next=2;break}return e.abrupt("return",(Dt.warn(qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1));case 2:return e.prev=2,e.next=5,(0,l.eu)();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",(Dt.warn(qt.create("indexeddb-unavailable",{errorInfo:e.t0}).message),!1));case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,null,[[2,7]])}))).apply(this,arguments)}function tn(){return(tn=(0,s.Z)(regeneratorRuntime.mark(function e(t,n,i,a,o,u,s){var c,l,f,h,d,p,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(l=Gt(t)).then(function(e){i[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Dt.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,") does not match the measurement ID fetched from the server (").concat(e.measurementId,"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config."))}).catch(function(e){return Dt.error(e)}),n.push(l),f=Xt().then(function(e){return e?a.getId():void 0}),e.next=5,Promise.all([l,f]);case 5:return h=e.sent,d=r(h,2),p=d[0],v=d[1],jt()||Lt(u,p.measurementId),o("js",new Date),g=null!==(c=null==s?void 0:s.config)&&void 0!==c?c:{},e.abrupt("return",(g.origin="firebase",g.update=!0,null!=v&&(g.firebase_id=v),o("config",p.measurementId,g),p.measurementId));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var nn,rn,an=function(){function e(t){d(this,e),this.app=t}return h(e,[{key:"_delete",value:function(){return delete on[this.app.options.appId],Promise.resolve()}}]),e}(),on={},un=[],sn={},cn=!1;function ln(){return(ln=(0,s.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=4;break}t("event",r,i),e.next=8;break;case 4:return e.next=6,n;case 6:o=e.sent,t("event",r,Object.assign(Object.assign({},i),{send_to:o}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fn(){return(fn=(0,s.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,l.ru)()){e.next=2;break}return e.abrupt("return",!1);case 2:if((0,l.zI)()){e.next=4;break}return e.abrupt("return",!1);case 4:if((0,l.hl)()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,(0,l.eu)();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(6),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[6,12]])}))).apply(this,arguments)}(0,c._registerComponent)(new f.wA("analytics",function(e,t){var n=t.options;return function(e,t,n){!function(){var e=[];if((0,l.ru)()&&e.push("This is a browser extension environment."),(0,l.zI)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(e,t){return"(".concat(t+1,") ").concat(e)}).join(" "),n=qt.create("invalid-analytics-context",{errorInfo:t});Dt.warn(n.message)}}();var r,i=e.options.appId;if(!i)throw qt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw qt.create("no-api-key");Dt.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '.concat(e.options.measurementId,' provided in the "measurementId" field in the local Firebase config.'))}if(null!=on[i])throw qt.create("already-exists",{id:i});if(!cn){r=[],Array.isArray(window.dataLayer)?r=window.dataLayer:window.dataLayer=r;var a=function(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(a=window.gtag),window.gtag=function(e,t,n,r){function i(){return(i=(0,s.Z)(regeneratorRuntime.mark(function i(a,o,u){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,Ut(e,t,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,Mt(e,t,n,r,o,u);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),Dt.error(i.t0);case 17:case"end":return i.stop()}},i,null,[[0,14]])}))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window.gtag}}(on,un,sn),o=a.wrappedGtag,u=a.gtagCore;rn=o,nn=u,cn=!0}return on[i]=function(e,t,n,r,i,a,o){return tn.apply(this,arguments)}(e,un,sn,t,nn,"dataLayer",n),new an(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,c._registerComponent)(new f.wA("analytics-internal",function(e){try{var t=e.getProvider("analytics").getImmediate();return{logEvent:function(e,n,r){return function(e,t,n,r){e=(0,l.m9)(e),function(e,t,n,r,i){return ln.apply(this,arguments)}(rn,on[e.app.options.appId],t,n,r).catch(function(e){return Dt.error(e)})}(t,e,n,r)}}}catch(n){throw qt.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),(0,c.registerVersion)("@firebase/analytics","0.7.4"),(0,c.registerVersion)("@firebase/analytics","0.7.4","esm2017");var hn=n(8489),dn=n(8569),pn=n(8318),vn=n(6599),gn=n(2893),mn=n(9098),yn=new i.GfV("7.2.0");function kn(e,t,n){if(t){if(1===t.length)return t[0];var r=t.filter(function(e){return e.app===n});if(1===r.length)return r[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis.__angularfire_symbol__analyticsIsSupported||(globalThis.__angularfire_symbol__analyticsIsSupported=function(){return fn.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__analyticsIsSupportedValue=e})),globalThis.__angularfire_symbol__messagingIsSupported||(globalThis.__angularfire_symbol__messagingIsSupported=function(){return At.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__messagingIsSupportedValue=e})),globalThis.__angularfire_symbol__remoteConfigIsSupported||(globalThis.__angularfire_symbol__remoteConfigIsSupported=function(){return Se.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e}));var wn=function(e,t){var n=t?[t]:(0,a.C6)(),r=[];return n.forEach(function(t){t.container.getProvider(e).instances.forEach(function(e){r.includes(e)||r.push(e)})}),r};function bn(){}var _n=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn.N;d(this,e),this.zone=t,this.delegate=n}return h(e,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(e,t,n){var r=this.zone;return this.delegate.schedule(function(t){var n=this;r.runGuarded(function(){e.apply(n,[t])})},t,n)}}]),e}(),xn=function(){function e(t){d(this,e),this.zone=t,this.task=null}return h(e,[{key:"call",value:function(e,t){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",bn,{},bn,bn)}),t.pipe((0,vn.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}},{key:"unscheduleTask",value:function(){var e=this;setTimeout(function(){null!=e.task&&"scheduled"===e.task.state&&(e.task.invoke(),e.task=null)},10)}}]),e}(),In=function(){var e=function e(t){d(this,e),this.ngZone=t,this.outsideAngular=t.runOutsideAngular(function(){return new _n(Zone.current)}),this.insideAngular=t.run(function(){return new _n(Zone.current,dn.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)};return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Tn(){var e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function En(e){return Tn().ngZone.runOutsideAngular(function(){return e()})}function Sn(e){return Tn().ngZone.run(function(){return e()})}function Rn(e){return Tn(),(t=Tn(),function(e){return(e=e.lift(new xn(t.ngZone))).pipe((0,gn.R)(t.outsideAngular),(0,mn.QV)(t.insideAngular))})(e);var t}var Cn=function(e,t){return function(){var n=arguments;return t&&setTimeout(function(){"scheduled"===t.state&&t.invoke()},10),Sn(function(){return e.apply(void 0,n)})}},An=function(e,t){return function(){for(var n,r=arguments,i=this,a=0;a<arguments.length;a++)"function"==typeof arguments[a]&&(t&&(n||(n=Sn(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",bn,{},bn,bn)}))),arguments[a]=Cn(arguments[a],n));var o=En(function(){return e.apply(i,r)});if(!t){if(o instanceof pn.y){var u=Tn();return o.pipe((0,gn.R)(u.outsideAngular),(0,mn.QV)(u.insideAngular))}return Sn(function(){return o})}return o instanceof pn.y?o.pipe(Rn):o instanceof Promise?Sn(function(){return new Promise(function(e,t){return o.then(function(t){return Sn(function(){return e(t)})},function(e){return Sn(function(){return t(e)})})})}):"function"==typeof o&&n?function(){return setTimeout(function(){n&&"scheduled"===n.state&&n.invoke()},10),o.apply(this,arguments)}:Sn(function(){return o})}}},6986:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(5725),i=n(1947),a=n(7964),o=n(8678),u=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,(0,a._addComponent)(t,new i.wA("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),(0,a.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){(0,a._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){(0,a._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),s=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=a.initializeApp(i,o);if((0,r.r3)(t,u.name))return t[u.name];var s=new e(u,n);return t[u.name]=s,s},app:i,registerVersion:a.registerVersion,setLogLevel:a.setLogLevel,onLog:a.onLog,apps:null,SDK_VERSION:a.SDK_VERSION,INTERNAL:{registerComponent:function(t){var o=t.name,u=o.replace("-compat","");if(a._registerComponent(t)&&"PUBLIC"===t.type){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[u])throw s.create("invalid-app-argument",{appName:o});return e[u]()};void 0!==t.serviceProps&&(0,r.ZB)(c,t.serviceProps),n[u]=c,e.prototype[u]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._getService.bind(this,o).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[u]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:a}};function i(e){if(!(0,r.r3)(t,e=e||a._DEFAULT_ENTRY_NAME))throw s.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,n}(u);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var f=self.firebase.SDK_VERSION;f&&f.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var p=c;(0,a.registerVersion)("@firebase/app-compat","0.1.9",void 0)},7964:function(t,n,r){"use strict";var i;r.r(n),r.d(n,{FirebaseError:function(){return c.ZR},SDK_VERSION:function(){return S},_DEFAULT_ENTRY_NAME:function(){return v},_addComponent:function(){return k},_addOrOverwriteComponent:function(){return w},_apps:function(){return m},_clearComponents:function(){return I},_components:function(){return y},_getProvider:function(){return _},_registerComponent:function(){return b},_removeServiceInstance:function(){return x},deleteApp:function(){return N},getApp:function(){return C},getApps:function(){return A},initializeApp:function(){return R},onLog:function(){return P},registerVersion:function(){return D},setLogLevel:function(){return L}});var a=r(6304),u=r(1947),s=r(8678),c=r(5725),l=function(){function e(t){d(this,e),this.container=t}return h(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(function(e){return e}).join(" ")}}]),e}(),f="@firebase/app",p=new s.Yd("@firebase/app"),v="[DEFAULT]",g=(e(i={},f,"fire-core"),e(i,"@firebase/app-compat","fire-core-compat"),e(i,"@firebase/analytics","fire-analytics"),e(i,"@firebase/analytics-compat","fire-analytics-compat"),e(i,"@firebase/app-check","fire-app-check"),e(i,"@firebase/app-check-compat","fire-app-check-compat"),e(i,"@firebase/auth","fire-auth"),e(i,"@firebase/auth-compat","fire-auth-compat"),e(i,"@firebase/database","fire-rtdb"),e(i,"@firebase/database-compat","fire-rtdb-compat"),e(i,"@firebase/functions","fire-fn"),e(i,"@firebase/functions-compat","fire-fn-compat"),e(i,"@firebase/installations","fire-iid"),e(i,"@firebase/installations-compat","fire-iid-compat"),e(i,"@firebase/messaging","fire-fcm"),e(i,"@firebase/messaging-compat","fire-fcm-compat"),e(i,"@firebase/performance","fire-perf"),e(i,"@firebase/performance-compat","fire-perf-compat"),e(i,"@firebase/remote-config","fire-rc"),e(i,"@firebase/remote-config-compat","fire-rc-compat"),e(i,"@firebase/storage","fire-gcs"),e(i,"@firebase/storage-compat","fire-gcs-compat"),e(i,"@firebase/firestore","fire-fst"),e(i,"@firebase/firestore-compat","fire-fst-compat"),e(i,"fire-js","fire-js"),e(i,"firebase","fire-js-all"),i),m=new Map,y=new Map;function k(e,t){try{e.container.addComponent(t)}catch(n){p.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function w(e,t){e.container.addOrOverwriteComponent(t)}function b(e){var t=e.name;if(y.has(t))return p.debug("There were multiple attempts to register component ".concat(t,".")),!1;y.set(t,e);var n,r=o(m.values());try{for(r.s();!(n=r.n()).done;){k(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function _(e,t){return e.container.getProvider(t)}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;_(e,t).clearInstance(n)}function I(){y.clear()}var T=new c.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."}),E=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new u.wA("app",function(){return i},"PUBLIC"))}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw T.create("app-deleted",{appName:this._name})}}]),e}(),S="9.4.1";function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof t&&(t={name:t});var n=Object.assign({name:v,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw T.create("bad-app-name",{appName:String(r)});var i=m.get(r);if(i){if((0,c.vZ)(e,i.options)&&(0,c.vZ)(n,i.config))return i;throw T.create("duplicate-app",{appName:r})}var a,s=new u.H0(r),l=o(y.values());try{for(l.s();!(a=l.n()).done;){var f=a.value;s.addComponent(f)}}catch(d){l.e(d)}finally{l.f()}var h=new E(e,n,s);return m.set(r,h),h}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=m.get(e);if(!t)throw T.create("no-app",{appName:e});return t}function A(){return Array.from(m.values())}function N(e){return O.apply(this,arguments)}function O(){return(O=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,e.t0=m.has(n),!e.t0){e.next=7;break}return m.delete(n),e.next=6,Promise.all(t.container.getProviders().map(function(e){return e.delete()}));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e,t,n){var r,i=null!==(r=g[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void p.warn(s.join(" "))}b(new u.wA("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function P(e,t){if(null!==e&&"function"!=typeof e)throw T.create("invalid-log-argument");(0,s.Am)(e,t)}function L(e){(0,s.Ub)(e)}b(new u.wA("platform-logger",function(e){return new l(e)},"PRIVATE")),D(f,"0.7.8",""),D(f,"0.7.8","esm2017"),D("fire-js","")},1947:function(e,t,n){"use strict";n.d(t,{wA:function(){return s},H0:function(){return l}});var i=n(6304),a=n(5725),s=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return h(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),c=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return h(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new a.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}var t,n=o(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var i=r(t.value,2),a=i[0],u=i[1],s=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:s});u.resolve(c)}catch(l){}}}catch(f){n.e(f)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(e.instances.values()),t.next=3,Promise.all([].concat(u(n.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),u(n.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))));case 3:case"end":return t.stop()}},t)}))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,u=this.getOrInitializeService({instanceIdentifier:i,options:n}),s=o(this.instancesDeferred.entries());try{for(s.s();!(a=s.n()).done;){var c=r(a.value,2),l=c[0],f=c[1];i===this.normalizeInstanceIdentifier(l)&&f.resolve(u)}}catch(h){s.e(h)}finally{s.f()}return u}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=o(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(u){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,"[DEFAULT]"===t?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}(),l=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return h(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new c(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},8678:function(t,n,r){"use strict";var i;r.d(n,{in:function(){return a},Yd:function(){return p},Ub:function(){return v},Am:function(){return g}});var a,u=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(a||(a={}));var s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},c=a.INFO,l=(e(i={},a.DEBUG,"log"),e(i,a.VERBOSE,"log"),e(i,a.INFO,"info"),e(i,a.WARN,"warn"),e(i,a.ERROR,"error"),i),f=function(e,t){var n;if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=l[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(n=console)[i].apply(n,["[".concat(r,"]  ").concat(e.name,":")].concat(o))}},p=function(){function e(t){d(this,e),this.name=t,this._logLevel=c,this._logHandler=f,this._userLogHandler=null,u.push(this)}return h(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in a))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?s[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,a.DEBUG].concat(t)),this._logHandler.apply(this,[this,a.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,a.VERBOSE].concat(t)),this._logHandler.apply(this,[this,a.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,a.INFO].concat(t)),this._logHandler.apply(this,[this,a.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,a.WARN].concat(t)),this._logHandler.apply(this,[this,a.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,a.ERROR].concat(t)),this._logHandler.apply(this,[this,a.ERROR].concat(t))}}]),e}();function v(e){u.forEach(function(t){t.setLogLevel(e)})}function g(e,t){var n,r=o(u);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=s[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];var s=o.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:a[n].toLowerCase(),message:s,args:o,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(c){r.e(c)}finally{r.f()}}},5725:function(e,t,n){"use strict";n.d(t,{BH:function(){return c},LL:function(){return O},ZR:function(){return N},zI:function(){return C},US:function(){return a},tV:function(){return u},$s:function(){return z},r3:function(){return P},Sg:function(){return l},ne:function(){return q},vZ:function(){return M},ZB:function(){return s},pd:function(){return j},Rd:function(){return A},m9:function(){return H},z$:function(){return f},jU:function(){return w},ru:function(){return b},d:function(){return x},xb:function(){return L},w1:function(){return I},hl:function(){return S},uI:function(){return g},UG:function(){return k},b$:function(){return _},G6:function(){return E},Mn:function(){return T},xO:function(){return U},zd:function(){return V},eu:function(){return R}});var i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=(15&u)<<2|c>>6,f=63&c;s||(f=64,o||(l=64)),r.push(n[a>>2],n[(3&a)<<4|u>>4],n[l],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();r.push(a<<2|o>>4),64!==u&&(r.push(o<<4&240|u>>2),64!==s&&r.push(u<<6&192|s))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){var t=i(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function s(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=s(e[n],t[n]));return e}var c=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return h(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function l(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function k(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function w(){return"object"==typeof self&&self.self===self}function b(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function x(){return f().indexOf("Electron/")>=0}function I(){var e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return f().indexOf("MSAppHost/")>=0}function E(){return!k()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){return"object"==typeof indexedDB}function R(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})}function C(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}function A(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var N=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(m(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(m(a),O.prototype.create),a}return n}(y(Error)),O=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return h(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(D,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error";return new N(n,"".concat(this.serviceName,": ").concat(i," (").concat(n,")."),t)}}]),e}(),D=/\{\$([^}]+)}/g;function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function M(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(F(u)&&F(s)){if(!M(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function F(e){return null!==e&&"object"==typeof e}function U(e){for(var t=[],n=function(){var e=r(a[i],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach(function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},i=0,a=Object.entries(e);i<a.length;i++)n();return t.length?"&"+t.join("&"):""}function V(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=r(e.split("="),2),i=n[0],a=n[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}}),t}function j(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function q(e,t){var n=new B(e,t);return n.subscribe.bind(n)}var B=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return h(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=Z),void 0===r.error&&(r.error=Z),void 0===r.complete&&(r.complete=Z);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function Z(){}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function H(e){return e&&e._delegate?e._delegate:e}},1858:function(e,t,n){"use strict";n.d(t,{P2:function(){return r.deleteApp},Mq:function(){return r.getApp},C6:function(){return r.getApps},ZF:function(){return r.initializeApp},TP:function(){return r.onLog},KN:function(){return r.registerVersion},Ub:function(){return r.setLogLevel}});var r=n(7964);(0,r.registerVersion)("firebase","9.4.1","app")},9001:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(6986);r.Z.registerVersion("firebase","9.4.1","app-compat")},14:function(n,l,f){"use strict";f.r(l);var g=f(6304),y=f(6986),k=f(5725),w=f(7964);function b(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var x=f(8678),I=f(1947),T=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},E=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),S=new x.Yd("@firebase/auth");function R(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];S.logLevel<=x.in.ERROR&&S.error.apply(S,["Auth (".concat(w.SDK_VERSION,"): ").concat(e)].concat(n))}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw D.apply(void 0,[e].concat(n))}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D.apply(void 0,[e].concat(n))}function N(t,n,r){var i=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),e({},n,r));return new k.LL("auth","Firebase",i).create(n,{appName:t.name})}function O(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&C(e,"argument-error"),N(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function D(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,a=n[0],o=u(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(u(o)))}return E.create.apply(E,[e].concat(n))}function P(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw D.apply(void 0,[t].concat(r))}function L(e){var t="INTERNAL ASSERTION FAILED: "+e;throw R(t),new Error(t)}function M(e,t){e||L(t)}var F=new Map;function U(e){M(e instanceof Function,"Expected a class definition");var t=F.get(e);return t?(M(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,F.set(e,t),t)}function V(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function j(){return"http:"===q()||"https:"===q()}function q(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var B=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,M(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}return h(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(j()||(0,k.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Z(e,t){M(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var z=function(){function e(){d(this,e)}return h(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void L("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void L("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void L("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),H={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},G=new B(3e4,6e4);function K(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function W(e,t,n,r){return Q.apply(this,arguments)}function Q(){return(Q=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Y(t,a,function(){var e={},a={};i&&("GET"===n?a=i:e={body:JSON.stringify(i)});var o=(0,k.xO)(Object.assign({key:t.config.apiKey},a)).slice(1),u=new(z.headers());return u.set("Content-Type","application/json"),u.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&u.set("X-Firebase-Locale",t.languageCode),z.fetch()(ee(t,t.config.apiHost,r,o),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},e))}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(e,t,n){return J.apply(this,arguments)}function J(){return(J=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,i){var a,o,u,s,c,l,f,h,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},H),n),e.prev=2,o=new te(t),e.next=6,Promise.race([i(),o.promise]);case 6:return u=e.sent,o.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw ne(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=15;break}return e.abrupt("return",s);case 15:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=r(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=18;break}throw ne(t,"credential-already-in-use",s);case 18:if("EMAIL_EXISTS"!==h){e.next=20;break}throw ne(t,"email-already-in-use",s);case 20:if(p=a[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=23;break}throw N(t,p,d);case 23:C(t,p),e.next=31;break;case 26:if(e.prev=26,e.t0=e.catch(2),!(e.t0 instanceof k.ZR)){e.next=30;break}throw e.t0;case 30:C(t,"network-request-failed");case 31:case"end":return e.stop()}},e,null,[[2,26]])}))).apply(this,arguments)}function $(e,t,n,r){return X.apply(this,arguments)}function X(){return(X=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,W(t,n,r,i,a);case 3:return o=e.sent,e.abrupt("return",("mfaPendingCredential"in o&&C(t,"multi-factor-auth-required",{_serverResponse:o}),o));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Z(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var te=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(A(n.auth,"timeout"))},G.get())})}return h(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ne(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=A(e,t,r);return i.customData._tokenResponse=n,i}function re(){return(re=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ie(e,t){return ae.apply(this,arguments)}function ae(){return(ae=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e,t){return ue.apply(this,arguments)}function ue(){return(ue=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ce(){return(ce=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=(0,k.m9)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,P((a=fe(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"==typeof a.firebase?a.firebase:void 0,u=null==o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:se(le(a.auth_time)),issuedAtTime:se(le(a.iat)),expirationTime:se(le(a.exp)),signInProvider:u||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(e){return 1e3*Number(e)}function fe(e){var t=r(e.split("."),3),n=t[0],i=t[1],a=t[2];if(void 0===n||void 0===i||void 0===a)return R("JWT malformed, contained fewer than 3 sections"),null;try{var o=(0,k.tV)(i);return o?JSON.parse(o):(R("Failed to decode base64 JWT payload"),null)}catch(u){return R("Caught error parsing JWT payload as JSON",u),null}}function he(e,t){return de.apply(this,arguments)}function de(){return(de=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),e.t1=e.t0 instanceof k.ZR&&pe(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function pe(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}var ve=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return h(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(this.isRunning){var n=this.getInterval(e);this.timerId=setTimeout((0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.iteration();case 2:case"end":return e.stop()}},e)})),n)}}},{key:"iteration",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.user.getIdToken(!0);case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",void("auth/network-request-failed"===t.t0.code&&e.schedule(!0)));case 8:e.schedule();case 9:case"end":return t.stop()}},t,null,[[0,5]])}))()}}]),e}(),ge=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return h(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=se(this.lastLoginAt),this.creationTime=se(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function me(e){return ye.apply(this,arguments)}function ye(){return(ye=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,he(t,oe(r,{idToken:i}));case 6:P(null==(a=e.sent)?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?be(o.providerUserInfo):[],s=we(t.providerData,u),c=!!t.isAnonymous&&!(t.email&&o.passwordHash||(null==s?void 0:s.length)),l={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ge(o.createdAt,o.lastLoginAt),isAnonymous:c},Object.assign(t,l);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(){return(ke=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,k.m9)(t),e.next=3,me(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function we(e,t){return[].concat(u(e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})})),u(t))}function be(e){return e.map(function(e){var t=e.providerId,n=b(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function _e(){return(_e=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t,{},function(){var e=(0,k.xO)({grant_type:"refresh_token",refresh_token:n}).slice(1),r=t.config,i=r.tokenApiHost,a=r.apiKey,o=ee(t,i,"/v1/token","key=".concat(a));return z.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:e})});case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xe=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return h(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){P(e.idToken,"internal-error"),P(void 0!==e.idToken,"internal-error"),P(void 0!==e.refreshToken,"internal-error");var t,n,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,P(n=fe(t),"internal-error"),P(void 0!==n.exp,"internal-error"),P(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}},{key:"getToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(P(!n.accessToken||n.refreshToken,e,"user-token-expired"),!t&&n.accessToken&&!n.isExpired){r.next=12;break}if(!n.refreshToken){r.next=8;break}return r.next=5,n.refresh(e,n.refreshToken);case 5:r.t1=n.accessToken,r.next=9;break;case 8:r.t1=null;case 9:r.t0=r.t1,r.next=13;break;case 12:r.t0=n.accessToken;case 13:return r.abrupt("return",r.t0);case 14:case"end":return r.stop()}},r)}))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){var i,a,o,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e,t){return _e.apply(this,arguments)}(e,t);case 2:i=r.sent,a=i.accessToken,o=i.refreshToken,u=i.expiresIn,n.updateTokensAndExpiration(a,o,Number(u));case 7:case"end":return r.stop()}},r)}))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return L("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(P("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(P("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(P("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ie(e,t){P("string"==typeof e||void 0===e,"internal-error",{appName:t})}var Te,Ee=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=b(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ve(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new ge(a.createdAt||void 0,a.lastLoginAt||void 0)}return h(e,[{key:"getIdToken",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,he(t,t.stsTokenManager.getToken(t.auth,e));case 2:if(P(r=n.sent,t.auth,"internal-error"),n.t0=t.accessToken!==r,!n.t0){n.next=10;break}return t.accessToken=r,n.next=9,t.auth._persistUserIfCurrent(t);case 9:t.auth._notifyListenersIfCurrent(t);case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}},n)}))()}},{key:"getIdTokenResult",value:function(e){return function(e){return ce.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ke.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=!1,e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),i=!0),r.t0=t,!r.t0){r.next=6;break}return r.next=6,me(n);case 6:return r.next=8,n.auth._persistUserIfCurrent(n);case 8:i&&n.auth._notifyListenersIfCurrent(n);case 9:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken();case 2:return n=t.sent,t.next=5,he(e,function(e,t){return re.apply(this,arguments)}(e.auth,{idToken:n}));case 5:return e.stsTokenManager.clearRefreshToken(),t.abrupt("return",e.auth.signOut());case 7:case"end":return t.stop()}},t)}))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,g=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;P(k&&x,t,"internal-error");var I=xe.fromJSON(this.name,x);P("string"==typeof k,t,"internal-error"),Ie(f,t.name),Ie(h,t.name),P("boolean"==typeof w,t,"internal-error"),P("boolean"==typeof b,t,"internal-error"),Ie(d,t.name),Ie(p,t.name),Ie(v,t.name),Ie(g,t.name),Ie(m,t.name),Ie(y,t.name);var T=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map(function(e){return Object.assign({},e)})),g&&(T._redirectEventId=g),T}},{key:"_fromIdTokenResponse",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,g.Z)(regeneratorRuntime.mark(function i(){var a,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(a=new xe).updateFromServerResponse(n),o=new e({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r}),i.next=5,me(o);case 5:return i.abrupt("return",o);case 6:case"end":return i.stop()}},i)}))()}}]),e}(),Se=((Te=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return h(e,[{key:"_isAvailable",value:function(){return(0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}))()}},{key:"_set",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n.storage[e]=t;case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.storage[e],n.abrupt("return",void 0===r?null:r);case 2:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:delete t.storage[e];case 1:case"end":return n.stop()}},n)}))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}()).type="NONE",Te);function Re(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Ce=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Re(this.userKey,a.apiKey,o),this.fullPersistenceKey=Re("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return h(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.persistence._get(e.fullUserKey);case 2:return n=t.sent,t.abrupt("return",n?Ee._fromJSON(e.auth,n):null);case 4:case"end":return t.stop()}},t)}))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.persistence!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.getCurrentUser();case 4:return r=n.sent,n.next=7,t.removeCurrentUser();case 7:return t.persistence=e,n.abrupt("return",r?t.setCurrentUser(r):void 0);case 9:case"end":return n.stop()}},n)}))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return(0,g.Z)(regeneratorRuntime.mark(function i(){var a,u,s,c,l,f,h,d,p,v;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.length){i.next=2;break}return i.abrupt("return",new e(U(Se),t,r));case 2:return i.next=4,Promise.all(n.map(function(){var e=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:a=i.sent.filter(function(e){return e}),u=a[0]||U(Se),s=Re(r,t.config.apiKey,t.name),c=null,l=o(n),i.prev=9,l.s();case 11:if((f=l.n()).done){i.next=27;break}return h=f.value,i.prev=13,i.next=16,h._get(s);case 16:if(!(d=i.sent)){i.next=21;break}return p=Ee._fromJSON(t,d),h!==u&&(c=p),u=h,i.abrupt("break",27);case 21:i.next=25;break;case 23:i.prev=23,i.t0=i.catch(13);case 25:i.next=11;break;case 27:i.next=32;break;case 29:i.prev=29,i.t1=i.catch(9),l.e(i.t1);case 32:return i.prev=32,l.f(),i.finish(32);case 35:if(v=a.filter(function(e){return e._shouldAllowMigration}),!u._shouldAllowMigration||!v.length){i.next=47;break}if(u=v[0],i.t3=c,!i.t3){i.next=42;break}return i.next=42,u._set(s,c.toJSON());case 42:return i.next=44,Promise.all(n.map(function(){var e=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()));case 44:i.t2=new e(u,t,r),i.next=48;break;case 47:i.t2=new e(u,t,r);case 48:return i.abrupt("return",i.t2);case 49:case"end":return i.stop()}},i,null,[[9,29,32,35],[13,23]])}))()}}]),e}();function Ae(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ne(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Me(t))return"Blackberry";if(Fe(t))return"Webos";if(Oe(t))return"Safari";if((t.includes("chrome/")||De(t))&&!t.includes("edge/"))return"Chrome";if(Le(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/firefox\//i.test(e)}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/crios\//i.test(e)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/iemobile/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/android/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/blackberry/i.test(e)}function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/webos/i.test(e)}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/iphone|ipad|ipod/i.test(e)}function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return Ue(e)||Le(e)||Fe(e)||Me(e)||/windows phone/i.test(e)||Pe(e)}function je(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ae((0,k.z$)());break;case"Worker":t="".concat(Ae((0,k.z$)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(w.SDK_VERSION,"/").concat(r)}var qe=function(){function e(t,n){d(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ze(this),this.idTokenSubscription=new Ze(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return h(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=U(t)),this._initializationPromise=this.queue((0,g.Z)(regeneratorRuntime.mark(function r(){var i,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n._deleted,r.t0){r.next=15;break}return r.next=4,Ce.create(n,e);case 4:if(n.persistenceManager=r.sent,r.t1=n._deleted,r.t1){r.next=15;break}if(r.t2=null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively,!r.t2){r.next=11;break}return r.next=11,n._popupRedirectResolver._initialize(n);case 11:return r.next=13,n.initializeCurrentUser(t);case 13:n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,n._deleted||(n._isInitialized=!0);case 15:case"end":return r.stop()}},r)}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._deleted){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.assertedPersistence.getCurrentUser();case 4:if(n=t.sent,!e.currentUser&&!n){t.next=19;break}if(!e.currentUser||!n||e.currentUser.uid!==n.uid){t.next=13;break}return e._currentUser._assign(n),t.next=10,e.currentUser.getIdToken();case 10:t.t1=void t.sent,t.next=16;break;case 13:return t.next=15,e._updateCurrentUser(n);case 15:t.t1=void t.sent;case 16:t.t0=t.t1,t.next=20;break;case 19:t.t0=void 0;case 20:return t.abrupt("return",t.t0);case 21:case"end":return t.stop()}},t)}))()}},{key:"initializeCurrentUser",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.getCurrentUser();case 2:if(i=n.sent,!e||!t.config.authDomain){n.next=12;break}return n.next=6,t.getOrInitRedirectPersistenceManager();case 6:return a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,o=null==i?void 0:i._redirectEventId,n.next=10,t.tryRedirectSignIn(e);case 10:u=n.sent,a&&a!==o||!(null==u?void 0:u.user)||(i=u.user);case 12:if(!i){n.next=24;break}if(!i._redirectEventId){n.next=20;break}return P(t._popupRedirectResolver,t,"argument-error"),n.next=17,t.getOrInitRedirectPersistenceManager();case 17:n.t1=t.redirectUser&&t.redirectUser._redirectEventId===i._redirectEventId?t.directlySetCurrentUser(i):t.reloadAndSetCurrentUserOrClear(i),n.next=21;break;case 20:n.t1=t.reloadAndSetCurrentUserOrClear(i);case 21:n.t0=n.t1,n.next=25;break;case 24:n.t0=t.directlySetCurrentUser(null);case 25:return n.abrupt("return",n.t0);case 26:case"end":return n.stop()}},n)}))()}},{key:"tryRedirectSignIn",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=null,n.prev=1,n.next=4,t._popupRedirectResolver._completeRedirectFn(t,e,!0);case 4:r=n.sent,n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),n.next=11,t._setRedirectUser(null);case 11:return n.abrupt("return",r);case 12:case"end":return n.stop()}},n,null,[[1,7]])}))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,me(e);case 3:n.next=9;break;case 5:if(n.prev=5,n.t0=n.catch(0),"auth/network-request-failed"===n.t0.code){n.next=9;break}return n.abrupt("return",t.directlySetCurrentUser(null));case 9:return n.abrupt("return",t.directlySetCurrentUser(e));case 10:case"end":return n.stop()}},n,null,[[0,5]])}))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._deleted=!0;case 1:case"end":return t.stop()}},t)}))()}},{key:"updateCurrentUser",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e?(0,k.m9)(e):null,n.abrupt("return",(r&&P(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_updateCurrentUser",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t._deleted){n.next=2;break}return n.abrupt("return",(e&&P(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.directlySetCurrentUser(e);case 2:t.notifyAuthListeners();case 3:case"end":return n.stop()}},n)})))));case 2:case"end":return n.stop()}},n)}))()}},{key:"signOut",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.redirectPersistenceManager||e._popupRedirectResolver,!t.t0){t.next=4;break}return t.next=4,e._setRedirectUser(null);case 4:return t.abrupt("return",e._updateCurrentUser(null));case 5:case"end":return t.stop()}},t)}))()}},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(U(e));case 2:case"end":return n.stop()}},n)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new k.LL("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getOrInitRedirectPersistenceManager(t);case 2:return i=r.sent,r.abrupt("return",null===e?i.removeCurrentUser():i.setCurrentUser(e));case 4:case"end":return r.stop()}},r)}))()}},{key:"getOrInitRedirectPersistenceManager",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.redirectPersistenceManager){n.next=9;break}return P(r=e&&U(e)||t._popupRedirectResolver,t,"argument-error"),n.next=5,Ce.create(t,[U(r._redirectPersistence)],"redirectUser");case 5:return t.redirectPersistenceManager=n.sent,n.next=8,t.redirectPersistenceManager.getCurrentUser();case 8:t.redirectUser=n.sent;case 9:return n.abrupt("return",t.redirectPersistenceManager);case 10:case"end":return n.stop()}},n)}))()}},{key:"_redirectUserForId",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t._isInitialized,!n.t0){n.next=4;break}return n.next=4,t.queue((0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})));case 4:return n.abrupt("return",(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null);case 5:case"end":return n.stop()}},n)}))()}},{key:"_persistUserIfCurrent",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==t.currentUser){n.next=2;break}return n.abrupt("return",t.queue((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.directlySetCurrentUser(e));case 1:case"end":return n.stop()}},n)}))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return P(o,this,"internal-error"),o.then(function(){return a(i.currentUser)}),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,!e){n.next=7;break}return n.next=5,t.assertedPersistence.setCurrentUser(e);case 5:n.next=9;break;case 7:return n.next=9,t.assertedPersistence.removeCurrentUser();case 9:case"end":return n.stop()}},n)}))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=je(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),e}();function Be(e){return(0,k.m9)(e)}var Ze=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=(0,k.ne)(function(e){return n.observer=e})}return h(e,[{key:"next",get:function(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ze(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function He(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ge=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return h(e,[{key:"toJSON",value:function(){return L("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return L("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return L("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return L("not implemented")}}]),e}();function Ke(e,t){return We.apply(this,arguments)}function We(){return(We=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:resetPassword",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qe(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Je(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xe(){return(Xe=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPassword",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:sendOobCode",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function it(e,t){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ot(e,t){return ut.apply(this,arguments)}function ut(){return(ut=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(e,t){return ct.apply(this,arguments)}function ct(){return(ct=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lt(){return(lt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithEmailLink",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ft(){return(ft=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithEmailLink",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ht=function(e){p(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return h(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t.signInMethod,n.next="password"===n.t0?3:"emailLink"===n.t0?4:5;break;case 3:return n.abrupt("return",function(e,t){return Xe.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password}));case 4:return n.abrupt("return",function(e,t){return lt.apply(this,arguments)}(e,{email:t._email,oobCode:t._password}));case 5:C(e,"internal-error");case 6:case"end":return n.stop()}},n)}))()}},{key:"_linkToIdToken",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=n.signInMethod,r.next="password"===r.t0?3:"emailLink"===r.t0?4:5;break;case 3:return r.abrupt("return",Qe(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password}));case 4:return r.abrupt("return",function(e,t){return ft.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password}));case 5:C(e,"internal-error");case 6:case"end":return r.stop()}},r)}))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ge);function dt(e,t){return pt.apply(this,arguments)}function pt(){return(pt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithIdp",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vt=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return h(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return dt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dt(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,k.xO)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):C("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=b(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ge);function gt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:sendVerificationCode",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(){return(yt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(){return(kt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ne(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var wt={USER_NOT_FOUND:"user-not-found"};function bt(){return(bt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),wt));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _t=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return yt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return kt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return bt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ge),xt=function(){function e(t){var n,r,i,a,o,u;d(this,e);var s=(0,k.zd)((0,k.pd)(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);P(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return h(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=(0,k.zd)((0,k.pd)(e)).link,n=t?(0,k.zd)((0,k.pd)(t)).deep_link_id:null,r=(0,k.zd)((0,k.pd)(e)).deep_link_id;return(r?(0,k.zd)((0,k.pd)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}(),It=function(){var e=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return h(e,null,[{key:"credential",value:function(e,t){return ht._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=xt.parseLink(t);return P(n,"argument-error"),ht._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e}(),Tt=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return h(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Et=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return h(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return u(this.scopes)}}]),n}(Tt),St=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return P(e.idToken||e.accessToken,"argument-error"),vt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return P("providerId"in t&&"signInMethod"in t,"argument-error"),vt._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!(i||a||r||o))return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Et),Rt=function(){var e=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.call(this,"facebook.com")}return h(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Et);return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e}(),Ct=function(){var e=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return h(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Et);return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e}(),At=function(){var e=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.call(this,"github.com")}return h(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Et);return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e}(),Nt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return h(n,[{key:"_getIdTokenResponse",value:function(e){return dt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dt(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ge),Ot=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),P(e.startsWith("saml."),"argument-error"),t.call(this,e)}return h(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Nt.fromJSON(e);return P(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Nt._create(r,n)}catch(i){return null}}}]),n}(Tt),Dt=function(){var e=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.call(this,"twitter.com")}return h(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Et);return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e}();function Pt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signUp",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Mt=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return h(e,null,[{key:"_fromIdTokenResponse",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,g.Z)(regeneratorRuntime.mark(function a(){var o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ee._fromIdTokenResponse(t,r,i);case 2:return o=a.sent,u=Ft(r),a.abrupt("return",new e({user:o,providerId:u,_tokenResponse:r,operationType:n}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_forOperation",value:function(t,n,r){return(0,g.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t._updateTokensIfNecessary(r,!0);case 2:return a=Ft(r),i.abrupt("return",new e({user:t,providerId:a,_tokenResponse:r,operationType:n}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function Ft(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ut(){return(Ut=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Mt({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Pt(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Mt._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Vt=function(e){p(n,e);var t=v(n);function n(e,r,i,a){var o,u;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(m(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return h(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(k.ZR);function jt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){if("auth/multi-factor-auth-required"===n.code)throw Vt._fromErrorAndOperation(e,n,t,r);throw n})}function qt(e){return new Set(e.map(function(e){return e.providerId}).filter(function(e){return!!e}))}function Bt(){return(Bt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,Ht(!0,r,n);case 3:return e.t0=ie,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=qt(a||[]),r.providerData=r.providerData.filter(function(e){return o.has(e.providerId)}),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zt(e,t){return zt.apply(this,arguments)}function zt(){return(zt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=he,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Mt._forOperation(t,"link",i));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e,t,n){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(n);case 2:i=!1===t?"provider-already-linked":"no-such-provider",P(qt(n.providerData).has(r)===t,n.auth,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=t.auth,e.prev=2,e.next=5,he(t,jt(i,"reauthenticate",n,t),r);case 5:return P((a=e.sent).idToken,i,"internal-error"),P(o=fe(a.idToken),i,"internal-error"),u=o.sub,e.abrupt("return",(P(t.uid===u,i,"user-mismatch"),Mt._forOperation(t,"reauthenticate",a)));case 13:throw e.prev=13,e.t0=e.catch(2),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&C(i,"user-mismatch"),e.t0;case 16:case"end":return e.stop()}},e,null,[[2,13]])}))).apply(this,arguments)}function Qt(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.next=3,jt(t,"signIn",n);case 3:return i=e.sent,e.next=6,Mt._fromIdTokenResponse(t,"signIn",i);case 6:if(a=e.sent,e.t0=r,e.t0){e.next=11;break}return e.next=11,t._updateCurrentUser(a.user);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(Be(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(e,t){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,Ht(!1,r,n.providerId);case 3:return e.abrupt("return",Zt(r,n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt((0,k.m9)(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(e,t){return an.apply(this,arguments)}function an(){return(an=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithCustomToken",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(){return(on=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,rn(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Mt._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var un=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return h(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?sn._fromServerResponse(e,t):C(e,"internal-error")}}]),e}(),sn=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return h(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(un);function cn(e,t,n){var r;P((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),P(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(P(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(P(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ln(){return(ln=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),a={requestType:"PASSWORD_RESET",email:n},r&&cn(i,a,r),e.next=4,it(i,a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fn(){return(fn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke((0,k.m9)(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hn(){return(hn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je((0,k.m9)(t),{oobCode:n});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dn(e,t){return pn.apply(this,arguments)}function pn(){return(pn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,Ke(r,{oobCode:n});case 3:i=e.sent,a=i.requestType,e.t0=(P(a,r,"internal-error"),a),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return P(i.newEmail,r,"internal-error"),e.abrupt("break",13);case 11:P(i.mfaInfo,r,"internal-error");case 12:P(i.email,r,"internal-error");case 13:return o=null,e.abrupt("return",(i.mfaInfo&&(o=un._fromServerResponse(Be(r),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a}));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vn(){return(vn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dn((0,k.m9)(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gn(){return(gn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),e.next=3,Pt(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Mt._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mn(){return(mn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),a={requestType:"EMAIL_SIGNIN",email:n},P(r.handleCodeInApp,i,"argument-error"),r&&cn(i,a,r),e.next=5,ot(i,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yn(){return(yn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),a=It.credentialWithLink(n,r||V()),e.abrupt("return",(P(a._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Jt(i,a)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kn(e,t){return wn.apply(this,arguments)}function wn(){return(wn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:createAuthUri",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bn(){return(bn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={identifier:n,continueUri:j()?V():"http://localhost"},e.next=3,kn((0,k.m9)(t),r);case 3:return i=e.sent,a=i.signinMethods,e.abrupt("return",a||[]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _n(){return(_n=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,i={requestType:"VERIFY_EMAIL",idToken:e.t0},n&&cn(r.auth,i,n),e.next=8,nt(r.auth,i);case 8:if(a=e.sent,o=a.email,e.t1=o!==t.email,!e.t1){e.next=14;break}return e.next=14,t.reload();case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xn(){return(xn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=n,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},r&&cn(i.auth,a,r),e.next=9,st(i.auth,a);case 9:if(o=e.sent,u=o.email,e.t2=u!==t.email,!e.t2){e.next=15;break}return e.next=15,t.reload();case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function In(e,t){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function En(){return(En=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=(0,k.m9)(t),e.next=6,a.getIdToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,o={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=13,he(a,In(a.auth,o));case 13:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(s=a.providerData.find(function(e){return"password"===e.providerId}))&&(s.displayName=a.displayName,s.photoURL=a.photoURL),e.next=19,a._updateTokensIfNecessary(u);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Sn(e,t,n){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,a={idToken:e.t0,returnSecureToken:e.t1},n&&(a.email=n),r&&(a.password=r),e.next=9,he(t,Qe(i,a));case 9:return o=e.sent,e.next=12,t._updateTokensIfNecessary(o,!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Cn=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r},An=function(e){p(n,e);var t=v(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return n}(Cn),Nn=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return n}(Cn),On=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return n}(An),Dn=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return n}(Cn),Pn=function(e){p(n,e);var t=v(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return n}(An);function Ln(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=fe(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Cn(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Nn(a,i);case"github.com":return new On(a,i);case"google.com":return new Dn(a,i);case"twitter.com":return new Pn(a,i,e.screenName||null);case"custom":case"anonymous":return new Cn(a,null);default:return new Cn(a,r,i)}}(n)}var Mn=function(){function t(e,n){d(this,t),this.type=e,this.credential=n}return h(t,[{key:"toJSON",value:function(){return{multiFactorSession:e({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(e){return new t("enroll",e)}},{key:"_fromMfaPendingCredential",value:function(e){return new t("signin",e)}},{key:"fromJSON",value:function(e){var n,r;if(null==e?void 0:e.multiFactorSession){if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return t._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(r=e.multiFactorSession)||void 0===r?void 0:r.idToken)return t._fromIdtoken(e.multiFactorSession.idToken)}return null}}]),t}(),Fn=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return h(e,[{key:"resolveSignIn",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.signInResolver(e));case 1:case"end":return n.stop()}},n)}))()}}],[{key:"_fromError",value:function(t,n){var r=Be(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map(function(e){return un._fromServerResponse(r,e)});P(i.mfaPendingCredential,r,"internal-error");var o,u=Mn._fromMfaPendingCredential(i.mfaPendingCredential);return new e(u,a,(o=(0,g.Z)(regeneratorRuntime.mark(function e(t){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,u);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,o=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,Mt._fromIdTokenResponse(r,n.operationType,o);case 10:return s=e.sent,e.next=13,r._updateCurrentUser(s.user);case 13:return e.abrupt("return",s);case 14:return e.abrupt("return",(P(n.user,r,"internal-error"),Mt._forOperation(n.user,n.operationType,o)));case 15:C(r,"internal-error");case 16:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}))}}]),e}();function Un(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:start",K(e,t))}var Vn,jn,qn=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload(function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map(function(e){return un._fromServerResponse(t.auth,e)}))})}return h(e,[{key:"getSession",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Mn,t.next=3,e.user.getIdToken();case 3:return t.t1=t.sent,t.abrupt("return",t.t0._fromIdtoken.call(t.t0,t.t1));case 5:case"end":return t.stop()}},t)}))()}},{key:"enroll",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){var i,a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=e,r.next=3,n.getSession();case 3:return a=r.sent,r.next=6,he(n.user,i._process(n.user.auth,a,t));case 6:return o=r.sent,r.next=9,n.user._updateTokensIfNecessary(o);case 9:return r.abrupt("return",n.user.reload());case 10:case"end":return r.stop()}},r)}))()}},{key:"unenroll",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="string"==typeof e?e:e.uid,n.next=3,t.user.getIdToken();case 3:return i=n.sent,n.next=6,he(t.user,W(o=t.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",K(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=n.sent,t.enrolledFactors=t.enrolledFactors.filter(function(e){return e.uid!==r}),n.next=10,t.user._updateTokensIfNecessary(a);case 10:return n.prev=10,n.next=13,t.user.reload();case 13:n.next=19;break;case 15:if(n.prev=15,n.t0=n.catch(10),"auth/user-token-expired"===n.t0.code){n.next=19;break}throw n.t0;case 19:case"end":return n.stop()}},n,null,[[10,15]])}))()}}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Bn=new WeakMap,Zn=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return h(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}(),zn=((jn=function(e){p(r,e);var n=v(r);function r(){var e,t;return d(this,r),(e=n.call(this,function(){return window.localStorage},"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=(Oe(t=(0,k.z$)())||Ue(t))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ve(),e._shouldAllowMigration=!0,e}return h(r,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);(0,k.w1)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t?JSON.parse(t):t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(e,n){var i=this,a=this;return(0,g.Z)(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t(_(r.prototype),"_set",i).call(a,e,n);case 2:a.localCache[e]=JSON.stringify(n);case 3:case"end":return o.stop()}},o)}))()}},{key:"_get",value:function(e){var n=this,i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(_(r.prototype),"_get",n).call(i,e);case 2:return o=a.sent,a.abrupt("return",(i.localCache[e]=JSON.stringify(o),o));case 4:case"end":return a.stop()}},a)}))()}},{key:"_remove",value:function(e){var n=this,i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(_(r.prototype),"_remove",n).call(i,e);case 2:delete i.localCache[e];case 3:case"end":return a.stop()}},a)}))()}}]),r}(Zn)).type="LOCAL",jn),Hn=((Vn=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.call(this,function(){return window.sessionStorage},"SESSION")}return h(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Zn)).type="SESSION",Vn),Gn=function(){var e=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return h(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,u,s,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(r=e).data,a=i.eventId,o=i.eventType,u=i.data,null==(s=t.handlersMap[o])?void 0:s.size){n.next=3;break}return n.abrupt("return");case 3:return r.ports[0].postMessage({status:"ack",eventId:a,eventType:o}),c=Array.from(s).map(function(){var e=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(r.origin,u));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.next=7,function(e){return Promise.all(e.map((t=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return t.apply(this,arguments)})));var t}(c);case 7:l=n.sent,r.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:l});case 9:case"end":return n.stop()}},n)}))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();return e.receivers=[],e}();function Kn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}var Wn=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return h(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=this;return(0,g.Z)(regeneratorRuntime.mark(function i(){var a,o,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a="undefined"!=typeof MessageChannel?new MessageChannel:null){i.next=3;break}throw new Error("connection_unavailable");case 3:return i.abrupt("return",new Promise(function(i,s){var c=Kn("",20);a.port1.start();var l=setTimeout(function(){s(new Error("unsupported_event"))},n);u={messageChannel:a,onMessage:function(e){var t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),o=setTimeout(function(){s(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),i(t.data.response);break;default:clearTimeout(l),clearTimeout(o),s(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:e,eventId:c,data:t},[a.port2])}).finally(function(){u&&r.removeMessageHandler(u)}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function Qn(){return window}function Yn(){return void 0!==Qn().WorkerGlobalScope&&"function"==typeof Qn().importScripts}function Jn(){return(Jn=(0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var $n="firebaseLocalStorageDb",Xn=function(){function e(t){d(this,e),this.request=t}return h(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function er(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function tr(){var e=indexedDB.open($n,1);return new Promise(function(t,n){e.addEventListener("error",function(){n(e.error)}),e.addEventListener("upgradeneeded",function(){var t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(r){n(r)}}),e.addEventListener("success",(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.result).objectStoreNames.contains("firebaseLocalStorage")){n.next=5;break}t(r),n.next=13;break;case 5:return r.close(),n.next=8,function(){var e=indexedDB.deleteDatabase($n);return new Xn(e).toPromise()}();case 8:return n.t0=t,n.next=11,tr();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}},n)})))})}function nr(e,t,n){return rr.apply(this,arguments)}function rr(){return(rr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=er(t,!0).put({fbase_key:n,value:r}),e.abrupt("return",new Xn(i).toPromise());case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ir(){return(ir=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=er(t,!1).get(n),e.next=3,new Xn(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ar(e,t){var n=er(e,!0).delete(t);return new Xn(n).toPromise()}var or,ur=((or=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return h(e,[{key:"_openDb",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.db,t.t0){t.next=5;break}return t.next=4,tr();case 4:e.db=t.sent;case 5:return t.abrupt("return",e.db);case 6:case"end":return t.stop()}},t)}))()}},{key:"_withRetries",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:return n.prev=1,n.next=4,t._openDb();case 4:return i=n.sent,n.next=7,e(i);case 7:return n.abrupt("return",n.sent);case 10:if(n.prev=10,n.t0=n.catch(1),!(r++>3)){n.next=14;break}throw n.t0;case 14:t.db&&(t.db.close(),t.db=void 0);case 15:n.next=1;break;case 17:case"end":return n.stop()}},n,null,[[1,10]])}))()}},{key:"initializeServiceWorkerMessaging",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Yn()?e.initializeReceiver():e.initializeSender());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeReceiver",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.receiver=Gn._getInstance(Yn()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,g.Z)(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._poll();case 2:return t.t0=t.sent.includes(r.key),t.abrupt("return",{keyProcessed:t.t0});case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeSender",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return Jn.apply(this,arguments)}();case 2:if(e.activeServiceWorker=t.sent,e.activeServiceWorker){t.next=5;break}return t.abrupt("return");case 5:return e.sender=new Wn(e.activeServiceWorker),t.next=8,e.sender._send("ping",{},800);case 8:(i=t.sent)&&(null===(n=i[0])||void 0===n?void 0:n.fulfilled)&&(null===(r=i[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0);case 10:case"end":return t.stop()}},t)}))()}},{key:"notifyServiceWorker",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.sender||!t.activeServiceWorker||((null===(r=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null)!==t.activeServiceWorker){n.next=8;break}return n.prev=1,n.next=4,t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}},n,null,[[1,6]])}))()}},{key:"_isAvailable",value:function(){return(0,g.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,tr();case 5:return t=e.sent,e.next=8,nr(t,"__sak","1");case 8:return e.next=10,ar(t,"__sak");case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,13]])}))()}},{key:"_withPendingWrite",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.pendingWrites++,n.prev=1,n.next=4,e();case 4:return n.prev=4,t.pendingWrites--,n.finish(4);case 7:case"end":return n.stop()}},n,null,[[1,,4,7]])}))()}},{key:"_set",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite((0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n._withRetries(function(n){return nr(n,e,t)});case 2:return n.localCache[e]=t,r.abrupt("return",n.notifyServiceWorker(e));case 4:case"end":return r.stop()}},r)}))));case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return function(e,t){return ir.apply(this,arguments)}(t,e)});case 2:return r=n.sent,n.abrupt("return",(t.localCache[e]=r,r));case 4:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._withPendingWrite((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return ar(t,e)});case 2:return delete t.localCache[e],n.abrupt("return",t.notifyServiceWorker(e));case 4:case"end":return n.stop()}},n)}))));case 1:case"end":return n.stop()}},n)}))()}},{key:"_poll",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,u,s,c,l,f,h,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._withRetries(function(e){var t=er(e,!1).getAll();return new Xn(t).toPromise()});case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:if(0===e.pendingWrites){t.next=7;break}return t.abrupt("return",[]);case 7:r=[],i=new Set,a=o(n);try{for(a.s();!(u=a.n()).done;)s=u.value,c=s.fbase_key,l=s.value,i.add(c),JSON.stringify(e.localCache[c])!==JSON.stringify(l)&&(e.notifyListeners(c,l),r.push(c))}catch(p){a.e(p)}finally{a.f()}for(f=0,h=Object.keys(e.localCache);f<h.length;f++)d=h[f],e.localCache[d]&&!i.has(d)&&(e.notifyListeners(d,null),r.push(d));return t.abrupt("return",r);case 12:case"end":return t.stop()}},t)}))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}},t)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}()).type="LOCAL",or);function sr(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:start",K(e,t))}function cr(){return(cr=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lr(e){return new Promise(function(t,n){var r,i,a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=function(e){var t=A("internal-error");t.customData=e,n(t)},a.type="text/javascript",a.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(a)})}function fr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var hr=function(){function e(t){d(this,e),this.auth=t,this.counter=1e12,this._widgets=new Map}return h(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new dr(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t;return(null===(t=this._widgets.get(e||1e12))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(null===(r=t._widgets.get(e||1e12))||void 0===r||r.execute(),""));case 1:case"end":return n.stop()}},n)}))()}}]),e}(),dr=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"==typeof t?document.getElementById(t):t;P(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return h(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout(function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),pr=fr("rcb"),vr=new B(3e4,6e4),gr=function(){function e(){d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Qn().grecaptcha}return h(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return P(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Qn().grecaptcha):new Promise(function(r,i){var a=Qn().setTimeout(function(){i(A(e,"network-request-failed"))},vr.get());Qn()[pr]=function(){Qn().clearTimeout(a),delete Qn()[pr];var o=Qn().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(A(e,"internal-error"))},lr("https://www.google.com/recaptcha/api.js??".concat((0,k.xO)({onload:pr,render:"explicit",hl:n}))).catch(function(){clearTimeout(a),i(A(e,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Qn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),mr=function(){function e(){d(this,e)}return h(e,[{key:"load",value:function(e){return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new hr(e));case 1:case"end":return t.stop()}},t)}))()}},{key:"clearedOneInstance",value:function(){}}]),e}(),yr={theme:"light",type:"image"},kr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},yr),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Be(r),this.isInvisible="invisible"===this.parameters.size,P("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;P(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mr:new gr,this.validateStartingState()}return h(e,[{key:"verify",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.assertNotDestroyed(),t.next=3,e.render();case 3:return n=t.sent,r=e.getAssertedRecaptcha(),t.abrupt("return",r.getResponse(n)||new Promise(function(t){e.tokenChangeListeners.add(function n(r){r&&(e.tokenChangeListeners.delete(n),t(r))}),e.isInvisible&&r.execute(n)}));case 6:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(t){throw e.renderPromise=null,t})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(t){e.container.removeChild(t)})}},{key:"validateStartingState",value:function(){P(!this.parameters.sitekey,this.auth,"argument-error"),P(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),P("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach(function(e){return e(n)}),"function"==typeof e)e(n);else if("string"==typeof e){var r=Qn()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){P(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if(e.widgetId){t.next=6;break}n=e.container,e.isInvisible||(r=document.createElement("div"),n.appendChild(r),n=r),e.widgetId=e.getAssertedRecaptcha().render(n,e.parameters);case 6:return t.abrupt("return",e.widgetId);case 7:case"end":return t.stop()}},t)}))()}},{key:"init",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return P(j()&&!Yn(),e.auth,"internal-error"),t.next=3,function(){var e=null;return new Promise(function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()}).catch(function(t){throw e&&window.removeEventListener("load",e),t})}();case 3:return t.next=5,e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);case 5:return e.recaptcha=t.sent,t.next=8,function(e){return cr.apply(this,arguments)}(e.auth);case 8:P(n=t.sent,e.auth,"internal-error"),e.parameters.sitekey=n;case 10:case"end":return t.stop()}},t)}))()}},{key:"getAssertedRecaptcha",value:function(){return P(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}(),wr=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return h(e,[{key:"confirm",value:function(e){var t=_t._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function br(){return(br=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),e.next=3,Ir(i,n,(0,k.m9)(r));case 3:return a=e.sent,e.abrupt("return",new wr(a,function(e){return Jt(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _r(){return(_r=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),e.next=3,Ht(!1,i,"phone");case 3:return e.next=5,Ir(i.auth,n,(0,k.m9)(r));case 5:return a=e.sent,e.abrupt("return",new wr(a,function(e){return Xt(i,e)}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xr(){return(xr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),e.next=3,Ir(i.auth,n,(0,k.m9)(r));case 3:return a=e.sent,e.abrupt("return",new wr(a,function(e){return tn(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ir(e,t,n){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,P("string"==typeof a,t,"argument-error"),P("recaptcha"===r.type,t,"argument-error"),!("session"in(o="string"==typeof n?{phoneNumber:n}:n))){e.next=17;break}if(u=o.session,!("phoneNumber"in o)){e.next=11;break}return P("enroll"===u.type,t,"internal-error"),e.next=10,Un(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 10:return e.abrupt("return",e.sent.phoneSessionInfo.sessionInfo);case 11:return P("signin"===u.type,t,"internal-error"),P(s=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=16,sr(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:s,phoneSignInInfo:{recaptchaToken:a}});case 16:return e.abrupt("return",e.sent.phoneResponseInfo.sessionInfo);case 17:return e.next=19,gt(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 19:return c=e.sent,l=c.sessionInfo,e.abrupt("return",l);case 22:return e.prev=22,r._reset(),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[3,,22,25]])}))).apply(this,arguments)}function Er(){return(Er=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zt((0,k.m9)(t),n);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Sr=function(){var e=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Be(t)}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return Ir(this.auth,e,(0,k.m9)(t))}}],[{key:"credential",value:function(e,t){return _t._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){return e.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_t._fromTokenResponse(n,r):null}}]),e}();return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e}();function Rr(e,t){return t?U(t):(P(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Cr=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return dt(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return dt(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return dt(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ge);function Ar(e){return Qt(e.auth,new Cr(e),e.bypassAuthState)}function Nr(e){var t=e.auth,n=e.user;return P(n,t,"internal-error"),Kt(n,new Cr(e),e.bypassAuthState)}function Or(e){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.user,e.abrupt("return",(P(r,n,"internal-error"),Zt(r,new Cr(t),t.bypassAuthState)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Pr=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return h(e,[{key:"execute",value:function(){var e,t=this;return new Promise((e=(0,g.Z)(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.pendingPromise={resolve:n,reject:r},e.prev=1,e.next=4,t.resolver._initialize(t.auth);case 4:return t.eventManager=e.sent,e.next=7,t.onExecution();case 7:t.eventManager.registerConsumer(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.reject(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])})),function(t,n){return e.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,u,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.urlResponse,i=e.sessionId,a=e.postBody,o=e.tenantId,u=e.error,s=e.type,!u){n.next=3;break}return n.abrupt("return",void t.reject(u));case 3:return c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:t.user,bypassAuthState:t.bypassAuthState},n.prev=4,n.t0=t,n.next=8,t.getIdpTask(s)(c);case 8:n.t1=n.sent,n.t0.resolve.call(n.t0,n.t1),n.next=15;break;case 12:n.prev=12,n.t2=n.catch(4),t.reject(n.t2);case 15:case"end":return n.stop()}},n,null,[[4,12]])}))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ar;case"linkViaPopup":case"linkViaRedirect":return Or;case"reauthViaPopup":case"reauthViaRedirect":return Nr;default:C(this.auth,"internal-error")}}},{key:"resolve",value:function(e){M(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){M(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Lr=new B(2e3,1e4);function Mr(){return(Mr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),O(t,n,Tt),a=Rr(i,r),e.abrupt("return",new Vr(i,"signInViaPopup",n,a).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fr(){return(Fr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O((i=(0,k.m9)(t)).auth,n,Tt),a=Rr(i.auth,r),e.abrupt("return",new Vr(i.auth,"reauthViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ur(){return(Ur=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O((i=(0,k.m9)(t)).auth,n,Tt),a=Rr(i.auth,r),e.abrupt("return",new Vr(i.auth,"linkViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Vr=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=m(u),u}return h(n,[{key:"executeNotNull",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.execute();case 2:return n=t.sent,t.abrupt("return",(P(n,e.auth,"internal-error"),n));case 4:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return M(1===e.filter.length,"Popup operations only handle one event"),n=Kn(),t.next=4,e.resolver._openPopup(e.auth,e.provider,e.filter[0],n);case 4:e.authWindow=t.sent,e.authWindow.associatedEvent=n,e.resolver._originValidation(e.auth).catch(function(t){e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,function(t){t||e.reject(A(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation();case 9:case"end":return t.stop()}},t)}))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(A(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;e.pollId=(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?window.setTimeout(function(){e.pollId=null,e.reject(A(e.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,Lr.get())}()}}]),n}(Pr);return e.currentPopupAction=null,e}(),jr=new Map,qr=function(e){p(r,e);var n=v(r);function r(e,t){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,r),(i=n.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a)).eventId=null,i}return h(r,[{key:"execute",value:function(){var e=this,n=this;return(0,g.Z)(regeneratorRuntime.mark(function i(){var a,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a=jr.get(n.auth._key())){i.next=20;break}return i.prev=2,i.next=5,function(e,t){return Br.apply(this,arguments)}(n.resolver,n.auth);case 5:if(!i.sent){i.next=11;break}return i.next=8,t(_(r.prototype),"execute",e).call(n);case 8:i.t0=i.sent,i.next=12;break;case 11:i.t0=null;case 12:o=i.t0,a=function(){return Promise.resolve(o)},i.next=19;break;case 16:i.prev=16,i.t1=i.catch(2),a=function(){return Promise.reject(i.t1)};case 19:jr.set(n.auth._key(),a);case 20:return i.abrupt("return",(n.bypassAuthState||jr.set(n.auth._key(),function(){return Promise.resolve(null)}),a()));case 21:case"end":return i.stop()}},i,null,[[2,16]])}))()}},{key:"onAuthEvent",value:function(e){var n=this,i=function(){return t(_(r.prototype),"onAuthEvent",n)},a=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("signInViaRedirect"!==e.type){t.next=2;break}return t.abrupt("return",i().call(a,e));case 2:if("unknown"===e.type){t.next=12;break}if(!e.eventId){t.next=10;break}return t.next=6,a.auth._redirectUserForId(e.eventId);case 6:if(!(n=t.sent)){t.next=9;break}return t.abrupt("return",(a.user=n,i().call(a,e)));case 9:a.resolve(null);case 10:t.next=13;break;case 12:a.resolve(null);case 13:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){return(0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()}},{key:"cleanUp",value:function(){}}]),r}(Pr);function Br(){return(Br=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gr(n),i=Hr(t),e.next=3,i._isAvailable();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,i._get(r);case 7:return e.t0=e.sent,a="true"===e.t0,e.next=11,i._remove(r);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zr(e,t){return zr.apply(this,arguments)}function zr(){return(zr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t)._set(Gr(n),"true"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hr(e){return U(e._redirectPersistence)}function Gr(e){return Re("pendingRedirect",e.config.apiKey,e.name)}function Kr(){return(Kr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),O(t,n,Tt),a=Rr(i,r),e.next=5,Zr(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O((i=(0,k.m9)(t)).auth,n,Tt),a=Rr(i.auth,r),e.next=5,Zr(a,i.auth);case 5:return e.next=7,Xr(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O((i=(0,k.m9)(t)).auth,n,Tt),a=Rr(i.auth,r),e.next=5,Ht(!1,i,n.providerId);case 5:return e.next=7,Zr(a,i.auth);case 7:return e.next=9,Xr(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(t)._initializationPromise;case 2:return e.abrupt("return",Jr(t,n,!1));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jr(e,t){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Be(t),a=Rr(i,n),o=new qr(i,a,r),e.next=6,o.execute();case 6:if(u=e.sent,e.t0=u&&!r,!e.t0){e.next=14;break}return delete u.user._redirectEventId,e.next=12,i._persistUserIfCurrent(u.user);case 12:return e.next=14,i._setRedirectUser(null,n);case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xr(e){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kn("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ti=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return h(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ri(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ri(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(A(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ni(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ni(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ni(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function ri(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function ii(e){return ai.apply(this,arguments)}function ai(){return(ai=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",W(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var oi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ui=/^https?/;function si(){return(si=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ii(t);case 4:n=e.sent,r=n.authorizedDomains,i=o(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(u=a.value,e.prev=11,!ci(u)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:C(t,"unauthorized-domain");case 29:case"end":return e.stop()}},e,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function ci(e){var t=V(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ui.test(r))return!1;if(oi.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var li=new B(3e4,6e4);function fi(){var e=Qn().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=u(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var hi=null;function di(e){return hi=hi||function(e){return new Promise(function(t,n){var r,i,a;function o(){fi(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){fi(),n(A(e,"network-request-failed"))},timeout:li.get()})}if(null===(i=null===(r=Qn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Qn().gapi)||void 0===a?void 0:a.load)){var u=fr("iframefcb");return Qn()[u]=function(){gapi.load?o():n(A(e,"network-request-failed"))},lr("https://apis.google.com/js/api.js?onload=".concat(u))}o()}}).catch(function(e){throw hi=null,e})}(e)}var pi=new B(5e3,15e3),vi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mi(e){var t=e.config;P(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Z(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:w.SDK_VERSION},i=gi.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat((0,k.xO)(r).slice(1))}function yi(){return(yi=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,di(t);case 2:return n=e.sent,r=Qn().gapi,e.abrupt("return",(P(r,t,"internal-error"),n.open({where:document.body,url:mi(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vi,dontclear:!0},function(e){return new Promise((n=(0,g.Z)(regeneratorRuntime.mark(function n(r,i){var a,o,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Qn().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=A(t,"network-request-failed"),o=Qn().setTimeout(function(){i(a)},pi.get()),e.ping(u).then(u,function(){i(a)});case 5:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)}));var n})));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ki={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wi=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return h(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function bi(e,t,n,i,a,o){P(e.config.authDomain,e,"auth-domain-config-required"),P(e.config.apiKey,e,"invalid-api-key");var u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:w.SDK_VERSION,eventId:a};if(t instanceof Tt){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,k.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,c=Object.entries(o||{});s<c.length;s++){var l=r(c[s],2),f=l[0],h=l[1];u[f]=h}}if(t instanceof Et){var d=t.getScopes().filter(function(e){return""!==e});d.length>0&&(u.scopes=d.join(","))}e.tenantId&&(u.tid=e.tenantId);for(var p,v,g=u,m=0,y=Object.keys(g);m<y.length;m++){var b=y[m];void 0===g[b]&&delete g[b]}return"".concat((p=e,v=p.config,v.emulator?Z(v,"emulator/auth/handler"):"https://".concat(v.authDomain,"/__/auth/handler")),"?").concat((0,k.xO)(g).slice(1))}var _i=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return h(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:finalize",K(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:finalize",K(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return h(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return L("unexpected MultiFactorSessionType")}}}]),e}()),xi=function(){var e=function(){function e(){d(this,e)}return h(e,null,[{key:"assertion",value:function(e){return _i._fromCredential(e)}}]),e}();return e.FACTOR_ID="phone",e}(),Ii=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return h(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.assertAuthConfigured(),n.next=3,t.auth._initializationPromise;case 3:if(!t.auth.currentUser){n.next=10;break}return n.next=6,t.auth.currentUser.getIdToken(e);case 6:n.t1=n.sent,n.t0={accessToken:n.t1},n.next=11;break;case 10:n.t0=null;case 11:return n.abrupt("return",n.t0);case 12:case"end":return n.stop()}},n)}))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ti(){return window}function Ei(){return(Ei=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ti(),o=a.BuildInfo,M(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Ci(n.sessionId);case 4:return u=e.sent,s={},e.abrupt("return",(Ue()?s.ibi=o.packageName:Le()?s.apn=o.packageName:C(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,bi(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s)));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Si(){return(Si=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ti(),r=n.BuildInfo,i={},Ue()?i.iosBundleId=r.packageName:Le()?i.androidPackageName=r.packageName:C(t,"operation-not-supported-in-this-environment"),e.next=4,ii(t,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ti(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise(function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout(function(){i(A(t,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Le()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}});case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[2,,5,8]])}))).apply(this,arguments)}function Ci(e){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ni(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ni(e){if(M(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(0,w._registerComponent)(new I.wA("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){P(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),P(!(null==o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:"Browser",apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:je("Browser")},r=new qe(e,t);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(U);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(r,n),r}(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),(0,w._registerComponent)(new I.wA("auth-internal",function(e){return t=Be(e.getProvider("auth").getImmediate()),new Ii(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,w.registerVersion)("@firebase/auth","0.19.3",void 0),(0,w.registerVersion)("@firebase/auth","0.19.3","esm2017");var Oi=function(e){p(r,e);var n=v(r);function r(){var e;return d(this,r),(e=n.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise(function(t){e.resolveInialized=t}),e}return h(r,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach(function(t){return t(e)}),t(_(r.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initPromise;case 2:case"end":return t.stop()}},t)}))()}}]),r}(ti);function Di(e){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi()._get(Fi(t));case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=7;break}return e.next=7,Mi()._remove(Fi(t));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Li(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Mi(){return U(zn)}function Fi(e){return Re("authEvent",e.config.apiKey,e.name)}function Ui(e){if(!(null==e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||c(t)||s(t)||i(),o=(r[0],r.slice(1));return(0,k.zd)(o.join("?"))}function Vi(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:A("no-auth-event")}}function ji(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function qi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return!("file:"!==ji()&&"ionic:"!==ji()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Bi(){try{var e=self.localStorage,t=Kn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return(0,k.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/Edge\/\d+/.test(e)}(e)}()||(0,k.hl)()}catch(n){return Zi()&&(0,k.hl)()}return!1}function Zi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function zi(){return("http:"===ji()||"https:"===ji()||(0,k.ru)()||qi())&&!((0,k.b$)()||(0,k.UG)())&&Bi()&&!Zi()}function Hi(){return qi()&&"undefined"!=typeof document}function Gi(){return(Gi=(0,g.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!Hi()&&new Promise(function(e){var t=setTimeout(function(){e(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ki={LOCAL:"local",NONE:"none",SESSION:"session"},Wi=P;function Qi(e){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ji(),r=Re("persistence",t.config.apiKey,t.name),(null==n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ji(){return"undefined"!=typeof window?window:null}var $i=P,Xi=function(){function e(){d(this,e),this.browserResolver=U(function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hn,this._completeRedirectFn=Jr}return h(e,[{key:"_openPopup",value:function(e,t,n,i){var a=this;return(0,g.Z)(regeneratorRuntime.mark(function o(){var u,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return M(null===(u=a.eventManagers[e._key()])||void 0===u?void 0:u.manager,"_initialize() not called before _openPopup()"),s=bi(e,t,n,V(),i),o.abrupt("return",function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString(),s="",c=Object.assign(Object.assign({},ki),{width:i.toString(),height:a.toString(),top:o,left:u}),l=(0,k.z$)().toLowerCase();n&&(s=De(l)?"_blank":n),Ne(l)&&(t=t||"http://localhost",c.scrollbars="yes");var f=Object.entries(c).reduce(function(e,t){var n=r(t,2),i=n[0],a=n[1];return"".concat(e).concat(i,"=").concat(a,",")},"");if(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return Ue(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new wi(null);var h=window.open(t||"",s,f);P(h,e,"popup-blocked");try{h.focus()}catch(d){}return new wi(h)}(e,s,Kn()));case 3:case"end":return o.stop()}},o)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i._originValidation(e);case 2:return o=bi(e,t,n,V(),r),Qn().location.href=o,a.abrupt("return",new Promise(function(){}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_initialize",value:function(e){var t=e._key();if(this.eventManagers[t]){var n=this.eventManagers[t],r=n.manager,i=n.promise;return r?Promise.resolve(r):(M(i,"If manager is not set, promise should be"),i)}var a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a}},{key:"initAndGetManager",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,function(e){return yi.apply(this,arguments)}(e);case 2:return r=n.sent,i=new ti(e),n.abrupt("return",(r.register("authEvent",function(t){return P(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i));case 5:case"end":return n.stop()}},n)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),C(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return si.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ve()||Oe()||Ue()}}]),e}()),this.cordovaResolver=U(function(){function e(){d(this,e),this._redirectPersistence=Hn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jr}return h(e,[{key:"_initialize",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e._key(),i=t.eventManagers.get(r),n.abrupt("return",(i||(i=new Oi(e),t.eventManagers.set(r,i),t.attachCallbackListeners(e,i)),i));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e){C(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){var o,u,s,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return function(e){var t,n,r,i,a,o,u,s,c,l,f=Ti();P("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),P(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),P("function"==typeof(null===(a=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P("function"==typeof(null===(s=null===(u=null===(o=null==f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P("function"==typeof(null===(l=null===(c=null==f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e),a.next=3,i._initialize(e);case 3:return o=a.sent,a.next=6,o.initialized();case 6:return o.resetRedirect(),jr.clear(),a.next=10,i._originValidation(e);case 10:return u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Li(),postBody:null,tenantId:e.tenantId,error:A(e,"no-auth-event")}}(e,n,r),a.next=13,function(e,t){return Mi()._set(Fi(e),t)}(e,u);case 13:return a.next=15,function(e,t,n){return Ei.apply(this,arguments)}(e,u,t);case 15:return s=a.sent,a.next=18,function(e){var t=Ti().cordova;return new Promise(function(n){t.plugins.browsertab.isAvailable(function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(s);case 18:return c=a.sent,a.abrupt("return",function(e,t,n){return Ri.apply(this,arguments)}(e,o,c));case 20:case"end":return a.stop()}},a)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Si.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n,r=Ti(),i=r.universalLinks,a=r.handleOpenURL,o=r.BuildInfo,u=setTimeout((0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Di(e);case 2:t.onEvent(Vi());case 3:case"end":return n.stop()}},n)})),500),s=(n=(0,g.Z)(regeneratorRuntime.mark(function n(r){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(u),n.next=3,Di(e);case 3:i=n.sent,a=null,i&&(null==r?void 0:r.url)&&(a=function(e,t){var n,r,i=function(e){var t=Ui(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ui(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ui(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ui(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?A(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(i,r.url)),t.onEvent(a||Vi());case 6:case"end":return n.stop()}},n)})),function(e){return n.apply(this,arguments)});void 0!==i&&"function"==typeof i.subscribe&&i.subscribe(null,s);var c,l=a,f="".concat(o.packageName.toLowerCase(),"://");Ti().handleOpenURL=(c=(0,g.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(f)&&s({url:t}),"function"==typeof l)try{l(t)}catch(n){console.error(n)}case 1:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})}}]),e}()),this.underlyingResolver=null,this._redirectPersistence=Hn,this._completeRedirectFn=Jr}return h(e,[{key:"_initialize",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.selectUnderlyingResolver();case 2:return n.abrupt("return",t.assertedUnderlyingResolver._initialize(e));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e,t,n,r){var i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.selectUnderlyingResolver();case 2:return a.abrupt("return",i.assertedUnderlyingResolver._openPopup(e,t,n,r));case 3:case"end":return a.stop()}},a)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,g.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.selectUnderlyingResolver();case 2:return a.abrupt("return",i.assertedUnderlyingResolver._openRedirect(e,t,n,r));case 3:case"end":return a.stop()}},a)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Hi()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return $i(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.underlyingResolver){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,function(){return Gi.apply(this,arguments)}();case 4:n=t.sent,e.underlyingResolver=n?e.cordovaResolver:e.browserResolver;case 6:case"end":return t.stop()}},t)}))()}}]),e}();function ea(e){return e.unwrap()}function ta(e){var t=(e instanceof k.ZR?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof k.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return Sr.credentialFromResult(e);var n,r=t.providerId;if(!r||"password"===r)return null;switch(r){case"google.com":n=Ct;break;case"facebook.com":n=Rt;break;case"github.com":n=At;break;case"twitter.com":n=Dt;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Nt._create(r,u):vt._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new St(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof k.ZR?n.credentialFromError(e):n.credentialFromResult(e)}function na(e,t){return t.catch(function(t){throw t instanceof k.ZR&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new aa(e,function(e,t){var n,r=(0,k.m9)(e),i=t;return P(t.customData.operationType,r,"argument-error"),P(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Fn._fromError(r,i)}(e,t));else if(r){var i=ta(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(function(e){var t,n=e.user;return{operationType:e.operationType,credential:(t=e,ta(t)),additionalUserInfo:Ln(e),user:oa.getOrCreate(n)}})}function ra(e,t){return ia.apply(this,arguments)}function ia(){return(ia=(0,g.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return na(t,r.confirm(e))}});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var aa=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return h(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return na(ea(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),oa=function(){var e=function(){function e(t){var n,r;d(this,e),this._delegate=t,this.multiFactor=(n=t,r=(0,k.m9)(n),Bn.has(r)||Bn.set(r,qn._fromUser(r)),Bn.get(r))}return h(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",na(t.auth,Xt(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithPhoneNumber",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",ra(n.auth,function(e,t,n){return _r.apply(this,arguments)}(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"linkWithPopup",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",na(t.auth,function(e,t,n){return Ur.apply(this,arguments)}(t._delegate,e,Xi)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithRedirect",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Qi(Be(t.auth));case 2:return n.abrupt("return",function(e,t,n){return function(e,t,n){return Qr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Xi));case 3:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",na(t.auth,tn(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ra(this.auth,function(e,t,n){return xr.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return na(this.auth,function(e,t,n){return Fr.apply(this,arguments)}(this._delegate,e,Xi))}},{key:"reauthenticateWithRedirect",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Qi(Be(t.auth));case 2:return n.abrupt("return",function(e,t,n){return function(e,t,n){return Wr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Xi));case 3:case"end":return n.stop()}},n)}))()}},{key:"sendEmailVerification",value:function(e){return function(e,t){return _n.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,function(e,t){return Bt.apply(this,arguments)}(t._delegate,e);case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}},n)}))()}},{key:"updateEmail",value:function(e){return function(e,t){return Sn((0,k.m9)(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Sn((0,k.m9)(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Er.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return En.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return xn.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();return e.USER_MAP=new WeakMap,e}(),ua=P,sa=function(){var e=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ua(r,"invalid-api-key",{appName:t.name});var i=[Se];if("undefined"!=typeof window){i=function(e,t){var n=Ji();if(!(null==n?void 0:n.sessionStorage))return[];var r=Re("persistence",e,t);switch(n.sessionStorage.getItem(r)){case Ki.NONE:return[Se];case Ki.LOCAL:return[ur,Hn];case Ki.SESSION:return[Hn];default:return[]}}(r,t.name);for(var a=0,o=[ur,zn,Hn];a<o.length;a++){var u=o[a];i.includes(u)||i.push(u)}}ua(r,"invalid-api-key",{appName:t.name});var s="undefined"!=typeof window?Xi:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(T),this.linkUnderlyingAuth()}return h(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?oa.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){!function(e,t,n){var i=Be(e);P(i._canInitEmulator,i,"emulator-config-failed"),P(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");var a=!!(null==n?void 0:n.disableWarnings),o=ze(t),u=function(e){var t=ze(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){var o=a[1];return{host:o,port:He(i.substr(o.length+1))}}var u=r(i.split(":"),2);return{host:u[0],port:He(u[1])}}(t),s=u.host,c=u.port;i.config.emulator={url:"".concat(o,"//").concat(s).concat(null===c?"":":".concat(c),"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return hn.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return dn(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return fn.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(e,t){var n=this;return(0,g.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",na(n._delegate,function(e,t,n){return gn.apply(this,arguments)}(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return bn.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=xt.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}},{key:"getRedirectResult",value:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ua(zi(),e._delegate,"operation-not-supported-in-this-environment"),t.next=3,function(e,t){return Yr.apply(this,arguments)}(e._delegate,Xi);case 3:return n=t.sent,t.abrupt("return",n?na(e._delegate,Promise.resolve(n)):{credential:null,user:null});case 5:case"end":return t.stop()}},t)}))()}},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Be(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ca(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ca(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return mn.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ln.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=(function(e,t){Wi(Object.values(Ki).includes(t),e,"invalid-persistence-type"),(0,k.b$)()?Wi(t!==Ki.SESSION,e,"unsupported-persistence-type"):(0,k.UG)()?Wi(t===Ki.NONE,e,"unsupported-persistence-type"):Zi()?Wi(t===Ki.NONE||t===Ki.LOCAL&&(0,k.hl)(),e,"unsupported-persistence-type"):Wi(t===Ki.NONE||Bi(),e,"unsupported-persistence-type")}(t._delegate,e),e),n.next=n.t0===Ki.SESSION?3:n.t0===Ki.LOCAL?5:n.t0===Ki.NONE?14:16;break;case 3:return r=Hn,n.abrupt("break",17);case 5:return n.next=7,U(ur)._isAvailable();case 7:if(!n.sent){n.next=11;break}n.t1=ur,n.next=12;break;case 11:n.t1=zn;case 12:return r=n.t1,n.abrupt("break",17);case 14:return r=Se,n.abrupt("break",17);case 16:return n.abrupt("return",C("argument-error",{appName:t._delegate.name}));case 17:return n.abrupt("return",t._delegate.setPersistence(r));case 18:case"end":return n.stop()}},n)}))()}},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return na(this._delegate,function(e){return Ut.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return na(this._delegate,Jt(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return na(this._delegate,function(e,t){return on.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return na(this._delegate,function(e,t,n){return Jt((0,k.m9)(e),It.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return na(this._delegate,function(e,t,n){return yn.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ra(this._delegate,function(e,t,n){return br.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(ua(zi(),t._delegate,"operation-not-supported-in-this-environment"),na(t._delegate,function(e,t,n){return Mr.apply(this,arguments)}(t._delegate,e,Xi))));case 1:case"end":return n.stop()}},n)}))()}},{key:"signInWithRedirect",value:function(e){var t=this;return(0,g.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ua(zi(),t._delegate,"operation-not-supported-in-this-environment"),n.next=3,Qi(t._delegate);case 3:return n.abrupt("return",function(e,t,n){return function(e,t,n){return Kr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Xi));case 4:case"end":return n.stop()}},n)}))()}},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return vn.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();return e.Persistence=Ki,e}();function ca(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var a=i;return{next:function(e){return a(e&&oa.getOrCreate(e))},error:t,complete:n}}var la,fa=function(){var e=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new Sr(ea(y.Z.auth()))}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Sr.credential(e,t)}}]),e}();return e.PHONE_SIGN_IN_METHOD=Sr.PHONE_SIGN_IN_METHOD,e.PROVIDER_ID=Sr.PROVIDER_ID,e}(),ha=P;(la=y.Z).INTERNAL.registerComponent(new I.wA("auth-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new sa(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:It,FacebookAuthProvider:Rt,GithubAuthProvider:At,GoogleAuthProvider:Ct,OAuthProvider:St,SAMLAuthProvider:Ot,PhoneAuthProvider:fa,PhoneMultiFactorGenerator:xi,RecaptchaVerifier:function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.Z.app();d(this,e),ha(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new kr(t,n,i.auth()),this.type=this._delegate.type}return h(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),TwitterAuthProvider:Dt,Auth:sa,AuthCredential:Ge,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),la.registerVersion("@firebase/auth-compat","0.2.3")},2087:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,a=new Promise(function(a,o){n(i=e[t].apply(e,r)).then(a,o)});return a.request=i,a}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new l(e,i.request)})}function a(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function o(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function u(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function s(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function f(e){this._store=e}function h(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new h(n)}function p(e){this._db=e}a(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),s(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),a(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),f.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},f.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},a(f,"_store",["name","keyPath","indexNames","autoIncrement"]),o(f,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),s(f,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),u(f,"_store",IDBObjectStore,["deleteIndex"]),h.prototype.objectStore=function(){return new f(this._tx.objectStore.apply(this._tx,arguments))},a(h,"_tx",["objectStoreNames","mode"]),u(h,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new f(this._db.createObjectStore.apply(this._db,arguments))},a(d,"_db",["name","version","objectStoreNames"]),u(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new h(this._db.transaction.apply(this._db,arguments))},a(p,"_db",["name","version","objectStoreNames"]),u(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[f,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,a=i[e].apply(i,n.slice(0,-1));a.onsuccess=function(){r(a.result)}})})}),[c,f].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),a=i.request;return a&&(a.onupgradeneeded=function(e){n&&n(new d(a.result,e.oldVersion,a.transaction))}),i.then(function(e){return new p(e)})},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},8318:function(e,t,n){"use strict";n.d(t,{y:function(){return c}});var r=n(6673),i=n(5331),a=n(7498),o=n(6197),u=n(3392),s=n(1484),c=function(){var e=function(e){function t(e){d(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return h(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(e,t,n){var o=this.operator,u=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(a.c)}(e,t,n);if(u.add(o?o.call(u,this.source):this.source||s.v.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),s.v.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){s.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,i=t.destination,a=t.isStopped;if(n||a)return!1;e=i&&i instanceof r.L?i:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=l(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}},r,t)})}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:e,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:(0===(r=t).length?u.y:1===r.length?r[0]:function(e){return r.reduce(function(e,t){return t(e)},e)})(this);var r}},{key:"toPromise",value:function(e){var t=this;return new(e=l(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})}}]),t}(o.L);return e.create=function(t){return new e(t)},e}();function l(e){if(e||(e=s.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},7498:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(1484),i=n(4294),a={closed:!0,next:function(e){},error:function(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete:function(){}}},5959:function(e,n,r){"use strict";r.d(n,{Yc:function(){return l},xQ:function(){return f}});var i=r(8318),a=r(6673),o=r(7570),u=r(3895),s=r(9291),c=r(5331),l=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).destination=e,r}return n}(a.L),f=function(){var e=function(e,n){p(a,e);var r=v(a);function a(){var e;return d(this,a),(e=r.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return h(a,[{key:n,value:function(){return new l(this)}},{key:"lift",value:function(e){var t=new g(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new u.N;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new u.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new u.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new u.N;return t(_(a.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new u.N;return this.hasError?(e.error(this.thrownError),o.w.EMPTY):this.isStopped?(e.complete(),o.w.EMPTY):(this.observers.push(e),new s.W(this,e))}},{key:"asObservable",value:function(){var e=new i.y;return e.source=this,e}}]),a}(i.y,c.b);return e.create=function(e,t){return new g(e,t)},e}(),g=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).destination=e,i.source=r,i}return h(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):o.w.EMPTY}}]),n}(f)},9291:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var r=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return h(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(n(7570).w)},6673:function(e,n,r){"use strict";r.d(n,{L:function(){return l}});var i=r(5024),a=r(7498),o=r(7570),u=r(5331),s=r(1484),c=r(4294),l=function(e,n){p(i,e);var r=v(i);function i(e,t,n){var o;switch(d(this,i),(o=r.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a.c;break;case 1:if(!e){o.destination=a.c;break}if("object"==typeof e){e instanceof i?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(m(o))):(o.syncErrorThrowable=!0,o.destination=new f(m(o),e));break}default:o.syncErrorThrowable=!0,o.destination=new f(m(o),e,t,n)}return o}return h(i,[{key:n,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,t(_(i.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,n){var r=new i(e,t,n);return r.syncErrorThrowable=!1,r}}]),i}(o.w,u.b),f=function(e){p(n,e);var t=v(n);function n(e,r,o,u){var s,c;d(this,n),(s=t.call(this))._parentSubscriber=e;var l=m(s);return(0,i.m)(r)?c=r:r&&(c=r.next,o=r.error,u=r.complete,r!==a.c&&(l=Object.create(r),(0,i.m)(l.unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(m(s)))),s._context=l,s._next=c,s._error=o,s._complete=u,s}return h(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!s.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(l)},7570:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var r=n(8470),i=n(2056),a=n(5024),o=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(e,t){return"".concat(t+1,") ").concat(e.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),u=function(){var e,t=function(){function e(t){d(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return h(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,u=this._ctorUnsubscribe,c=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var f=0;f<n.length;++f)n[f].remove(this);if((0,a.m)(c)){u&&(this._unsubscribe=void 0);try{c.call(this)}catch(v){t=v instanceof o?s(v.errors):[v]}}if((0,r.k)(l))for(var h=-1,d=l.length;++h<d;){var p=l[h];if((0,i.K)(p))try{p.unsubscribe()}catch(v){t=t||[],v instanceof o?t=t.concat(s(v.errors)):t.push(v)}}if(t)throw new o(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}();return t.EMPTY=((e=new t).closed=!0,e),t}();function s(e){return e.reduce(function(e,t){return e.concat(t instanceof o?t.errors:t)},[])}},1484:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return u},ft:function(){return s}});var r=n(6673),i=n(8318),a=n(6015),o=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).parent=e,r}return h(n,[{key:"_next",value:function(e){this.parent.notifyNext(e)}},{key:"_error",value:function(e){this.parent.notifyError(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.L),u=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.L);function s(e,t){if(!t.closed){if(e instanceof i.y)return e.subscribe(t);var n;try{n=(0,a.s)(e)(t)}catch(r){t.error(r)}return n}}},2875:function(e,n,r){"use strict";r.d(n,{c:function(){return c},N:function(){return l}});var i,a=r(5959),o=r(8318),u=r(7570),s=r(1564),c=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return h(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new u.w).add(this.source.subscribe(new f(this.getSubject(),this))),e.closed&&(this._connection=null,e=u.w.EMPTY)),e}},{key:"refCount",value:function(){return(0,s.x)()(this)}}]),n}(o.y),l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(i=c.prototype)._subscribe},_isComplete:{value:i._isComplete,writable:!0},getSubject:{value:i.getSubject},connect:{value:i.connect},refCount:{value:i.refCount}},f=function(e){p(r,e);var n=v(r);function r(e,t){var i;return d(this,r),(i=n.call(this,e)).connectable=t,i}return h(r,[{key:"_error",value:function(e){this._unsubscribe(),t(_(r.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),t(_(r.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),r}(a.Yc)},653:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return a}});var r=n(8318),i=new r.y(function(e){return e.complete()});function a(e){return e?function(e){return new r.y(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},9764:function(e,t,n){"use strict";n.d(t,{D:function(){return f}});var r=n(8318),i=n(6015),a=n(7570),o=n(6197),u=n(2570),s=n(5686),c=n(5168),l=n(9653);function f(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){var i=e[o.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if((0,l.z)(e))return(0,u.r)(e,t);if(function(e){return e&&"function"==typeof e[s.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(function(n){var r,i=new a.w;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[s.hZ](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(a){return void n.error(a)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},9342:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(8318),i=n(625),a=n(2570);function o(e,t){return t?(0,a.r)(e,t):new r.y((0,i.V)(e))}},1906:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var r=n(8318),i=n(6163),a=n(7471),o=n(9342);function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var u=Number.POSITIVE_INFINITY,s=null,c=t[t.length-1];return(0,i.K)(c)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(u=t.pop())):"number"==typeof c&&(u=t.pop()),null===s&&1===t.length&&t[0]instanceof r.y?t[0]:(0,a.J)(u)((0,o.n)(t,s))}},878:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(6163),i=n(9342),a=n(2570);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[t.length-1];return(0,r.K)(o)?(t.pop(),(0,a.r)(t,o)):(0,i.n)(t)}},9996:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(6673);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(e,t))}}var a=function(){function e(t,n){d(this,e),this.project=t,this.thisArg=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}]),e}(),o=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e)).project=r,a.count=0,a.thisArg=i||m(a),a}return h(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(r.L)},7471:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var r=n(3982),i=n(3392);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,r.zg)(i.y,e)}},3982:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(9996),i=n(9764),a=n(6882);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(a){return a.pipe(o(function(n,a){return(0,i.D)(e(n,a)).pipe((0,r.U)(function(e,r){return t(n,e,a,r)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new u(e,n))})}var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;d(this,e),this.project=t,this.concurrent=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.project,this.concurrent))}}]),e}(),s=function(e){p(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return d(this,n),(i=t.call(this,e)).project=r,i.concurrent=a,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return h(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=new a.IY(this),n=this.destination;n.add(t);var r=(0,a.ft)(e,t);r!==t&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(a.Ds)},9098:function(e,t,n){"use strict";n.d(t,{ht:function(){return l},QV:function(){return s}});var r=n(6673),i=n(653),a=n(878),o=n(8318),u=function(){var e=function(){function e(t,n,r){d(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return h(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,a.of)(this.value);case"E":return e=this.error,new o.y(function(t){return t.error(e)});case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new c(e,t))}}var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,e),this.scheduler=t,this.delay=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new l(e,this.scheduler,this.delay))}}]),e}(),l=function(e){p(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,e)).scheduler=r,i.delay=a,i}return h(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new f(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(u.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(u.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(u.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(r.L),f=function e(t,n){d(this,e),this.notification=t,this.destination=n}},1564:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(6673);function i(){return function(e){return e.lift(new a(e))}}var a=function(){function e(t){d(this,e),this.connectable=t}return h(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),o=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).connectable=r,i}return h(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(r.L)},2893:function(e,n,r){"use strict";r.d(n,{R:function(){return k}});var i=r(8318),a=1,o=Promise.resolve(),u={};function s(e){return e in u&&(delete u[e],!0)}var c=function(e){var t=a++;return u[t]=!0,o.then(function(){return s(t)&&e()}),t},l=function(e){s(e)},f=function(e){p(r,e);var n=v(r);function r(e,t){var i;return d(this,r),(i=n.call(this,e,t)).scheduler=e,i.work=t,i}return h(r,[{key:"requestAsyncId",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==i&&i>0?t(_(r.prototype),"requestAsyncId",this).call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=c(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==i&&i>0||null===i&&this.delay>0)return t(_(r.prototype),"recycleAsyncId",this).call(this,e,n,i);0===e.actions.length&&(l(n),e.scheduled=void 0)}}]),r}(r(8277).o),g=new(function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(r(1098).v))(f),m=r(2293),y=function(e){p(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return d(this,n),(r=t.call(this)).source=e,r.delayTime=i,r.scheduler=a,(!(0,m.k)(i)||i<0)&&(r.delayTime=0),a&&"function"==typeof a.schedule||(r.scheduler=g),r}return h(n,[{key:"_subscribe",value:function(e){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:e})}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return new n(e,t,r)}},{key:"dispatch",value:function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))}}]),n}(i.y);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new w(e,t))}}var w=function(){function e(t,n){d(this,e),this.scheduler=t,this.delay=n}return h(e,[{key:"call",value:function(e,t){return new y(t,this.delay,this.scheduler).subscribe(e)}}]),e}()},6599:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(6673);function i(){}var a=n(5024);function o(e,t,n){return function(r){return r.lift(new u(e,t,n))}}var u=function(){function e(t,n,r){d(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),s=function(e){p(n,e);var t=v(n);function n(e,r,o,u){var s;return d(this,n),(s=t.call(this,e))._tapNext=i,s._tapError=i,s._tapComplete=i,s._tapError=o||i,s._tapComplete=u||i,(0,a.m)(r)?(s._context=m(s),s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||i,s._tapError=r.error||i,s._tapComplete=r.complete||i),s}return h(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(r.L)},2570:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(8318),i=n(7570);function a(e,t){return new r.y(function(n){var r=new i.w,a=0;return r.add(t.schedule(function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var r=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return h(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this)}return h(n,[{key:"schedule",value:function(e){return this}}]),n}(n(7570).w))},1098:function(e,n,r){"use strict";r.d(n,{v:function(){return a}});var i=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;d(this,e),this.SchedulerAction=t,this.now=n}return h(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),a=function(e){p(r,e);var n=v(r);function r(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.now;return d(this,r),(t=n.call(this,e,function(){return r.delegate&&r.delegate!==m(t)?r.delegate.now():a()})).actions=[],t.active=!1,t.scheduled=void 0,t}return h(r,[{key:"schedule",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return r.delegate&&r.delegate!==this?r.delegate.schedule(e,n,i):t(_(r.prototype),"schedule",this).call(this,e,n,i)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),r}(i)},8569:function(e,t,n){"use strict";n.d(t,{z:function(){return i},P:function(){return a}});var r=n(8277),i=new(n(1098).v)(r.o),a=i},8489:function(e,n,r){"use strict";r.d(n,{c:function(){return o},N:function(){return a}});var i=function(e){p(r,e);var n=v(r);function r(e,t){var i;return d(this,r),(i=n.call(this,e,t)).scheduler=e,i.work=t,i}return h(r,[{key:"schedule",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n>0?t(_(r.prototype),"schedule",this).call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,n){return n>0||this.closed?t(_(r.prototype),"execute",this).call(this,e,n):this._execute(e,n)}},{key:"requestAsyncId",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==i&&i>0||null===i&&this.delay>0?t(_(r.prototype),"requestAsyncId",this).call(this,e,n,i):e.flush(this)}}]),r}(r(8277).o),a=new(function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(r(1098).v))(i),o=a},5686:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6197:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},5331:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},3895:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},4294:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e},0)}n.d(t,{z:function(){return r}})},3392:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},8470:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},9653:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},5024:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},2293:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(8470);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},2056:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},5168:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},6163:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},6015:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(625),i=n(4294),a=n(5686),o=n(6197),u=n(9653),s=n(5168),c=n(2056),l=function(e){if(e&&"function"==typeof e[o.L])return l=e,function(e){var t=l[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,u.z)(e))return(0,r.V)(e);if((0,s.t)(e))return n=e,function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,i.z),e};if(e&&"function"==typeof e[a.hZ])return t=e,function(e){for(var n=t[a.hZ]();;){var r=void 0;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e};var t,n,l,f=(0,c.K)(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(f," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}},625:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},1620:function(n,i,a){"use strict";var s=a(7368),c=null;function l(){return c}var f=new s.OlP("DocumentToken"),w=function(){var e=function(){function e(){d(this,e)}return h(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,s.Yz7)({factory:b,token:e,providedIn:"platform"}),e}();function b(){return(0,s.LFG)(I)}var x=new s.OlP("Location Initialized"),I=function(){var e=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this))._doc=e,r._init(),r}return h(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return l().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){var t=l().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),function(){return t.removeEventListener("popstate",e)}}},{key:"onHashChange",value:function(e){var t=l().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),function(){return t.removeEventListener("hashchange",e)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){T()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){T()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(e)}},{key:"getState",value:function(){return this._history.state}}]),n}(w);return e.\u0275fac=function(t){return new(t||e)(s.LFG(f))},e.\u0275prov=(0,s.Yz7)({factory:E,token:e,providedIn:"platform"}),e}();function T(){return!!window.history.pushState}function E(){return new I((0,s.LFG)(f))}function S(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function R(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function C(e){return e&&"?"!==e[0]?"?"+e:e}var A=function(){var e=function(){function e(){d(this,e)}return h(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,s.Yz7)({factory:N,token:e,providedIn:"root"}),e}();function N(e){var t=(0,s.LFG)(f).location;return new D((0,s.LFG)(w),t&&t.origin||"")}var O=new s.OlP("appBaseHref"),D=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r){var i;if(d(this,n),(i=t.call(this))._platformLocation=e,i._removeListenerFns=[],null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,g(i)}return h(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return S(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+C(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(A);return e.\u0275fac=function(t){return new(t||e)(s.LFG(w),s.LFG(O,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),P=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",i._removeListenerFns=[],null!=r&&(i._baseHref=r),i}return h(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=S(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(A);return e.\u0275fac=function(t){return new(t||e)(s.LFG(w),s.LFG(O,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),L=function(){var e=function(){function e(t,n){var r=this;d(this,e),this._subject=new s.vpe,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=R(F(i)),this._platformStrategy.onPopState(function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})})}return h(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+C(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,F(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformStrategy).historyGo)||void 0===t||t.call(e,n)}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(e,t)})}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(A),s.LFG(w))},e.normalizeQueryParams=C,e.joinWithSlash=S,e.stripTrailingSlash=R,e.\u0275prov=(0,s.Yz7)({factory:M,token:e,providedIn:"root"}),e}();function M(){return new L((0,s.LFG)(A),(0,s.LFG)(w))}function F(e){return e.replace(/\/index.html$/,"")}var U=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),V=s.kL8,j=function e(){d(this,e)},q=function(){var e=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).locale=e,r}return h(n,[{key:"getPluralCategory",value:function(e,t){switch(V(t||this.locale)(e)){case U.Zero:return"zero";case U.One:return"one";case U.Two:return"two";case U.Few:return"few";case U.Many:return"many";default:return"other"}}}]),n}(j);return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.soG))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),B=function(){var e=function(){function e(t,n){d(this,e),this._viewContainer=t,this._context=new Z,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return h(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){z("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){z("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.s_b),s.Y36(s.Rgc))},e.\u0275dir=s.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e}(),Z=function e(){d(this,e),this.$implicit=null,this.ngIf=null};function z(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat((0,s.AaK)(t),"'."))}var H=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[{provide:j,useClass:q}]}),e}();function G(e){return"server"===e}var K=function(){var e=function e(){d(this,e)};return e.\u0275prov=(0,s.Yz7)({token:e,providedIn:"root",factory:function(){return new W((0,s.LFG)(f),window)}}),e}(),W=function(){function e(t,n){d(this,e),this.document=t,this.window=n,this.offset=function(){return[0,0]}}return h(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=function(e,t){var n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow))for(var r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var a=i.shadowRoot;if(a){var o=a.getElementById(t)||a.querySelector('[name="'.concat(t,'"]'));if(o)return o}i=r.nextNode()}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=Q(this.window.history)||Q(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(vk){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(vk){return!1}}}]),e}();function Q(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}var Y,J=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getBaseHref",value:function(e){var t=($=$||document.querySelector("base"))?$.getAttribute("href"):null;return null==t?null:function(e){(Y=Y||document.createElement("a")).setAttribute("href",e);var t=Y.pathname;return"/"===t.charAt(0)?t:"/".concat(t)}(t)}},{key:"resetBaseElement",value:function(){$=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(e){return function(e,t){t=encodeURIComponent(t);var n,i=o(e.split(";"));try{for(i.s();!(n=i.n()).done;){var a=n.value,u=a.indexOf("="),s=r(-1==u?[a,""]:[a.slice(0,u),a.slice(u+1)],2),c=s[0],l=s[1];if(c.trim()===t)return decodeURIComponent(l)}}catch(f){i.e(f)}finally{i.f()}return null}(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,c||(c=e)}}]),n}(function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).supportsDOMEvents=!0,e}return n}(function(){return function e(){d(this,e)}}())),$=null,X=new s.OlP("TRANSITION_ID"),ee=[{provide:s.ip1,useFactory:function(e,t,n){return function(){n.get(s.CZH).donePromise.then(function(){var n=l();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(function(t){return t.getAttribute("ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[X,f,s.zs3],multi:!0}],te=function(){function e(){d(this,e)}return h(e,[{key:"addToWindow",value:function(e){s.dqk.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},s.dqk.getAllAngularTestabilities=function(){return e.getAllTestabilities()},s.dqk.getAllAngularRootElements=function(){return e.getAllRootElements()},s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(function(e){var t=s.dqk.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?l().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){(0,s.VLi)(new e)}}]),e}(),ne=function(){var e=function(){function e(){d(this,e)}return h(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),re=new s.OlP("EventManagerPlugins"),ie=function(){var e=function(){function e(t,n){var r=this;d(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach(function(e){return e.manager=r}),this._plugins=t.slice().reverse()}return h(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(re),s.LFG(s.R0b))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),ae=function(){function e(t){d(this,e),this._doc=t}return h(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=l().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),oe=function(){var e=function(){function e(){d(this,e),this._stylesSet=new Set}return h(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),ue=function(){var e=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Map,r._hostNodes.set(e.head,[]),r}return h(n,[{key:"_addStylesToHost",value:function(e,t,n){var r=this;e.forEach(function(e){var i=r._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}},{key:"addHost",value:function(e){var t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}},{key:"removeHost",value:function(e){var t=this._hostNodes.get(e);t&&t.forEach(se),this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach(function(n,r){t._addStylesToHost(e,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(e){return e.forEach(se)})}}]),n}(oe);return e.\u0275fac=function(t){return new(t||e)(s.LFG(f))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}();function se(e){l().remove(e)}var ce={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},le=/%COMP%/g;function fe(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?fe(e,i,n):(i=i.replace(le,e),n.push(i))}return n}function he(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var de=function(){var e=function(){function e(t,n,r){d(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new pe(t)}return h(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case s.ifc.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new ve(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case 1:case s.ifc.ShadowDom:return new ge(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=fe(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(ie),s.LFG(ue),s.LFG(s.AFp))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),pe=function(){function e(t){d(this,e),this.eventManager=t,this.data=Object.create(null)}return h(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(ce[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=ce[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=ce[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&(s.JOm.DashCase|s.JOm.Important)?e.style.setProperty(t,n,r&s.JOm.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&s.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,he(n)):this.eventManager.addEventListener(e,t,he(n))}}]),e}(),ve=function(e){p(r,e);var n=v(r);function r(e,t,i,a){var o;d(this,r),(o=n.call(this,e)).component=i;var u=fe(a+"-"+i.id,i.styles,[]);return t.addStyles(u),o.contentAttr="_ngcontent-%COMP%".replace(le,a+"-"+i.id),o.hostAttr="_nghost-%COMP%".replace(le,a+"-"+i.id),o}return h(r,[{key:"applyToHost",value:function(e){t(_(r.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,n){var i=t(_(r.prototype),"createElement",this).call(this,e,n);return t(_(r.prototype),"setAttribute",this).call(this,i,this.contentAttr,""),i}}]),r}(pe),ge=function(e){p(r,e);var n=v(r);function r(e,t,i,a){var o;d(this,r),(o=n.call(this,e)).sharedStylesHost=t,o.hostEl=i,o.shadowRoot=i.attachShadow({mode:"open"}),o.sharedStylesHost.addHost(o.shadowRoot);for(var u=fe(a.id,a.styles,[]),s=0;s<u.length;s++){var c=document.createElement("style");c.textContent=u[s],o.shadowRoot.appendChild(c)}return o}return h(r,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,n){return t(_(r.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),n)}},{key:"insertBefore",value:function(e,n,i){return t(_(r.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),n,i)}},{key:"removeChild",value:function(e,n){return t(_(r.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),n)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(t(_(r.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),r}(pe),me=function(){var e=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e)}return h(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(ae);return e.\u0275fac=function(t){return new(t||e)(s.LFG(f))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),ye=["alt","control","meta","shift"],ke={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},we={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},be={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},_e=function(){var e=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e)}return h(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),a=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return l().onAndCancel(e,i.domEventName,a)})}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),a="";if(ye.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),a+=e+".")}),a+=i,0!=t.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=a,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&we.hasOwnProperty(t)&&(t=we[t]))}return ke[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ye.forEach(function(r){r!=n&&(0,be[r])(e)&&(t+=r+".")}),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded(function(){return t(i)})}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(ae);return e.\u0275fac=function(t){return new(t||e)(s.LFG(f))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),xe=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:"browser"},{provide:s.g9A,useValue:function(){J.makeCurrent(),te.init()},multi:!0},{provide:f,useFactory:function(){return(0,s.RDi)(document),document},deps:[]}]),Ie=[[],{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function(){return new s.qLn},deps:[]},{provide:re,useClass:me,multi:!0,deps:[f,s.R0b,s.Lbi]},{provide:re,useClass:_e,multi:!0,deps:[f]},[],{provide:de,useClass:de,deps:[ie,ue,s.AFp]},{provide:s.FYo,useExisting:de},{provide:oe,useExisting:ue},{provide:ue,useClass:ue,deps:[f]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b]},{provide:ie,useClass:ie,deps:[re,s.R0b]},{provide:function e(){d(this,e)},useClass:ne,deps:[]},[]],Te=function(){var e=function(){function e(t){if(d(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return h(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:s.AFp,useValue:t.appId},{provide:X,useExisting:s.AFp},ee]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(e,12))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:Ie,imports:[H,s.hGG]}),e}();"undefined"!=typeof window&&window;var Ee=a(9764),Se=a(878),Re=a(5959),Ce=a(3895),Ae=function(e){p(r,e);var n=v(r);function r(e){var t;return d(this,r),(t=n.call(this))._value=e,t}return h(r,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var n=t(_(r.prototype),"_subscribe",this).call(this,e);return n&&!n.closed&&e.next(this._value),n}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ce.N;return this._value}},{key:"next",value:function(e){t(_(r.prototype),"next",this).call(this,this._value=e)}}]),r}(Re.xQ),Ne=a(6163),Oe=a(8470),De=a(6673),Pe=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(De.L),Le=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).parent=e,a.outerValue=r,a.outerIndex=i,a.index=0,a}return h(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(De.L),Me=a(6015),Fe=a(8318);function Ue(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Le(e,n,r);if(!i.closed)return t instanceof Fe.y?t.subscribe(i):(0,Me.s)(t)(i)}var Ve=a(9342),je={},qe=function(){function e(t){d(this,e),this.resultSelector=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Be(e,this.resultSelector))}}]),e}(),Be=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return h(n,[{key:"_next",value:function(e){this.values.push(je),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++)this.add(Ue(this,e[n],void 0,n))}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n){var r=this.values,i=this.toRespond?r[n]===je?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(Pe),Ze=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),ze=a(7471);function He(){return(0,ze.J)(1)(Se.of.apply(void 0,arguments))}var Ge=a(653);function Ke(e){return new Fe.y(function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,Ee.D)(n):(0,Ge.c)()).subscribe(t)})}var We=a(2875),Qe=a(9996),Ye=a(6882);function Je(e,t){return"function"==typeof t?function(n){return n.pipe(Je(function(n,r){return(0,Ee.D)(e(n,r)).pipe((0,Qe.U)(function(e,i){return t(n,e,r,i)}))}))}:function(t){return t.lift(new $e(e))}}var $e=function(){function e(t){d(this,e),this.project=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Xe(e,this.project))}}]),e}(),Xe=function(e){p(r,e);var n=v(r);function r(e,t){var i;return d(this,r),(i=n.call(this,e)).project=t,i.index=0,i}return h(r,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new Ye.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Ye.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||t(_(r.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&t(_(r.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e){this.destination.next(e)}}]),r}(Ye.Ds),et=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function tt(e){return function(t){return 0===e?(0,Ge.c)():t.lift(new nt(e))}}var nt=function(){function e(t){if(d(this,e),this.total=t,this.total<0)throw new et}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new rt(e,this.total))}}]),e}(),rt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return h(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(De.L);function it(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return(0,Ne.K)(r)?(t.pop(),function(e){return He(t,e,r)}):function(e){return He(t,e)}}function at(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ot(e,t,n))}}var ot=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new ut(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),ut=function(e){p(n,e);var t=v(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e)).accumulator=r,o._seed=i,o.hasSeed=a,o.index=0,o}return h(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}(De.L);function st(e,t){return function(n){return n.lift(new ct(e,t))}}var ct=function(){function e(t,n){d(this,e),this.predicate=t,this.thisArg=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new lt(e,this.predicate,this.thisArg))}}]),e}(),lt=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e)).predicate=r,a.thisArg=i,a.count=0,a}return h(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(De.L);function ft(e){return function(t){var n=new ht(e),r=t.lift(n);return n.caught=r}}var ht=function(){function e(t){d(this,e),this.selector=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new dt(e,this.selector,this.caught))}}]),e}(),dt=function(e){p(r,e);var n=v(r);function r(e,t,i){var a;return d(this,r),(a=n.call(this,e)).selector=t,a.caught=i,a}return h(r,[{key:"error",value:function(e){if(!this.isStopped){var n;try{n=this.selector(e,this.caught)}catch(o){return void t(_(r.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var i=new Ye.IY(this);this.add(i);var a=(0,Ye.ft)(n,i);a!==i&&this.add(a)}}}]),r}(Ye.Ds),pt=a(3982);function vt(e,t){return(0,pt.zg)(e,t,1)}function gt(e){return function(t){return 0===e?(0,Ge.c)():t.lift(new mt(e))}}var mt=function(){function e(t){if(d(this,e),this.total=t,this.total<0)throw new et}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new yt(e,this.total))}}]),e}(),yt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return h(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()}}]),n}(De.L);function kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;return function(t){return t.lift(new wt(e))}}var wt=function(){function e(t){d(this,e),this.errorFactory=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new bt(e,this.errorFactory))}}]),e}(),bt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return h(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(De.L);function _t(){return new Ze}function xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new It(e))}}var It=function(){function e(t){d(this,e),this.defaultValue=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Tt(e,this.defaultValue))}}]),e}(),Tt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return h(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(De.L),Et=a(3392);function St(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?st(function(t,n){return e(t,n,r)}):Et.y,tt(1),n?xt(t):kt(function(){return new Ze}))}}var Rt=a(6599),Ct=a(1564),At=a(7570),Nt=function(){function e(t){d(this,e),this.callback=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Ot(e,this.callback))}}]),e}(),Ot=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).add(new At.w(r)),i}return n}(De.L),Dt=function e(t,n){d(this,e),this.id=t,this.url=n},Pt=function(e){p(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(i=t.call(this,e,r)).navigationTrigger=a,i.restoredState=o,i}return h(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Dt),Lt=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a}return h(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Dt),Mt=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r)).reason=i,a}return h(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Dt),Ft=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r)).error=i,a}return h(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Dt),Ut=function(e){p(n,e);var t=v(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Dt),Vt=function(e){p(n,e);var t=v(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Dt),jt=function(e){p(n,e);var t=v(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,r)).urlAfterRedirects=i,u.state=a,u.shouldActivate=o,u}return h(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Dt),qt=function(e){p(n,e);var t=v(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Dt),Bt=function(e){p(n,e);var t=v(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Dt),Zt=function(){function e(t){d(this,e),this.route=t}return h(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),zt=function(){function e(t){d(this,e),this.route=t}return h(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Ht=function(){function e(t){d(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Gt=function(){function e(t){d(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Kt=function(){function e(t){d(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Wt=function(){function e(t){d(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Qt=function(){function e(t,n,r){d(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return h(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),Yt=function(){function e(t){d(this,e),this.params=t||{}}return h(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function Jt(e){return new Yt(e)}function $t(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Xt(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},a=0;a<r.length;a++){var o=r[a],u=e[a];if(o.startsWith(":"))i[o.substring(1)]=u;else if(o!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function en(e,t){var n,r=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!r||!i||r.length!=i.length)return!1;for(var a=0;a<r.length;a++)if(!tn(e[n=r[a]],t[n]))return!1;return!0}function tn(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=u(e).sort(),r=u(t).sort();return n.every(function(e,t){return r[t]===e})}return e===t}function nn(e){return Array.prototype.concat.apply([],e)}function rn(e){return e.length>0?e[e.length-1]:null}function an(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function on(e){return(0,s.CqO)(e)?e:(0,s.QGY)(e)?(0,Ee.D)(Promise.resolve(e)):(0,Se.of)(e)}var un={exact:function e(t,n,r){if(!gn(t.segments,n.segments))return!1;if(!hn(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:ln},sn={exact:function(e,t){return en(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return tn(e[n],t[n])})},ignored:function(){return!0}};function cn(e,t,n){return un[n.paths](e.root,t.root,n.matrixParams)&&sn[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function ln(e,t,n){return fn(e,t,t.segments,n)}function fn(e,t,n,r){if(e.segments.length>n.length){var i=e.segments.slice(0,n.length);return!!gn(i,n)&&!t.hasChildren()&&!!hn(i,n,r)}if(e.segments.length===n.length){if(!gn(e.segments,n))return!1;if(!hn(e.segments,n,r))return!1;for(var a in t.children){if(!e.children[a])return!1;if(!ln(e.children[a],t.children[a],r))return!1}return!0}var o=n.slice(0,e.segments.length),u=n.slice(e.segments.length);return!!gn(e.segments,o)&&!!hn(e.segments,o,r)&&!!e.children.primary&&fn(e.children.primary,t,u,r)}function hn(e,t,n){return t.every(function(t,r){return sn[n](e[r].parameters,t.parameters)})}var dn=function(){function e(t,n,r){d(this,e),this.root=t,this.queryParams=n,this.fragment=r}return h(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Jt(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return kn.serialize(this)}}]),e}(),pn=function(){function e(t,n){var r=this;d(this,e),this.segments=t,this.children=n,this.parent=null,an(n,function(e,t){return e.parent=r})}return h(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return wn(this)}}]),e}(),vn=function(){function e(t,n){d(this,e),this.path=t,this.parameters=n}return h(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Jt(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Sn(this)}}]),e}();function gn(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}var mn=function e(){d(this,e)},yn=function(){function e(){d(this,e)}return h(e,[{key:"parse",value:function(e){var t=new On(e);return new dn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r;return"/".concat(bn(e.root,!0)).concat((n=e.queryParams,r=Object.keys(n).map(function(e){var t=n[e];return Array.isArray(t)?t.map(function(t){return"".concat(xn(e),"=").concat(xn(t))}).join("&"):"".concat(xn(e),"=").concat(xn(t))}).filter(function(e){return!!e}),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),kn=new yn;function wn(e){return e.segments.map(function(e){return Sn(e)}).join("/")}function bn(e,t){if(!e.hasChildren())return wn(e);if(t){var n=e.children.primary?bn(e.children.primary,!1):"",r=[];return an(e.children,function(e,t){"primary"!==t&&r.push("".concat(t,":").concat(bn(e,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(e,t){var n=[];return an(e.children,function(e,r){"primary"===r&&(n=n.concat(t(e,r)))}),an(e.children,function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))}),n}(e,function(t,n){return"primary"===n?[bn(e.children.primary,!1)]:["".concat(n,":").concat(bn(t,!1))]});return 1===Object.keys(e.children).length&&null!=e.children.primary?"".concat(wn(e),"/").concat(i[0]):"".concat(wn(e),"/(").concat(i.join("//"),")")}function _n(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xn(e){return _n(e).replace(/%3B/gi,";")}function In(e){return _n(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tn(e){return decodeURIComponent(e)}function En(e){return Tn(e.replace(/\+/g,"%20"))}function Sn(e){return"".concat(In(e.path)).concat((t=e.parameters,Object.keys(t).map(function(e){return";".concat(In(e),"=").concat(In(t[e]))}).join("")));var t}var Rn=/^[^\/()?;=#]+/;function Cn(e){var t=e.match(Rn);return t?t[0]:""}var An=/^[^=?&#]+/,Nn=/^[^?&#]+/,On=function(){function e(t){d(this,e),this.url=t,this.remaining=t}return h(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new pn(e,t)),n}},{key:"parseSegment",value:function(){var e=Cn(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new vn(Tn(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Cn(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=Cn(this.remaining);r&&(n=r,this.capture(n))}e[Tn(t)]=Tn(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(An);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Nn);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=En(t),a=En(n);if(e.hasOwnProperty(i)){var o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(a)}else e[i]=a}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Cn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");var a=this.parseChildren();t[i]=1===Object.keys(a).length?a.primary:new pn([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Dn=function(){function e(t){d(this,e),this._root=t}return h(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Pn(e,this._root);return t?t.children.map(function(e){return e.value}):[]}},{key:"firstChild",value:function(e){var t=Pn(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Ln(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})}},{key:"pathFromRoot",value:function(e){return Ln(e,this._root).map(function(e){return e.value})}}]),e}();function Pn(e,t){if(e===t.value)return t;var n,r=o(t.children);try{for(r.s();!(n=r.n()).done;){var i=Pn(e,n.value);if(i)return i}}catch(a){r.e(a)}finally{r.f()}return null}function Ln(e,t){if(e===t.value)return[t];var n,r=o(t.children);try{for(r.s();!(n=r.n()).done;){var i=Ln(e,n.value);if(i.length)return i.unshift(t),i}}catch(a){r.e(a)}finally{r.f()}return[]}var Mn=function(){function e(t,n){d(this,e),this.value=t,this.children=n}return h(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function Fn(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var Un=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).snapshot=r,zn(m(i),e),i}return h(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Dn);function Vn(e,t){var n=function(e,t){var n=new Bn([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Zn("",new Mn(n,[]))}(e,t),r=new Ae([new vn("",{})]),i=new Ae({}),a=new Ae({}),o=new Ae({}),u=new Ae(""),s=new jn(r,i,o,u,a,"primary",t,n.root);return s.snapshot=n.root,new Un(new Mn(s,[]),n)}var jn=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=u,this._futureSnapshot=s}return h(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qe.U)(function(e){return Jt(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qe.U)(function(e){return Jt(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(e){return e.reduce(function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Bn=function(){function e(t,n,r,i,a,o,u,s,c,l,f){d(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=u,this.routeConfig=s,this._urlSegment=c,this._lastPathIndex=l,this._resolve=f}return h(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Jt(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Jt(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(e){return e.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),Zn=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,r)).url=e,zn(m(i),r),i}return h(n,[{key:"toString",value:function(){return Hn(this._root)}}]),n}(Dn);function zn(e,t){t.value._routerState=e,t.children.forEach(function(t){return zn(e,t)})}function Hn(e){var t=e.children.length>0?" { ".concat(e.children.map(Hn).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Gn(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,en(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),en(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!en(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),en(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Kn(e,t){return en(e.params,t.params)&&function(e,t){return gn(e,t)&&e.every(function(e,n){return en(e.parameters,t[n].parameters)})}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||Kn(e.parent,t.parent))}function Wn(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=t.value;var i=function(e,t,n){return t.children.map(function(t){var r,i=o(n.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.shouldReuseRoute(t.value,a.value.snapshot))return Wn(e,t,a)}}catch(u){i.e(u)}finally{i.f()}return Wn(e,t)})}(e,t,n);return new Mn(r,i)}if(e.shouldAttach(t.value)){var a=e.retrieve(t.value);if(null!==a){var u=a.route;return Qn(t,u),u}}var s,c=new jn(new Ae((s=t.value).url),new Ae(s.params),new Ae(s.queryParams),new Ae(s.fragment),new Ae(s.data),s.outlet,s.component,s),l=t.children.map(function(t){return Wn(e,t)});return new Mn(c,l)}function Qn(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(var n=0;n<e.children.length;++n)Qn(e.children[n],t.children[n])}function Yn(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Jn(e){return"object"==typeof e&&null!=e&&e.outlets}function $n(e,t,n,r,i){var a={};return r&&an(r,function(e,t){a[t]=Array.isArray(e)?e.map(function(e){return"".concat(e)}):"".concat(e)}),new dn(n.root===e?t:Xn(n.root,e,t),a,i)}function Xn(e,t,n){var r={};return an(e.children,function(e,i){r[i]=e===t?n:Xn(e,t,n)}),new pn(e.segments,r)}var er=function(){function e(t,n,r){if(d(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Yn(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(Jn);if(i&&i!==rn(r))throw new Error("{outlets:{}} has to be the last command")}return h(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),tr=function e(t,n,r){d(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function nr(e,t,n){if(e||(e=new pn([],{})),0===e.segments.length&&e.hasChildren())return rr(e,t,n);var r=function(e,t,n){for(var r=0,i=t,a={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return a;var o=e.segments[i],u=n[r];if(Jn(u))break;var s="".concat(u),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&c&&"object"==typeof c&&void 0===c.outlets){if(!ur(s,c,o))return a;r+=2}else{if(!ur(s,{},o))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var a=new pn(e.segments.slice(0,r.pathIndex),{});return a.children.primary=new pn(e.segments.slice(r.pathIndex),e.children),rr(a,0,i)}return r.match&&0===i.length?new pn(e.segments,{}):r.match&&!e.hasChildren()?ir(e,t,n):r.match?rr(e,0,i):ir(e,t,n)}function rr(e,t,n){if(0===n.length)return new pn(e.segments,{});var r=function(e){return Jn(e[0])?e[0].outlets:{primary:e}}(n),i={};return an(r,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(i[r]=nr(e.children[r],t,n))}),an(e.children,function(e,t){void 0===r[t]&&(i[t]=e)}),new pn(e.segments,i)}function ir(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){var a=n[i];if(Jn(a)){var o=ar(a.outlets);return new pn(r,o)}if(0===i&&Yn(n[0]))r.push(new vn(e.segments[t].path,or(n[0]))),i++;else{var u=Jn(a)?a.outlets.primary:"".concat(a),s=i<n.length-1?n[i+1]:null;u&&s&&Yn(s)?(r.push(new vn(u,or(s))),i+=2):(r.push(new vn(u,{})),i++)}}return new pn(r,{})}function ar(e){var t={};return an(e,function(e,n){"string"==typeof e&&(e=[e]),null!==e&&(t[n]=ir(new pn([],{}),0,e))}),t}function or(e){var t={};return an(e,function(e,n){return t[n]="".concat(e)}),t}function ur(e,t,n){return e==n.path&&en(t,n.parameters)}var sr=function(){function e(t,n,r,i){d(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return h(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Gn(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=Fn(t);e.children.forEach(function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]}),an(i,function(e,t){r.deactivateRouteAndItsChildren(e,n)})}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){for(var n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Fn(e),a=0,o=Object.keys(i);a<o.length;a++){var u=o[a];this.deactivateRouteAndItsChildren(i[u],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=Fn(t);e.children.forEach(function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new Wt(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Gt(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Gn(r),r===i)if(r.component){var a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(u.contexts),o.attachRef=u.componentRef,o.route=u.route.value,o.outlet&&o.outlet.attach(u.componentRef,u.route.value),cr(u.route)}else{var s=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function cr(e){Gn(e.value),e.children.forEach(cr)}var lr=function e(t,n){d(this,e),this.routes=t,this.module=n};function fr(e){return"function"==typeof e}function hr(e){return e instanceof dn}var dr=Symbol("INITIAL_VALUE");function pr(){return Je(function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i;return(0,Ne.K)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&(0,Oe.k)(t[0])&&(t=t[0]),(0,Ve.n)(t,i).lift(new qe(r))}(e.map(function(e){return e.pipe(tt(1),it(dr))})).pipe(at(function(e,t){var n=!1;return t.reduce(function(e,r,i){if(e!==dr)return e;if(r===dr&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||hr(r))return r}return e},e)},dr),st(function(e){return e!==dr}),(0,Qe.U)(function(e){return hr(e)?e:!0===e}),tt(1))})}var vr=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&s._UZ(0,"router-outlet")},directives:function(){return[li]},encapsulation:2}),e}();function gr(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];mr(r,yr(t,r))}}function mr(e,t){e.children&&gr(e.children,t)}function yr(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function kr(e){var t=e.children&&e.children.map(kr),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=vr),n}function wr(e){return e.outlet||"primary"}function br(e,t){var n=e.filter(function(e){return wr(e)===t});return n.push.apply(n,u(e.filter(function(e){return wr(e)!==t}))),n}var _r={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function xr(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},_r):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(t.matcher||Xt)(n,e,t);if(!i)return Object.assign({},_r);var a={};an(i.posParams,function(e,t){a[t]=e.path});var o=i.consumed.length>0?Object.assign(Object.assign({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Ir(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(e,t,n){return n.some(function(n){return Tr(e,t,n)&&"primary"!==wr(n)})}(e,n,r)){var a=new pn(t,function(e,t,n,r){var i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var a,u=o(n);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(""===s.path&&"primary"!==wr(s)){var c=new pn([],{});c._sourceSegment=e,c._segmentIndexShift=t.length,i[wr(s)]=c}}}catch(l){u.e(l)}finally{u.f()}return i}(e,t,r,new pn(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(function(n){return Tr(e,t,n)})}(e,n,r)){var u=new pn(e.segments,function(e,t,n,r,i,a){var u,s={},c=o(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(Tr(e,n,l)&&!i[wr(l)]){var f=new pn([],{});f._sourceSegment=e,f._segmentIndexShift="legacy"===a?e.segments.length:t.length,s[wr(l)]=f}}}catch(h){c.e(h)}finally{c.f()}return Object.assign(Object.assign({},i),s)}(e,t,n,r,e.children,i));return u._sourceSegment=e,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:n}}var s=new pn(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Tr(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Er(e,t,n,r){return!!(wr(e)===r||"primary"!==r&&Tr(t,n,e))&&("**"===e.path||xr(t,e,n).matched)}function Sr(e,t,n){return 0===t.length&&!e.children[n]}var Rr=function e(t){d(this,e),this.segmentGroup=t||null},Cr=function e(t){d(this,e),this.urlTree=t};function Ar(e){return new Fe.y(function(t){return t.error(new Rr(e))})}function Nr(e){return new Fe.y(function(t){return t.error(new Cr(e))})}function Or(e){return new Fe.y(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))})}var Dr=function(){function e(t,n,r,i,a){d(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=t.get(s.h0i)}return h(e,[{key:"apply",value:function(){var e=this,t=Ir(this.urlTree.root,[],[],this.config).segmentGroup,n=new pn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,"primary").pipe((0,Qe.U)(function(t){return e.createUrlTree(Pr(t),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(ft(function(t){if(t instanceof Cr)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof Rr)throw e.noMatchError(t);throw t}))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe((0,Qe.U)(function(n){return t.createUrlTree(Pr(n),e.queryParams,e.fragment)})).pipe(ft(function(e){if(e instanceof Rr)throw t.noMatchError(e);throw e}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new pn([],{primary:e}):e;return new dn(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Qe.U)(function(e){return new pn([],e)})):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){for(var r=this,i=[],a=0,o=Object.keys(n.children);a<o.length;a++){var u=o[a];"primary"===u?i.unshift(u):i.push(u)}return(0,Ee.D)(i).pipe(vt(function(i){var a=n.children[i],o=br(t,i);return r.expandSegmentGroup(e,o,a,i).pipe((0,Qe.U)(function(e){return{segment:e,outlet:i}}))}),at(function(e,t){return e[t.outlet]=t.segment,e},{}),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?st(function(t,n){return e(t,n,r)}):Et.y,gt(1),n?xt(t):kt(function(){return new Ze}))}}())}},{key:"expandSegment",value:function(e,t,n,r,i,a){var o=this;return(0,Ee.D)(n).pipe(vt(function(u){return o.expandSegmentAgainstRoute(e,t,n,u,r,i,a).pipe(ft(function(e){if(e instanceof Rr)return(0,Se.of)(null);throw e}))}),St(function(e){return!!e}),ft(function(e,n){if(e instanceof Ze||"EmptyError"===e.name){if(Sr(t,r,i))return(0,Se.of)(new pn([],{}));throw new Rr(t)}throw e}))}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,a,o){return Er(r,t,i,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,a):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a):Ar(t):Ar(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Nr(a):this.lineralizeSegments(n,a).pipe((0,pt.zg)(function(n){var a=new pn(n,{});return i.expandSegment(e,a,t,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){var o=this,u=xr(t,r,i),s=u.matched,c=u.consumedSegments,l=u.lastChild,f=u.positionalParamSegments;if(!s)return Ar(t);var h=this.applyRedirectCommands(c,r.redirectTo,f);return r.redirectTo.startsWith("/")?Nr(h):this.lineralizeSegments(r,h).pipe((0,pt.zg)(function(r){return o.expandSegment(e,t,n,r.concat(i.slice(l)),a,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r,i){var a=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Se.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Qe.U)(function(e){return n._loadedConfig=e,new pn(r,{})})):(0,Se.of)(new pn(r,{}));var o=xr(t,n,r),u=o.matched,s=o.consumedSegments,c=o.lastChild;if(!u)return Ar(t);var l=r.slice(c);return this.getChildConfig(e,n,r).pipe((0,pt.zg)(function(e){var r=e.module,o=e.routes,u=Ir(t,s,l,o),c=u.segmentGroup,f=u.slicedSegments,h=new pn(c.segments,c.children);if(0===f.length&&h.hasChildren())return a.expandChildren(r,o,h).pipe((0,Qe.U)(function(e){return new pn(s,e)}));if(0===o.length&&0===f.length)return(0,Se.of)(new pn(s,{}));var d=wr(n)===i;return a.expandSegment(r,h,o,f,d?"primary":i,!0).pipe((0,Qe.U)(function(e){return new pn(s.concat(e.segments),e.children)}))}))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?(0,Se.of)(new lr(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Se.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,pt.zg)(function(n){return n?r.configLoader.load(e.injector,t).pipe((0,Qe.U)(function(e){return t._loadedConfig=e,e})):function(e){return new Fe.y(function(t){return t.error($t("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))})}(t)})):(0,Se.of)(new lr([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var r=this,i=t.canLoad;if(!i||0===i.length)return(0,Se.of)(!0);var a=i.map(function(r){var i,a=e.get(r);if(function(e){return e&&fr(e.canLoad)}(a))i=a.canLoad(t,n);else{if(!fr(a))throw new Error("Invalid CanLoad guard");i=a(t,n)}return on(i)});return(0,Se.of)(a).pipe(pr(),(0,Rt.b)(function(e){if(hr(e)){var t=$t('Redirecting to "'.concat(r.urlSerializer.serialize(e),'"'));throw t.url=e,t}}),(0,Qe.U)(function(e){return!0===e}))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Se.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Or(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new dn(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return an(e,function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,a=this.createSegments(e,t.segments,n,r),o={};return an(t.children,function(t,a){o[a]=i.createSegmentGroup(e,t,n,r)}),new pn(a,o)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map(function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)})}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=o(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.path===e.path)return t.splice(r),a;r++}}catch(u){i.e(u)}finally{i.f()}return e}}]),e}();function Pr(e){for(var t={},n=0,r=Object.keys(e.children);n<r.length;n++){var i=r[n],a=Pr(e.children[i]);(a.segments.length>0||a.hasChildren())&&(t[i]=a)}return function(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new pn(e.segments.concat(t.segments),t.children)}return e}(new pn(e.segments,t))}var Lr=function e(t){d(this,e),this.path=t,this.route=this.path[this.path.length-1]},Mr=function e(t,n){d(this,e),this.component=t,this.route=n};function Fr(e,t,n){var r=e._root;return Vr(r,t?t._root:null,n,[r.value])}function Ur(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Vr(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=Fn(t);return e.children.forEach(function(e){!function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,o=t?t.value:null,u=n?n.getContext(e.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){var s=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!gn(e.url,t.url);case"pathParamsOrQueryParamsChange":return!gn(e.url,t.url)||!en(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kn(e,t)||!en(e.queryParams,t.queryParams);case"paramsChange":default:return!Kn(e,t)}}(o,a,a.routeConfig.runGuardsAndResolvers);s?i.canActivateChecks.push(new Lr(r)):(a.data=o.data,a._resolvedData=o._resolvedData),Vr(e,t,a.component?u?u.children:null:n,r,i),s&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new Mr(u.outlet.component,o))}else o&&jr(t,u,i),i.canActivateChecks.push(new Lr(r)),Vr(e,null,a.component?u?u.children:null:n,r,i)}(e,a[e.value.outlet],n,r.concat([e.value]),i),delete a[e.value.outlet]}),an(a,function(e,t){return jr(e,n.getContext(t),i)}),i}function jr(e,t,n){var r=Fn(e),i=e.value;an(r,function(e,r){jr(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Mr(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var qr=function e(){d(this,e)};function Br(e){return new Fe.y(function(t){return t.error(e)})}var Zr=function(){function e(t,n,r,i,a,o){d(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return h(e,[{key:"recognize",value:function(){var e=Ir(this.urlTree.root,[],[],this.config.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary");if(null===t)return null;var n=new Bn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Mn(n,t),i=new Zn(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=qn(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){for(var n=[],r=0,i=Object.keys(t.children);r<i.length;r++){var a=i[r],o=t.children[a],s=br(e,a),c=this.processSegmentGroup(s,o,a);if(null===c)return null;n.push.apply(n,u(c))}var l=zr(n);return l.sort(function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)}),l}},{key:"processSegment",value:function(e,t,n,r){var i,a=o(e);try{for(a.s();!(i=a.n()).done;){var u=i.value,s=this.processSegmentAgainstRoute(u,t,n,r);if(null!==s)return s}}catch(c){a.e(c)}finally{a.f()}return Sr(t,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo||!Er(e,t,n,r))return null;var i,a=[],o=[];if("**"===e.path){var u=n.length>0?rn(n).parameters:{};i=new Bn(n,u,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Kr(e),wr(e),e.component,e,Hr(t),Gr(t)+n.length,Wr(e))}else{var s=xr(t,e,n);if(!s.matched)return null;a=s.consumedSegments,o=n.slice(s.lastChild),i=new Bn(a,s.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Kr(e),wr(e),e.component,e,Hr(t),Gr(t)+a.length,Wr(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=Ir(t,a,o,c.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution),f=l.segmentGroup,h=l.slicedSegments;if(0===h.length&&f.hasChildren()){var d=this.processChildren(c,f);return null===d?null:[new Mn(i,d)]}if(0===c.length&&0===h.length)return[new Mn(i,[])];var p=wr(e)===r,v=this.processSegment(c,f,h,p?"primary":r);return null===v?null:[new Mn(i,v)]}}]),e}();function zr(e){var t,n=[],r=new Set,i=o(e);try{var a=function(){var e,i=t.value;if(!function(e){var t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}(i))return n.push(i),"continue";var a=n.find(function(e){return i.value.routeConfig===e.value.routeConfig});void 0!==a?((e=a.children).push.apply(e,u(i.children)),r.add(a)):n.push(i)};for(i.s();!(t=i.n()).done;)a()}catch(h){i.e(h)}finally{i.f()}var s,c=o(r);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=zr(l.children);n.push(new Mn(l.value,f))}}catch(h){c.e(h)}finally{c.f()}return n.filter(function(e){return!r.has(e)})}function Hr(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function Gr(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Kr(e){return e.data||{}}function Wr(e){return e.resolve||{}}function Qr(e){return Je(function(t){var n=e(t);return n?(0,Ee.D)(n).pipe((0,Qe.U)(function(){return t})):(0,Se.of)(t)})}var Yr=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(function(){function e(){d(this,e)}return h(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),Jr=new s.OlP("ROUTES"),$r=function(){function e(t,n,r,i){d(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return h(e,[{key:"load",value:function(e,t){var n=this;if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);var r=this.loadModuleFactory(t.loadChildren).pipe((0,Qe.U)(function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new lr(nn(i.injector.get(Jr,void 0,s.XFs.Self|s.XFs.Optional)).map(kr),i)}),ft(function(e){throw t._loader$=void 0,e}));return t._loader$=new We.c(r,function(){return new Re.xQ}).pipe((0,Ct.x)()),t._loader$}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?(0,Ee.D)(this.loader.load(e)):on(e()).pipe((0,pt.zg)(function(e){return e instanceof s.YKP?(0,Se.of)(e):(0,Ee.D)(t.compiler.compileModuleAsync(e))}))}}]),e}(),Xr=function e(){d(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new ei,this.attachRef=null},ei=function(){function e(){d(this,e),this.contexts=new Map}return h(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new Xr,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),ti=function(){function e(){d(this,e)}return h(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function ni(e){throw e}function ri(e,t,n){return t.parse("/")}function ii(e,t){return(0,Se.of)(null)}var ai={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ui=function(){var e=function(){function e(t,n,r,i,a,o,u,c){var l=this;d(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Re.xQ,this.errorHandler=ni,this.malformedUriErrorHandler=ri,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ii,afterPreactivation:ii},this.urlHandlingStrategy=new ti,this.routeReuseStrategy=new Yr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(s.h0i),this.console=a.get(s.c2e);var f=a.get(s.R0b);this.isNgZoneEnabled=f instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new dn(new pn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $r(o,u,function(e){return l.triggerEvent(new Zt(e))},function(e){return l.triggerEvent(new zt(e))}),this.routerState=Vn(this.currentUrlTree,this.rootComponentType),this.transitions=new Ae({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return h(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(st(function(e){return 0!==e.id}),(0,Qe.U)(function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),Je(function(e){var r,i,a,o,u=!1,s=!1;return(0,Se.of)(e).pipe((0,Rt.b)(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Je(function(e){var r,i,a,o,u=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||u)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,Se.of)(e).pipe(Je(function(e){var r=t.transitions.getValue();return n.next(new Pt(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Ge.E:Promise.resolve(e)}),(r=t.ngModule.injector,i=t.configLoader,a=t.urlSerializer,o=t.config,Je(function(e){return function(e,t,n,r,i){return new Dr(e,t,n,r,i).apply()}(r,i,a,e.extractedUrl,o).pipe((0,Qe.U)(function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})}))})),(0,Rt.b)(function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,r,i,a){return(0,pt.zg)(function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var o=new Zr(e,t,n,r,i,a).recognize();return null===o?Br(new qr):(0,Se.of)(o)}catch(u){return Br(u)}}(e,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,t.serializeUrl(o)),i,a).pipe((0,Qe.U)(function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})}));var o})}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),(0,Rt.b)(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,e),t.browserUrlTree=e.urlAfterRedirects);var r=new Ut(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)}));if(u&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var s=e.id,c=e.extractedUrl,l=e.source,f=e.restoredState,h=e.extras,d=new Pt(s,t.serializeUrl(c),l,f);n.next(d);var p=Vn(c,t.rootComponentType).snapshot;return(0,Se.of)(Object.assign(Object.assign({},e),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},h),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Ge.E}),Qr(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,u=o.skipLocationChange,s=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!u,replaceUrl:!!s})}),(0,Rt.b)(function(e){var n=new Vt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),(0,Qe.U)(function(e){return Object.assign(Object.assign({},e),{guards:Fr(e.targetSnapshot,e.currentSnapshot,t.rootContexts)})}),function(e,t){return(0,pt.zg)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,o=a.canActivateChecks,u=a.canDeactivateChecks;return 0===u.length&&0===o.length?(0,Se.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,Ee.D)(e).pipe((0,pt.zg)(function(e){return function(e,t,n,r,i){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,Se.of)(!0);var o=a.map(function(a){var o,u=Ur(a,t,i);if(function(e){return e&&fr(e.canDeactivate)}(u))o=on(u.canDeactivate(e,t,n,r));else{if(!fr(u))throw new Error("Invalid CanDeactivate guard");o=on(u(e,t,n,r))}return o.pipe(St())});return(0,Se.of)(o).pipe(pr())}(e.component,e.route,n,t,r)}),St(function(e){return!0!==e},!0))}(u,r,i,e).pipe((0,pt.zg)(function(n){return n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,Ee.D)(t).pipe(vt(function(t){return He(function(e,t){return null!==e&&t&&t(new Ht(e)),(0,Se.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new Kt(e)),(0,Se.of)(!0)}(t.route,r),function(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return Ke(function(){var i=t.guards.map(function(i){var a,o=Ur(i,t.node,n);if(function(e){return e&&fr(e.canActivateChild)}(o))a=on(o.canActivateChild(r,e));else{if(!fr(o))throw new Error("Invalid CanActivateChild guard");a=on(o(r,e))}return a.pipe(St())});return(0,Se.of)(i).pipe(pr())})});return(0,Se.of)(i).pipe(pr())}(e,t.path,n),function(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Se.of)(!0);var i=r.map(function(r){return Ke(function(){var i,a=Ur(r,t,n);if(function(e){return e&&fr(e.canActivate)}(a))i=on(a.canActivate(t,e));else{if(!fr(a))throw new Error("Invalid CanActivate guard");i=on(a(t,e))}return i.pipe(St())})});return(0,Se.of)(i).pipe(pr())}(e,t.route,n))}),St(function(e){return!0!==e},!0))}(r,o,e,t):(0,Se.of)(n)}),(0,Qe.U)(function(e){return Object.assign(Object.assign({},n),{guardsResult:e})}))})}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),(0,Rt.b)(function(e){if(hr(e.guardsResult)){var n=$t('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}var r=new jt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(r)}),st(function(e){return!!e.guardsResult||(t.cancelNavigationTransition(e,""),!1)}),Qr(function(e){if(e.guards.canActivateChecks.length)return(0,Se.of)(e).pipe((0,Rt.b)(function(e){var n=new qt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),Je(function(e){var n,r,i=!1;return(0,Se.of)(e).pipe((n=t.paramsInheritanceStrategy,r=t.ngModule.injector,(0,pt.zg)(function(e){var t=e.targetSnapshot,i=e.guards.canActivateChecks;if(!i.length)return(0,Se.of)(e);var a=0;return(0,Ee.D)(i).pipe(vt(function(e){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return(0,Se.of)({});var a={};return(0,Ee.D)(i).pipe((0,pt.zg)(function(i){return function(e,t,n,r){var i=Ur(e,t,r);return on(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Rt.b)(function(e){a[i]=e}))}),gt(1),(0,pt.zg)(function(){return Object.keys(a).length===i.length?(0,Se.of)(a):Ge.E}))}(e._resolve,e,t,r).pipe((0,Qe.U)(function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),qn(e,n).resolve),null}))}(e.route,t,n,r)}),(0,Rt.b)(function(){return a++}),gt(1),(0,pt.zg)(function(t){return a===i.length?(0,Se.of)(e):Ge.E}))})),(0,Rt.b)({next:function(){return i=!0},complete:function(){i||t.cancelNavigationTransition(e,"At least one route resolver didn't emit any value.")}}))}),(0,Rt.b)(function(e){var n=new Bt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}))}),Qr(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,u=o.skipLocationChange,s=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!u,replaceUrl:!!s})}),(0,Qe.U)(function(e){var n=function(e,t,n){var r=Wn(e,t._root,n?n._root:void 0);return new Un(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})}),(0,Rt.b)(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,e),t.browserUrlTree=e.urlAfterRedirects)}),(i=t.rootContexts,a=t.routeReuseStrategy,o=function(e){return t.triggerEvent(e)},(0,Qe.U)(function(e){return new sr(a,e.targetRouterState,e.currentRouterState,o).activate(i),e})),(0,Rt.b)({next:function(){u=!0},complete:function(){u=!0}}),(r=function(){u||s||t.cancelNavigationTransition(e,"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId)),t.currentNavigation=null},function(e){return e.lift(new Nt(r))}),ft(function(r){if(s=!0,(u=r)&&u.ngNavigationCancelingError){var i=hr(r.url);i||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var a=new Mt(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(a),i?setTimeout(function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new Ft(e.id,t.serializeUrl(e.extractedUrl),r);n.next(o);try{e.resolve(t.errorHandler(r))}catch(Df){e.reject(Df)}}var u;return Ge.E}))}))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout(function(){var t=n.source,r=n.state,i=n.urlTree,a={replaceUrl:!0};if(r){var o=Object.assign({},r);delete o.navigationId,delete o.\u0275routerPageId,0!==Object.keys(o).length&&(a.state=o)}e.scheduleNavigation(i,t,r,a)},0),e.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){gr(e),this.config=e.map(kr),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,a=t.queryParamsHandling,o=t.preserveFragment,s=n||this.routerState.root,c=o?this.currentUrlTree.fragment:i,l=null;switch(a){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return $n(t.root,t.root,t,r,i);var a=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new er(!0,0,e);var t=0,n=!1,r=e.reduce(function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return an(r.outlets,function(e,t){a[t]="string"==typeof e?e.split("/"):e}),[].concat(u(e),[{outlets:a}])}if(r.segmentPath)return[].concat(u(e),[r.segmentPath])}return"string"!=typeof r?[].concat(u(e),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[].concat(u(e),[r])},[]);return new er(n,t,r)}(n);if(a.toRoot())return $n(t.root,new pn([],{}),t,r,i);var o=function(e,t,n){if(e.isAbsolute)return new tr(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new tr(r,r===t.root,0)}var i=Yn(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,a=n;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new tr(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(a,t,e),s=o.processChildren?rr(o.segmentGroup,o.index,a.commands):nr(o.segmentGroup,o.index,a.commands);return $n(o.segmentGroup,s,t,r,i)}(s,this.currentUrlTree,e,l,null!=c?c:null)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=hr(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree),i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||t.skipLocationChange||t.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){var n;if(n=!0===t?Object.assign({},ai):!1===t?Object.assign({},oi):t,hr(e))return cn(this.currentUrlTree,e,n);var r=this.parseUrl(e);return cn(this.currentUrlTree,r,n)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return null!=r&&(t[n]=r),t},{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.currentPageId=t.targetPageId,e.events.next(new Lt(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(e,t,n,r,i){if(this.disposed)return Promise.resolve(!1);var a,o,u,s=this.getTransition(),c="imperative"!==t&&"imperative"===(null==s?void 0:s.source),l=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===e.toString();if(c&&l)return Promise.resolve(!0);i?(a=i.resolve,o=i.reject,u=i.promise):u=new Promise(function(e,t){a=e,o=t});var f,h=++this.navigationId;return f="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:f,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:a,reject:o,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(function(e){return Promise.reject(e)})}},{key:"setBrowserUrl",value:function(e,t){var n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(e,t){"computed"===this.canceledNavigationResolution?"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-e.targetPageId):this.resetUrlToCurrentUrlTree();var n=new Mt(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}},{key:"generateNgRouterState",value:function(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.DyG),s.LFG(mn),s.LFG(ei),s.LFG(L),s.LFG(s.zs3),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(void 0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),si=function(){var e=function(){function e(t,n,r){var i=this;d(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new Re.xQ,this.subscription=t.events.subscribe(function(e){e instanceof Lt&&i.updateTargetUrlAndHref()})}return h(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r,i){if(0!==e||t||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var a={skipLocationChange:ci(this.skipLocationChange),replaceUrl:ci(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ci(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(ui),s.Y36(jn),s.Y36(A))},e.\u0275dir=s.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&s.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(s.Ikx("href",t.href,s.LSH),s.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[s.TTD]}),e}();function ci(e){return""===e||!!e}var li=function(){var e=function(){function e(t,n,r,i,a){d(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}return h(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new fi(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(ei),s.Y36(s.s_b),s.Y36(s._Vd),s.$8M("name"),s.Y36(s.sBO))},e.\u0275dir=s.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),fi=function(){function e(t,n,r){d(this,e),this.route=t,this.childContexts=n,this.parent=r}return h(e,[{key:"get",value:function(e,t){return e===jn?this.route:e===ei?this.childContexts:this.parent.get(e,t)}}]),e}(),hi=function e(){d(this,e)},di=function(){function e(){d(this,e)}return h(e,[{key:"preload",value:function(e,t){return(0,Se.of)(null)}}]),e}(),pi=function(){var e=function(){function e(t,n,r,i,a){d(this,e),this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new $r(n,r,function(e){return t.triggerEvent(new Zt(e))},function(e){return t.triggerEvent(new zt(e))})}return h(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(st(function(e){return e instanceof Lt}),vt(function(){return e.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var e=this.injector.get(s.h0i);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=o(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var u=a._loadedConfig;r.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children))}}catch(s){i.e(s)}finally{i.f()}return(0,Ee.D)(r).pipe((0,ze.J)(),(0,Qe.U)(function(e){}))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return(t._loadedConfig?(0,Se.of)(t._loadedConfig):n.loader.load(e.injector,t)).pipe((0,pt.zg)(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(ui),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(s.zs3),s.LFG(hi))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),vi=function(){var e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return h(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Pt?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Lt&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Qt&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Qt(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(ui),s.LFG(K),s.LFG(void 0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),gi=new s.OlP("ROUTER_CONFIGURATION"),mi=new s.OlP("ROUTER_FORROOT_GUARD"),yi=[L,{provide:mn,useClass:yn},{provide:ui,useFactory:function(e,t,n,r,i,a,o){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},s=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new ui(null,e,t,n,r,i,a,nn(o));return s&&(l.urlHandlingStrategy=s),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(u,l),u.enableTracing&&l.events.subscribe(function(e){var t,n;null===(t=console.group)||void 0===t||t.call(console,"Router Event: ".concat(e.constructor.name)),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[mn,ei,L,s.zs3,s.v3s,s.Sil,Jr,gi,[function(){return function e(){d(this,e)}}(),new s.FiY],[function(){return function e(){d(this,e)}}(),new s.FiY]]},ei,{provide:jn,useFactory:function(e){return e.routerState.root},deps:[ui]},{provide:s.v3s,useClass:s.EAV},pi,di,function(){function e(){d(this,e)}return h(e,[{key:"preload",value:function(e,t){return t().pipe(ft(function(){return(0,Se.of)(null)}))}}]),e}(),{provide:gi,useValue:{enableTracing:!1}}];function ki(){return new s.PXZ("Router",ui)}var wi=function(){var e=function(){function e(t,n){d(this,e)}return h(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[yi,Ii(t),{provide:mi,useFactory:xi,deps:[[ui,new s.FiY,new s.tp0]]},{provide:gi,useValue:n||{}},{provide:A,useFactory:_i,deps:[w,[new s.tBr(O),new s.FiY],gi]},{provide:vi,useFactory:bi,deps:[ui,K,gi]},{provide:hi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:di},{provide:s.PXZ,multi:!0,useFactory:ki},[Ti,{provide:s.ip1,multi:!0,useFactory:Ei,deps:[Ti]},{provide:Ri,useFactory:Si,deps:[Ti]},{provide:s.tb,multi:!0,useExisting:Ri}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[Ii(t)]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(mi,8),s.LFG(ui,8))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({}),e}();function bi(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new vi(e,t,n)}function _i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new P(e,t):new D(e,t)}function xi(e){return"guarded"}function Ii(e){return[{provide:s.deG,multi:!0,useValue:e},{provide:Jr,multi:!0,useValue:e}]}var Ti=function(){var e=function(){function e(t){d(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Re.xQ}return h(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(x,Promise.resolve(null)).then(function(){var t=null,n=new Promise(function(e){return t=e}),r=e.injector.get(ui),i=e.injector.get(gi);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return e.initNavigation?(0,Se.of)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()):t(!0),n})}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(gi),n=this.injector.get(pi),r=this.injector.get(vi),i=this.injector.get(ui),a=this.injector.get(s.z2F);e===a.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.zs3))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}();function Ei(e){return e.appInitializer.bind(e)}function Si(e){return e.bootstrapListener.bind(e)}var Ri=new s.OlP("Router Initializer"),Ci=function(){var e=function(){function e(){d(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-error"]],decls:2,vars:0,template:function(e,t){1&e&&(s.TgZ(0,"p"),s._uU(1,"error works!"),s.qZA())},styles:[""]}),e}(),Ai=function(){var e=function(){function e(){d(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-history"]],decls:2,vars:0,template:function(e,t){1&e&&(s.TgZ(0,"p"),s._uU(1,"history works!"),s.qZA())},styles:[""]}),e}(),Ni=a(2056);function Oi(e,t){return new Fe.y(function(n){var r=e.length;if(0!==r)for(var i=new Array(r),a=0,o=0,u=function(u){var s=(0,Ee.D)(e[u]),c=!1;n.add(s.subscribe({next:function(e){c||(c=!0,o++),i[u]=e},error:function(e){return n.error(e)},complete:function(){++a!==r&&c||(o===r&&n.next(t?t.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),n.complete())}}))},s=0;s<r;s++)u(s);else n.complete()})}var Di=function(){var e=function(){function e(t,n){d(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return h(e,[{key:"setProperty",value:function(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"setDisabledState",value:function(e){this.setProperty("disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.Qsj),s.Y36(s.SBq))},e.\u0275dir=s.lG2({type:e}),e}(),Pi=function(){var e,t=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(Di);return t.\u0275fac=function(n){return(e||(e=s.n5z(t)))(n||t)},t.\u0275dir=s.lG2({type:t,features:[s.qOj]}),t}(),Li=new s.OlP("NgValueAccessor"),Mi={provide:Li,useExisting:(0,s.Gpc)(function(){return Ui}),multi:!0},Fi=new s.OlP("CompositionEventMode"),Ui=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r,i){var a,o;return d(this,n),(a=t.call(this,e,r))._compositionMode=i,a._composing=!1,null==a._compositionMode&&(a._compositionMode=(o=l()?l().getUserAgent():"",!/android (\d+)/.test(o.toLowerCase()))),a}return h(n,[{key:"writeValue",value:function(e){this.setProperty("value",null==e?"":e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),n}(Di);return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(Fi,8))},e.\u0275dir=s.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&s.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[s._Bn([Mi]),s.qOj]}),e}();function Vi(e){return null==e||0===e.length}var ji=new s.OlP("NgValidators"),qi=new s.OlP("NgAsyncValidators");function Bi(e){return null}function Zi(e){return null!=e}function zi(e){var t=(0,s.QGY)(e)?(0,Ee.D)(e):e;return(0,s.CqO)(t),t}function Hi(e){var t={};return e.forEach(function(e){t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function Gi(e,t){return t.map(function(t){return t(e)})}function Ki(e){return e.map(function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}})}function Wi(e){return null!=e?function(e){if(!e)return null;var t=e.filter(Zi);return 0==t.length?null:function(e){return Hi(Gi(e,t))}}(Ki(e)):null}function Qi(e){return null!=e?function(e){if(!e)return null;var t=e.filter(Zi);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if((0,Oe.k)(r))return Oi(r,null);if((0,Ni.K)(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return Oi(i.map(function(e){return r[e]}),i)}}if("function"==typeof t[t.length-1]){var a=t.pop();return Oi(t=1===t.length&&(0,Oe.k)(t[0])?t[0]:t,null).pipe((0,Qe.U)(function(e){return a.apply(void 0,u(e))}))}return Oi(t,null)}(Gi(e,t).map(zi)).pipe((0,Qe.U)(Hi))}}(Ki(e)):null}function Yi(e,t){return null===e?[t]:Array.isArray(e)?[].concat(u(e),[t]):[e,t]}var Ji=function(){var e=function(){function e(){d(this,e),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return h(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(e){this._rawValidators=e||[],this._composedValidatorFn=Wi(this._rawValidators)}},{key:"_setAsyncValidators",value:function(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Qi(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(e){this._onDestroyCallbacks.push(e)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(e){return e()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=s.lG2({type:e}),e}(),$i=function(){var e,t=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Ji);return t.\u0275fac=function(n){return(e||(e=s.n5z(t)))(n||t)},t.\u0275dir=s.lG2({type:t,features:[s.qOj]}),t}(),Xi=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e}return n}(Ji),ea=function(){function e(t){d(this,e),this._cd=t}return h(e,[{key:"is",value:function(e){var t,n;return!!(null===(n=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===n?void 0:n[e])}}]),e}(),ta=function(){var e=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e)}return n}(ea);return e.\u0275fac=function(t){return new(t||e)(s.Y36(Xi,2))},e.\u0275dir=s.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&s.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[s.qOj]}),e}(),na=function(){var e=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e)}return n}(ea);return e.\u0275fac=function(t){return new(t||e)(s.Y36($i,10))},e.\u0275dir=s.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&s.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[s.qOj]}),e}();function ra(e,t){aa(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&oa(e,t)})}(e,t),function(e,t){var n=function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(function(){e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&oa(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){var n=function(e){t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(function(){e._unregisterOnDisabledChange(n)})}}(e,t)}function ia(e,t){e.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function aa(e,t){var n=function(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(Yi(n,t.validator)):"function"==typeof n&&e.setValidators([n]);var r=function(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(Yi(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);var i=function(){return e.updateValueAndValidity()};ia(t._rawValidators,i),ia(t._rawAsyncValidators,i)}function oa(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function ua(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function sa(e){return(ha(e)?e.validators:e)||null}function ca(e){return Array.isArray(e)?Wi(e):e||null}function la(e,t){return(ha(t)?t.asyncValidators:e)||null}function fa(e){return Array.isArray(e)?Qi(e):e||null}function ha(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var da=function(){function e(t,n){d(this,e),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=ca(this._rawValidators),this._composedAsyncValidatorFn=fa(this._rawAsyncValidators)}return h(e,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this._rawValidators=e,this._composedValidatorFn=ca(e)}},{key:"setAsyncValidators",value:function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=fa(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(e){return e.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!0)})}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!1)})}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=zi(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach(function(e){r=r instanceof va?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof ga&&r.at(e)||null}),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls(function(t){return t.status===e})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(e){return e.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(e){return e.touched})}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){ha(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),e}(),pa=function(e){p(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return d(this,n),(e=t.call(this,sa(i),la(a,i)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(i),e._initObservables(),e.updateValueAndValidity({onlySelf:!0,emitEvent:!!e.asyncValidator}),e}return h(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_unregisterOnChange",value:function(e){ua(this._onChange,e)}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_unregisterOnDisabledChange",value:function(e){ua(this._onDisabledChange,e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(da),va=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,sa(r),la(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!!a.asyncValidator}),a}return h(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"removeControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(Object.keys(e).forEach(function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof pa?t.value:t.getRawValue(),e})}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach(function(n){var r=t.controls[n];r&&e(r,n)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var r=n[t],i=this.controls[r];if(this.contains(r)&&e(i))return!0}return!1}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(da),ga=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,sa(r),la(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!!a.asyncValidator}),a}return h(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}},{key:"removeAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach(function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(e.forEach(function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map(function(e){return e instanceof pa?e.value:e.getRawValue()})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.controls.length<1||(this._forEachChild(function(e){return e._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach(function(t,n){e(t,n)})}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})}},{key:"_anyControls",value:function(e){return this.controls.some(function(t){return t.enabled&&e(t)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var e,t=o(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),n}(da),ma={provide:$i,useExisting:(0,s.Gpc)(function(){return ka})},ya=Promise.resolve(null),ka=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).submitted=!1,i._directives=[],i.ngSubmit=new s.vpe,i.form=new va({},Wi(e),Qi(r)),i}return h(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}},{key:"addControl",value:function(e){var t=this;ya.then(function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),ra(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)})}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;ya.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),ua(t._directives,e)})}},{key:"addFormGroup",value:function(e){var t=this;ya.then(function(){var n=t._findContainer(e.path),r=new va({});(function(e,t){aa(e,t)})(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}},{key:"removeFormGroup",value:function(e){var t=this;ya.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;ya.then(function(){n.form.get(e.path).setValue(t)})}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}}]),n}($i);return e.\u0275fac=function(t){return new(t||e)(s.Y36(ji,10),s.Y36(qi,10))},e.\u0275dir=s.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&s.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([ma]),s.qOj]}),e}(),wa={provide:Xi,useExisting:(0,s.Gpc)(function(){return _a})},ba=Promise.resolve(null),_a=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).control=new pa,o._registered=!1,o.update=new s.vpe,o._parent=e,o._setValidators(r),o._setAsyncValidators(i),o.valueAccessor=function(e,t){return t?(Array.isArray(t),t.forEach(function(e){e.constructor===Ui?n=e:Object.getPrototypeOf(e.constructor)===Pi?r=e:i=e}),i||r||n||null):null;var n,r,i}(0,a),o}return h(n,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?[].concat(u(this._parent.path),[this.name]):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){ra(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(e){var t=this;ba.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;ba.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})}}]),n}(Xi);return e.\u0275fac=function(t){return new(t||e)(s.Y36($i,9),s.Y36(ji,10),s.Y36(qi,10),s.Y36(Li,10))},e.\u0275dir=s.lG2({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[s._Bn([wa]),s.qOj,s.TTD]}),e}(),xa=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=s.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e}(),Ia={provide:Li,useExisting:(0,s.Gpc)(function(){return Ta}),multi:!0},Ta=function(){var e,t=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"writeValue",value:function(e){this.setProperty("value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}}]),n}(Pi);return t.\u0275fac=function(n){return(e||(e=s.n5z(t)))(n||t)},t.\u0275dir=s.lG2({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&s.NdJ("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},features:[s._Bn([Ia]),s.qOj]}),t}(),Ea=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({}),e}(),Sa={provide:ji,useExisting:(0,s.Gpc)(function(){return Ra}),multi:!0},Ra=function(){var e=function(){function e(){d(this,e),this._required=!1}return h(e,[{key:"required",get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&"false"!="".concat(e),this._onChange&&this._onChange()}},{key:"validate",value:function(e){return this.required?function(e){return Vi(e.value)?{required:!0}:null}(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=s.lG2({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&s.uIk("required",t.required?"":null)},inputs:{required:"required"},features:[s._Bn([Sa])]}),e}(),Ca={provide:ji,useExisting:(0,s.Gpc)(function(){return Aa}),multi:!0},Aa=function(){var e=function(){function e(){d(this,e),this._validator=Bi}return h(e,[{key:"ngOnChanges",value:function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return null==this.minlength?null:this._validator(e)}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){var e;this._validator=(e="number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10),function(t){return Vi(t.value)||null==(n=t.value)||"number"!=typeof n.length?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null;var n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=s.lG2({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&s.uIk("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[s._Bn([Ca]),s.TTD]}),e}(),Na=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[Ea]]}),e}(),Oa=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[Na]}),e}(),Da=["f"];function Pa(e,t){1&e&&(s.TgZ(0,"div",19),s._uU(1," Number of items sold is required. "),s.qZA())}function La(e,t){1&e&&(s.TgZ(0,"div",19),s._uU(1," Number of items must be greater than 0. "),s.qZA())}function Ma(e,t){1&e&&(s.TgZ(0,"div",19),s._uU(1," Amount is required and needs to be at least 1 characters long. "),s.qZA())}var Fa,Ua=function(){var e=function(){function e(){d(this,e)}return h(e,[{key:"ngOnInit",value:function(){}},{key:"processForm",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-shirt"]],viewQuery:function(e,t){var n;(1&e&&s.Gf(Da,5),2&e)&&(s.iGM(n=s.CRH())&&(t.savingsForm=n.first))},decls:29,vars:7,consts:[[1,"hero","is-info","is-bold"],[1,"hero-body"],[1,"container-title"],[1,"title"],[1,"section"],[1,"container"],[3,"ngSubmit"],["f","ngForm"],[1,"items"],["type","number","name","itemsSold","placeholder","Number of items sold","required","","minlength","1",1,"input",3,"ngModel","ngModelChange"],["itemsSoldInput","ngModel"],["class","help is-error",4,"ngIf"],[1,"amount"],["type","number","name","amount","placeholder","Dollar","required","","minlength","1",1,"input",3,"ngModel","ngModelChange"],["amountInput","ngModel"],[1,"description"],["type","text","name","description","placeholder","Description","minlength","1",1,"input",3,"ngModel","ngModelChange"],["descriptionInput","ngModel"],["type","submit",1,"button","is-danger","is-medium",3,"disabled"],[1,"help","is-error"]],template:function(e,t){if(1&e&&(s.TgZ(0,"section",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"h1",3),s._uU(4,"Shirt Tracker"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(5,"section",4),s.TgZ(6,"div",5),s.TgZ(7,"form",6,7),s.NdJ("ngSubmit",function(){return t.processForm()}),s.TgZ(9,"div",8),s.TgZ(10,"h2"),s._uU(11,"Number of items sold"),s.qZA(),s.TgZ(12,"input",9,10),s.NdJ("ngModelChange",function(e){return t.itemsSold=e}),s.qZA(),s.YNc(14,Pa,2,0,"div",11),s.YNc(15,La,2,0,"div",11),s.qZA(),s.TgZ(16,"div",12),s.TgZ(17,"h2"),s._uU(18,"Enter the amount sold"),s.qZA(),s.TgZ(19,"input",13,14),s.NdJ("ngModelChange",function(e){return t.amount=e}),s.qZA(),s.YNc(21,Ma,2,0,"div",11),s.qZA(),s.TgZ(22,"div",15),s.TgZ(23,"h2"),s._uU(24,"Enter the description of the sale"),s.qZA(),s.TgZ(25,"input",16,17),s.NdJ("ngModelChange",function(e){return t.description=e}),s.qZA(),s.qZA(),s.TgZ(27,"button",18),s._uU(28,"Submit"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){var n=s.MAs(13),r=s.MAs(20);s.xp6(12),s.Q6J("ngModel",t.itemsSold),s.xp6(2),s.Q6J("ngIf",n.invalid&&n.dirty),s.xp6(1),s.Q6J("ngIf",0===t.itemsSold),s.xp6(4),s.Q6J("ngModel",t.amount),s.xp6(2),s.Q6J("ngIf",r.invalid&&r.dirty),s.xp6(4),s.Q6J("ngModel",t.description),s.xp6(2),s.Q6J("disabled",null===t.amount||r.invalid||n.invalid||0===t.itemsSold)}},directives:[xa,na,ka,Ta,Ui,Ra,Aa,ta,_a,B],styles:[".amount[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.hero-body[_ngcontent-%COMP%]{height:132px}"]}),e}(),Va=[{path:"",pathMatch:"full",component:Ua},{path:"Shirt",component:Ua},{path:"History",component:Ai},{path:"Summary",component:(Fa=function(){function e(){d(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}(),Fa.\u0275fac=function(e){return new(e||Fa)},Fa.\u0275cmp=s.Xpm({type:Fa,selectors:[["app-summary"]],decls:2,vars:0,template:function(e,t){1&e&&(s.TgZ(0,"p"),s._uU(1,"summary works!"),s.qZA())},styles:[""]}),Fa)},{path:"**",redirectTo:"/Error",pathMatch:"full"},{path:"Error",component:Ci}],ja=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[wi.forRoot(Va)],wi]}),e}(),qa=function(){var e=function(){function e(){d(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-header"]],decls:11,vars:0,consts:[[1,"navbar","is-dark"],[1,"navbar-brand"],[1,"navbar-item"],[1,"navbar-menu"],[1,"navbar-start"],["routerLink","Shirt",1,"navbar-item"],["routerLink","History",1,"navbar-item"],["routerLink","Summary",1,"navbar-item"]],template:function(e,t){1&e&&(s.TgZ(0,"nav",0),s.TgZ(1,"div",1),s._UZ(2,"a",2),s.qZA(),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"a",5),s._uU(6,"Shirt Tracker"),s.qZA(),s.TgZ(7,"a",6),s._uU(8,"History"),s.qZA(),s.TgZ(9,"a",7),s._uU(10,"Summary"),s.qZA(),s.qZA(),s.qZA(),s.qZA())},directives:[si],styles:[""]}),e}(),Ba=function(){var e=function(){function e(){d(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-footer"]],decls:5,vars:0,consts:[[1,"footer"],[1,"container"],[1,"content","has-text-centered"]],template:function(e,t){1&e&&(s.TgZ(0,"footer",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"p"),s._uU(4," Made by Nick Rentschler "),s.qZA(),s.qZA(),s.qZA(),s.qZA())},styles:[""]}),e}(),Za=function(){var e=function e(){d(this,e),this.title="ShirtTracker"};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-root"]],decls:3,vars:0,template:function(e,t){1&e&&(s._UZ(0,"app-header"),s._UZ(1,"router-outlet"),s._UZ(2,"app-footer"))},directives:[qa,li,Ba],styles:[""]}),e}(),za=a(9748),Ha=a(8569),Ga=a(8934);function Ka(){return function(e){return e.lift(new Wa)}}var Wa=function(){function e(){d(this,e)}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Qa(e))}}]),e}(),Qa=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).hasPrev=!1,r}return h(n,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),n}(De.L),Ya=function(){function e(t,n){d(this,e),this.compare=t,this.keySelector=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Ja(e,this.compare,this.keySelector))}}]),e}(),Ja=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e)).keySelector=i,a.hasKey=!1,"function"==typeof r&&(a.compare=r),a}return h(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}(De.L);a(14);var $a,Xa=a(6986),eo=a(6304),to=a(7964),no=a(1947),ro=a(8678),io=a(5725),ao="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},oo={},uo=uo||{},so=ao||self;function co(){}function lo(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function fo(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ho="closure_uid_"+(1e9*Math.random()>>>0),po=0;function vo(e,t,n){return e.call.apply(e.bind,arguments)}function go(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function mo(e,t,n){return(mo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vo:go).apply(null,arguments)}function yo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ko(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function wo(){this.s=this.s,this.o=this.o}var bo={};wo.prototype.s=!1,wo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ho)&&e[ho]||(e[ho]=++po)}(this);delete bo[e]}},wo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var _o=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},xo=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Io(e){return Array.prototype.concat.apply([],arguments)}function To(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Eo(e){return/^[\s\xa0]*$/.test(e)}var So,Ro=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Co(e,t){return-1!=e.indexOf(t)}function Ao(e,t){return e<t?-1:e>t?1:0}e:{var No=so.navigator;if(No){var Oo=No.userAgent;if(Oo){So=Oo;break e}}So=""}function Do(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Po(e){var t={};for(var n in e)t[n]=e[n];return t}var Lo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mo(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Lo.length;a++)n=Lo[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Fo(e){return Fo[" "](e),e}Fo[" "]=co;var Uo,Vo,jo=Co(So,"Opera"),qo=Co(So,"Trident")||Co(So,"MSIE"),Bo=Co(So,"Edge"),Zo=Bo||qo,zo=Co(So,"Gecko")&&!(Co(So.toLowerCase(),"webkit")&&!Co(So,"Edge"))&&!(Co(So,"Trident")||Co(So,"MSIE"))&&!Co(So,"Edge"),Ho=Co(So.toLowerCase(),"webkit")&&!Co(So,"Edge");function Go(){var e=so.document;return e?e.documentMode:void 0}e:{var Ko="",Wo=(Vo=So,zo?/rv:([^\);]+)(\)|;)/.exec(Vo):Bo?/Edge\/([\d\.]+)/.exec(Vo):qo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vo):Ho?/WebKit\/(\S+)/.exec(Vo):jo?/(?:Version)[ \/]?(\S+)/.exec(Vo):void 0);if(Wo&&(Ko=Wo?Wo[1]:""),qo){var Qo=Go();if(null!=Qo&&Qo>parseFloat(Ko)){Uo=String(Qo);break e}}Uo=Ko}var Yo={},Jo=so.document&&qo&&(Go()||parseInt(Uo,10))||void 0,$o=function(){if(!so.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{so.addEventListener("test",co,t),so.removeEventListener("test",co,t)}catch(n){}return e}();function Xo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function eu(e,t){if(Xo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(zo){e:{try{Fo(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:tu[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&eu.Z.h.call(this)}}Xo.prototype.h=function(){this.defaultPrevented=!0},ko(eu,Xo);var tu={2:"touch",3:"pen",4:"mouse"};eu.prototype.h=function(){eu.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var nu="closure_listenable_"+(1e6*Math.random()|0),ru=0;function iu(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ru,this.ca=this.fa=!1}function au(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ou(e){this.src=e,this.g={},this.h=0}function uu(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=_o(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(au(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function su(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}ou.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=su(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new iu(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var cu="closure_lm_"+(1e6*Math.random()|0),lu={};function fu(e,t,n,r,i){if(r&&r.once)return du(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)fu(e,t[a],n,r,i);return null}return n=wu(n),e&&e[nu]?e.N(t,n,fo(r)?!!r.capture:!!r,i):hu(e,t,n,!1,r,i)}function hu(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=fo(i)?!!i.capture:!!i,u=yu(e);if(u||(e[cu]=u=new ou(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=mu;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)$o||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(gu(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function du(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)du(e,t[a],n,r,i);return null}return n=wu(n),e&&e[nu]?e.O(t,n,fo(r)?!!r.capture:!!r,i):hu(e,t,n,!0,r,i)}function pu(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)pu(e,t[a],n,r,i);else r=fo(r)?!!r.capture:!!r,n=wu(n),e&&e[nu]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=su(a=e.g[t],n,r,i))&&(au(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--))):e&&(e=yu(e))&&(t=e.g[t.toString()],e=-1,t&&(e=su(t,n,r,i)),(n=-1<e?t[e]:null)&&vu(n))}function vu(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[nu])uu(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(gu(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=yu(t))?(uu(n,e),0==n.h&&(n.src=null,t[cu]=null)):au(e)}}}function gu(e){return e in lu?lu[e]:lu[e]="on"+e}function mu(e,t){if(e.ca)e=!0;else{t=new eu(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&vu(e),e=n.call(r,t)}return e}function yu(e){return(e=e[cu])instanceof ou?e:null}var ku="__closure_events_fn_"+(1e9*Math.random()>>>0);function wu(e){return"function"==typeof e?e:(e[ku]||(e[ku]=function(t){return e.handleEvent(t)}),e[ku])}function bu(){wo.call(this),this.i=new ou(this),this.P=this,this.I=null}function _u(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Xo(t,e);else if(t instanceof Xo)t.target=t.target||e;else{var i=t;Mo(t=new Xo(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=xu(o,r,!0,t)&&i}if(i=xu(o=t.g=e,r,!0,t)&&i,i=xu(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=xu(o=t.g=n[a],r,!1,t)&&i}function xu(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&uu(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ko(bu,wo),bu.prototype[nu]=!0,bu.prototype.removeEventListener=function(e,t,n,r){pu(this,e,t,n,r)},bu.prototype.M=function(){if(bu.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)au(n[r]);delete t.g[e],t.h--}}this.I=null},bu.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},bu.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Iu=so.JSON.stringify;function Tu(){var e=Ou,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Eu,Su=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return h(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new Ru},function(e){return e.reset()}),Ru=function(){function e(){d(this,e),this.next=this.g=this.h=null}return h(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Cu(e){so.setTimeout(function(){throw e},0)}function Au(e,t){Eu||function(){var e=so.Promise.resolve(void 0);Eu=function(){e.then(Du)}}(),Nu||(Eu(),Nu=!0),Ou.add(e,t)}var Nu=!1,Ou=new(function(){function e(){d(this,e),this.h=this.g=null}return h(e,[{key:"add",value:function(e,t){var n=Su.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}());function Du(){for(var e;e=Tu();){try{e.h.call(e.g)}catch(n){Cu(n)}var t=Su;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Nu=!1}function Pu(e,t){bu.call(this),this.h=e||1,this.g=t||so,this.j=mo(this.kb,this),this.l=Date.now()}function Lu(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Mu(e,t,n){if("function"==typeof e)n&&(e=mo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=mo(e.handleEvent,e)}return 2147483647<Number(t)?-1:so.setTimeout(e,t||0)}function Fu(e){e.g=Mu(function(){e.g=null,e.i&&(e.i=!1,Fu(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ko(Pu,bu),($a=Pu.prototype).da=!1,$a.S=null,$a.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_u(this,"tick"),this.da&&(Lu(this),this.start()))}},$a.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$a.M=function(){Pu.Z.M.call(this),Lu(this),delete this.g};var Uu=function(e){p(r,e);var n=v(r);function r(e,t){var i;return d(this,r),(i=n.call(this)).m=e,i.j=t,i.h=null,i.i=!1,i.g=null,i}return h(r,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Fu(this)}},{key:"M",value:function(){t(_(r.prototype),"M",this).call(this),this.g&&(so.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),r}(wo);function Vu(e){wo.call(this),this.h=e,this.g={}}ko(Vu,wo);var ju=[];function qu(e,t,n,r){Array.isArray(n)||(n&&(ju[0]=n.toString()),n=ju);for(var i=0;i<n.length;i++){var a=fu(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Bu(e){Do(e.g,function(e,t){this.g.hasOwnProperty(t)&&vu(e)},e),e.g={}}function Zu(){this.g=!0}function zu(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Iu(n)}catch(u){return t}}(e,n)+(r?" "+r:"")})}Vu.prototype.M=function(){Vu.Z.M.call(this),Bu(this)},Vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zu.prototype.Aa=function(){this.g=!1},Zu.prototype.info=function(){};var Hu={},Gu=null;function Ku(){return Gu=Gu||new bu}function Wu(e){Xo.call(this,Hu.Ma,e)}function Qu(e){var t=Ku();_u(t,new Wu(t,e))}function Yu(e,t){Xo.call(this,Hu.STAT_EVENT,e),this.stat=t}function Ju(e){var t=Ku();_u(t,new Yu(t,e))}function $u(e,t){Xo.call(this,Hu.Na,e),this.size=t}function Xu(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return so.setTimeout(function(){e()},t)}Hu.Ma="serverreachability",ko(Wu,Xo),Hu.STAT_EVENT="statevent",ko(Yu,Xo),Hu.Na="timingevent",ko($u,Xo);var es={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ts={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ns(){}function rs(){}ns.prototype.h=null;var is,as={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function os(){Xo.call(this,"d")}function us(){Xo.call(this,"c")}function ss(){}function cs(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Vu(this),this.P=fs,this.W=new Pu(e=Zo?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ls}function ls(){this.i=null,this.g="",this.h=!1}ko(os,Xo),ko(us,Xo),ko(ss,ns),ss.prototype.g=function(){return new XMLHttpRequest},ss.prototype.i=function(){return{}},is=new ss;var fs=45e3,hs={},ds={};function ps(e,t,n){e.K=1,e.v=Fs(Ns(t)),e.s=n,e.U=!0,vs(e,null)}function vs(e,t){e.F=Date.now(),ks(e),e.A=Ns(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ys(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ls,e.g=Yc(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Uu(mo(e.Ia,e,e.g),e.O)),qu(e.V,e.g,"readystatechange",e.gb),t=e.H?Po(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Qu(1),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function gs(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function ms(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ys(e,n))==ds){4==t&&(e.o=4,Ju(14),i=!1),zu(e.j,e.m,null,"[Incomplete Response]");break}if(r==hs){e.o=4,Ju(15),zu(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}zu(e.j,e.m,r,null),Is(e,r)}gs(e)&&r!=ds&&r!=hs&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ju(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bc(t),t.L=!0,Ju(11))):(zu(e.j,e.m,n,"[Invalid Chunked Response]"),xs(e),_s(e))}function ys(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ds:(n=Number(t.substring(n,r)),isNaN(n)?hs:(r+=1)+n>t.length?ds:(t=t.substr(r,n),e.C=r+n,t))}function ks(e){e.Y=Date.now()+e.P,ws(e,e.P)}function ws(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Xu(mo(e.eb,e),t)}function bs(e){e.B&&(so.clearTimeout(e.B),e.B=null)}function _s(e){0==e.l.G||e.I||Hc(e.l,e)}function xs(e){bs(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Lu(e.W),Bu(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Is(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||nc(n.i,e)))if(n.I=e.N,!e.J&&nc(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;zc(n),Dc(n)}qc(n),Ju(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Xu(mo(n.ab,n),6e3));if(1>=tc(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Kc(n,11)}else if((e.J||n.g==e)&&zc(n),!Eo(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"==typeof s&&0<s&&(n.K=r=1.5*s,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Co(l,"spdy")||Co(l,"quic")||Co(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(rc(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Ms(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Qc(r,r.H?r.la:null,r.W),d.J){ic(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(bs(p),ks(p)),r.g=d}else jc(r);0<n.l.length&&Mc(n)}else"stop"!=a[0]&&"close"!=a[0]||Kc(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Kc(n,7):Oc(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Qu(4)}catch(a){}}function Ts(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(lo(e)||"string"==typeof e)xo(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(lo(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(lo(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Es(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Es)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ss(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Rs(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Rs(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Rs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}($a=cs.prototype).setTimeout=function(e){this.P=e},$a.gb=function(e){e=e.target;var t=this.L;t&&3==Sc(e)?t.l():this.Ia(e)},$a.Ia=function(e){try{if(e==this.g)e:{var t=Sc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Zo||this.g&&(this.h.h||this.g.ga()||Rc(this.g)))){this.I||4!=t||7==n||Qu(8==n||0>=r?3:2),bs(this);var i=this.g.ba();this.N=i;t:if(gs(this)){var a=Rc(this.g);e="";var o=a.length,u=4==Sc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){xs(this),_s(this);var s="";break t}this.h.i=new so.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Eo(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Ju(12),xs(this),_s(this);break e}zu(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Is(this,i)}this.U?(ms(this,t,s),Zo&&this.i&&3==t&&(qu(this.V,this.W,"tick",this.fb),this.W.start())):(zu(this.j,this.m,s,null),Is(this,s)),4==t&&xs(this),this.i&&!this.I&&(4==t?Hc(this.l,this):(this.i=!1,ks(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Ju(12)):(this.o=0,Ju(13)),xs(this),_s(this)}}}catch(t){}},$a.fb=function(){if(this.g){var e=Sc(this.g),t=this.g.ga();this.C<t.length&&(bs(this),ms(this,e,t),this.i&&4!=e&&ks(this))}},$a.cancel=function(){this.I=!0,xs(this)},$a.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Qu(3),Ju(17)),xs(this),this.o=2,_s(this)):ws(this,this.Y-e)},($a=Es.prototype).R=function(){Ss(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},$a.T=function(){return Ss(this),this.g.concat()},$a.get=function(e,t){return Rs(this.h,e)?this.h[e]:t},$a.set=function(e,t){Rs(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},$a.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Cs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function As(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof As){this.g=void 0!==t?t:e.g,Os(this,e.j),this.s=e.s,Ds(this,e.i),Ps(this,e.m),this.l=e.l,t=e.h;var n=new Gs;n.i=t.i,t.g&&(n.g=new Es(t.g),n.h=t.h),Ls(this,n),this.o=e.o}else e&&(n=String(e).match(Cs))?(this.g=!!t,Os(this,n[1]||"",!0),this.s=Us(n[2]||""),Ds(this,n[3]||"",!0),Ps(this,n[4]),this.l=Us(n[5]||"",!0),Ls(this,n[6]||"",!0),this.o=Us(n[7]||"")):(this.g=!!t,this.h=new Gs(null,this.g))}function Ns(e){return new As(e)}function Os(e,t,n){e.j=n?Us(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ds(e,t,n){e.i=n?Us(t,!0):t}function Ps(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ls(e,t,n){t instanceof Gs?(e.h=t,function(e,t){t&&!e.j&&(Ks(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ws(this,t),Ys(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Vs(t,zs)),e.h=new Gs(t,e.g))}function Ms(e,t,n){e.h.set(t,n)}function Fs(e){return Ms(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Us(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vs(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,js),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function js(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}As.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Vs(t,qs,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Vs(t,qs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vs(n,"/"==n.charAt(0)?Zs:Bs,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Vs(n,Hs)),e.join("")};var qs=/[#\/\?@]/g,Bs=/[#\?:]/g,Zs=/[#\?]/g,zs=/[#\?@]/g,Hs=/#/g;function Gs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ks(e){e.g||(e.g=new Es,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ws(e,t){Ks(e),t=Js(e,t),Rs(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Rs((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ss(e)))}function Qs(e,t){return Ks(e),t=Js(e,t),Rs(e.g.h,t)}function Ys(e,t,n){Ws(e,t),0<n.length&&(e.i=null,e.g.set(Js(e,t),To(n)),e.h+=n.length)}function Js(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function $s(e){this.l=e||Xs,e=so.PerformanceNavigationTiming?0<(e=so.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(so.g&&so.g.Ea&&so.g.Ea()&&so.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}($a=Gs.prototype).add=function(e,t){Ks(this),this.i=null,e=Js(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},$a.forEach=function(e,t){Ks(this),this.g.forEach(function(n,r){xo(n,function(n){e.call(t,n,r,this)},this)},this)},$a.T=function(){Ks(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},$a.R=function(e){Ks(this);var t=[];if("string"==typeof e)Qs(this,e)&&(t=Io(t,this.g.get(Js(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Io(t,e[n])}return t},$a.set=function(e,t){return Ks(this),this.i=null,Qs(this,e=Js(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},$a.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},$a.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Xs=10;function ec(e){return!!e.h||!!e.g&&e.g.size>=e.j}function tc(e){return e.h?1:e.g?e.g.size:0}function nc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function rc(e,t){e.g?e.g.add(t):e.h=t}function ic(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ac(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=o(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return To(e.i)}function oc(){}function uc(){this.g=new oc}function sc(e,t,n){var r=n||"";try{Ts(e,function(e,n){var i=e;fo(e)&&(i=Iu(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function cc(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function lc(e){this.l=e.$b||null,this.j=e.ib||!1}function fc(e,t){bu.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=hc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$s.prototype.cancel=function(){if(this.i=ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=o(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},oc.prototype.stringify=function(e){return so.JSON.stringify(e,void 0)},oc.prototype.parse=function(e){return so.JSON.parse(e,void 0)},ko(lc,ns),lc.prototype.g=function(){return new fc(this.l,this.j)},lc.prototype.i=function(e){return function(){return e}}({}),ko(fc,bu);var hc=0;function dc(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function pc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,vc(e)}function vc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}($a=fc.prototype).open=function(e,t){if(this.readyState!=hc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,vc(this)},$a.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||so).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},$a.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pc(this)),this.readyState=hc},$a.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,vc(this)),this.g&&(this.readyState=3,vc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==so.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dc(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},$a.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?pc(this):vc(this),3==this.readyState&&dc(this)}},$a.Ua=function(e){this.g&&(this.response=this.responseText=e,pc(this))},$a.Ta=function(e){this.g&&(this.response=e,pc(this))},$a.ha=function(){this.g&&pc(this)},$a.setRequestHeader=function(e,t){this.v.append(e,t)},$a.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},$a.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(fc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var gc=so.JSON.parse;function mc(e){bu.call(this),this.headers=new Es,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yc,this.K=this.L=!1}ko(mc,bu);var yc="",kc=/^https?$/i,wc=["POST","PUT"];function bc(e){return"content-type"==e.toLowerCase()}function _c(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,xc(e),Tc(e)}function xc(e){e.D||(e.D=!0,_u(e,"complete"),_u(e,"error"))}function Ic(e){if(e.h&&void 0!==uo&&(!e.C[1]||4!=Sc(e)||2!=e.ba()))if(e.v&&4==Sc(e))Mu(e.Fa,0,e);else if(_u(e,"readystatechange"),4==Sc(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Cs)[1]||null;if(!a&&so.self&&so.self.location){var o=so.self.location.protocol;a=o.substr(0,o.length-1)}i=!kc.test(a?a.toLowerCase():"")}t=i}if(t)_u(e,"complete"),_u(e,"success");else{e.m=6;try{var u=2<Sc(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",xc(e)}}finally{Tc(e)}}}function Tc(e,t){if(e.g){Ec(e);var n=e.g,r=e.C[0]?co:null;e.g=null,e.C=null,t||_u(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ec(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(so.clearTimeout(e.A),e.A=null)}function Sc(e){return e.g?e.g.readyState:0}function Rc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case yc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Cc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Do(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Ms(e,t,n))}function Ac(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Nc(e){this.za=0,this.l=[],this.h=new Zu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ac("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ac("baseRetryDelayMs",5e3,e),this.$a=Ac("retryDelaySeedMs",1e4,e),this.Ya=Ac("forwardChannelMaxRetries",2,e),this.ra=Ac("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new $s(e&&e.concurrentRequestLimit),this.Ca=new uc,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Oc(e){if(Pc(e),3==e.G){var t=e.V++,n=Ns(e.F);Ms(n,"SID",e.J),Ms(n,"RID",t),Ms(n,"TYPE","terminate"),Uc(e,n),(t=new cs(e,e.h,t,void 0)).K=2,t.v=Fs(Ns(n)),n=!1,so.navigator&&so.navigator.sendBeacon&&(n=so.navigator.sendBeacon(t.v.toString(),"")),!n&&so.Image&&((new Image).src=t.v,n=!0),n||(t.g=Yc(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ks(t)}Wc(e)}function Dc(e){e.g&&(Bc(e),e.g.cancel(),e.g=null)}function Pc(e){Dc(e),e.u&&(so.clearTimeout(e.u),e.u=null),zc(e),e.i.cancel(),e.m&&("number"==typeof e.m&&so.clearTimeout(e.m),e.m=null)}function Lc(e,t){e.l.push(new(function(){return function e(t,n){d(this,e),this.h=t,this.g=n}}())(e.Za++,t)),3==e.G&&Mc(e)}function Mc(e){ec(e.i)||e.m||(e.m=!0,Au(e.Ha,e),e.C=0)}function Fc(e,t){var n;n=t?t.m:e.V++;var r=Ns(e.F);Ms(r,"SID",e.J),Ms(r,"RID",n),Ms(r,"AID",e.U),Uc(e,r),e.o&&e.s&&Cc(r,e.o,e.s),n=new cs(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Vc(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),rc(e.i,n),ps(n,r,t)}function Uc(e,t){e.j&&Ts({},function(e,n){Ms(t,n,e)})}function Vc(e,t,n){n=Math.min(e.l.length,n);var r=e.j?mo(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{sc(l,o,"req"+c+"_")}catch(Sl){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function jc(e){e.g||e.u||(e.Y=1,Au(e.Ga,e),e.A=0)}function qc(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Xu(mo(e.Ga,e),Gc(e,e.A)),e.A++,0))}function Bc(e){null!=e.B&&(so.clearTimeout(e.B),e.B=null)}function Zc(e){e.g=new cs(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ns(e.oa);Ms(t,"RID","rpc"),Ms(t,"SID",e.J),Ms(t,"CI",e.N?"0":"1"),Ms(t,"AID",e.U),Uc(e,t),Ms(t,"TYPE","xmlhttp"),e.o&&e.s&&Cc(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Fs(Ns(t)),n.s=null,n.U=!0,vs(n,e)}function zc(e){null!=e.v&&(so.clearTimeout(e.v),e.v=null)}function Hc(e,t){var n=null;if(e.g==t){zc(e),Bc(e),e.g=null;var r=2}else{if(!nc(e.i,t))return;n=t.D,ic(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;_u(r=Ku(),new $u(r,n,t,i)),Mc(e)}else jc(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(tc(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Xu(mo(e.Ha,e,t),Gc(e,e.C)),e.C++,0)))}(e,t)||2==r&&qc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Kc(e,5);break;case 4:Kc(e,10);break;case 3:Kc(e,6);break;default:Kc(e,2)}}function Gc(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Kc(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=mo(e.jb,e);n||(n=new As("//www.google.com/images/cleardot.gif"),so.location&&"http"==so.location.protocol||Os(n,"https"),Fs(n)),function(e,t){var n=new Zu;if(so.Image){var r=new Image;r.onload=yo(cc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=yo(cc,n,r,"TestLoadImage: error",!1,t),r.onabort=yo(cc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=yo(cc,n,r,"TestLoadImage: timeout",!1,t),so.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ju(2);e.G=0,e.j&&e.j.va(t),Wc(e),Pc(e)}function Wc(e){e.G=0,e.I=-1,e.j&&(0==ac(e.i).length&&0==e.l.length||(e.i.i.length=0,To(e.l),e.l.length=0),e.j.ua())}function Qc(e,t,n){var r=function(e){return e instanceof As?Ns(e):new As(e,void 0)}(n);if(""!=r.i)t&&Ds(r,t+"."+r.i),Ps(r,r.m);else{var i=so.location;r=function(e,t,n,r){var i=new As(null,void 0);return e&&Os(i,e),t&&Ds(i,t),n&&Ps(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Do(e.aa,function(e,t){Ms(r,t,e)}),n=e.sa,(t=e.D)&&n&&Ms(r,t,n),Ms(r,"VER",e.ma),Uc(e,r),r}function Yc(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new mc(n&&e.Ba&&!e.qa?new lc({ib:!0}):e.qa)).L=e.H,t}function Jc(){}function $c(){if(qo&&!(10<=Number(Jo)))throw Error("Environmental error: no available transport.")}function Xc(e,t){bu.call(this),this.g=new Nc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Eo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Eo(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new nl(this)}function el(e){os.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function tl(){us.call(this),this.status=1}function nl(e){this.g=e}($a=mc.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():is.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:is),this.g.onreadystatechange=mo(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void _c(this,a)}e=n||"";var i=new Es(this.headers);r&&Ts(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=bc,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=so.FormData&&e instanceof so.FormData,!(0<=_o(wc,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ec(this),0<this.B&&((this.K=function(e){return qo&&function(){return e=Yo,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=Ro(String(Uo)).split("."),n=Ro("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Ao(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Ao(0==a[2].length,0==o[2].length)||Ao(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mo(this.pa,this)):this.A=Mu(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){_c(this,a)}},$a.pa=function(){void 0!==uo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_u(this,"timeout"),this.abort(8))},$a.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_u(this,"complete"),_u(this,"abort"),Tc(this))},$a.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tc(this,!0)),mc.Z.M.call(this)},$a.Fa=function(){this.s||(this.F||this.v||this.l?Ic(this):this.cb())},$a.cb=function(){Ic(this)},$a.ba=function(){try{return 2<Sc(this)?this.g.status:-1}catch(Vo){return-1}},$a.ga=function(){try{return this.g?this.g.responseText:""}catch(Vo){return""}},$a.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),gc(t)}},$a.Da=function(){return this.m},$a.La=function(){return"string"==typeof this.j?this.j:String(this.j)},($a=Nc.prototype).ma=8,$a.G=1,$a.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},$a.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new cs(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Mo(n=Po(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Vc(this,t,r),Ms(i=Ns(this.F),"RID",e),Ms(i,"CVER",22),this.D&&Ms(i,"X-HTTP-Session-Id",this.D),Uc(this,i),this.o&&n&&Cc(i,this.o,n),rc(this.i,t),this.Ra&&Ms(i,"TYPE","init"),this.ja?(Ms(i,"$req",r),Ms(i,"SID","null"),t.$=!0,ps(t,i,null)):ps(t,i,r),this.G=2}}else 3==this.G&&(e?Fc(this,e):0==this.l.length||ec(this.i)||Fc(this))},$a.Ga=function(){if(this.u=null,Zc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Xu(mo(this.bb,this),e)}},$a.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ju(10),Dc(this),Zc(this))},$a.ab=function(){null!=this.v&&(this.v=null,Dc(this),qc(this),Ju(19))},$a.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ju(2)):(this.h.info("Failed to ping google.com"),Ju(1))},($a=Jc.prototype).xa=function(){},$a.wa=function(){},$a.va=function(){},$a.ua=function(){},$a.Oa=function(){},$c.prototype.g=function(e,t){return new Xc(e,t)},ko(Xc,bu),Xc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Au(mo(e.hb,e,t))),Ju(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Qc(e,null,e.W),Mc(e)},Xc.prototype.close=function(){Oc(this.g)},Xc.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Lc(this.g,t)}else this.v?((t={}).__data__=Iu(e),Lc(this.g,t)):Lc(this.g,e)},Xc.prototype.M=function(){this.g.j=null,delete this.j,Oc(this.g),delete this.g,Xc.Z.M.call(this)},ko(el,os),ko(tl,us),ko(nl,Jc),nl.prototype.xa=function(){_u(this.g,"a")},nl.prototype.wa=function(e){_u(this.g,new el(e))},nl.prototype.va=function(e){_u(this.g,new tl(e))},nl.prototype.ua=function(){_u(this.g,"b")},$c.prototype.createWebChannel=$c.prototype.g,Xc.prototype.send=Xc.prototype.u,Xc.prototype.open=Xc.prototype.m,Xc.prototype.close=Xc.prototype.close,es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,ts.COMPLETE="complete",rs.EventType=as,as.OPEN="a",as.CLOSE="b",as.ERROR="c",as.MESSAGE="d",bu.prototype.listen=bu.prototype.N,mc.prototype.listenOnce=mc.prototype.O,mc.prototype.getLastError=mc.prototype.La,mc.prototype.getLastErrorCode=mc.prototype.Da,mc.prototype.getStatus=mc.prototype.ba,mc.prototype.getResponseJson=mc.prototype.Qa,mc.prototype.getResponseText=mc.prototype.ga,mc.prototype.send=mc.prototype.ea;var rl=oo.createWebChannelTransport=function(){return new $c},il=oo.getStatEventTarget=function(){return Ku()},al=oo.ErrorCode=es,ol=oo.EventType=ts,ul=oo.Event=Hu,sl=oo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cl=oo.FetchXmlHttpFactory=lc,ll=oo.WebChannel=rs,fl=oo.XhrIo=mc,hl=function(){function e(t){d(this,e),this.uid=t}return h(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();hl.UNAUTHENTICATED=new hl(null),hl.GOOGLE_CREDENTIALS=new hl("google-credentials-uid"),hl.FIRST_PARTY=new hl("first-party-uid"),hl.MOCK_USER=new hl("mock-user");var dl="9.4.0",pl=new ro.Yd("@firebase/firestore");function vl(){return pl.logLevel}function gl(e){if(pl.logLevel<=ro.in.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(kl);pl.debug.apply(pl,["Firestore (".concat(dl,"): ").concat(e)].concat(u(i)))}}function ml(e){if(pl.logLevel<=ro.in.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(kl);pl.error.apply(pl,["Firestore (".concat(dl,"): ").concat(e)].concat(u(i)))}}function yl(e){if(pl.logLevel<=ro.in.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(kl);pl.warn.apply(pl,["Firestore (".concat(dl,"): ").concat(e)].concat(u(i)))}}function kl(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function wl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(dl,") INTERNAL ASSERTION FAILED: ")+e;throw ml(t),new Error(t)}function bl(e,t){e||wl()}function _l(e,t){return e}var xl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Il=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return n}(y(Error)),Tl=function e(){var t=this;d(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},El=function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer ".concat(t)},Sl=function(){function e(){d(this,e)}return h(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(hl.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),Rl=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return h(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Cl=function(){function e(t){d(this,e),this.t=t,this.currentUser=hl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return h(e,[{key:"start",value:function(e,t){var n=this,r=this,i=this.i,a=function(e){return n.i!==i?(i=n.i,t(e)):Promise.resolve()},o=new Tl;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new Tl,e.enqueueRetryable(function(){return a(n.currentUser)})};var u=function(){var t=o;e.enqueueRetryable((0,eo.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(r.currentUser);case 4:case"end":return e.stop()}},e)})))},s=function(e){gl("FirebaseCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit(function(e){return s(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(gl("FirebaseCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Tl)}},0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(gl("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(bl("string"==typeof n.accessToken),new El(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return bl(null===e||"string"==typeof e),new hl(e)}}]),e}(),Al=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=hl.FIRST_PARTY}return h(e,[{key:"authHeaders",get:function(){var e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}]),e}(),Nl=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r}return h(e,[{key:"getToken",value:function(){return Promise.resolve(new Al(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(hl.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ol=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.g(e)},this.p=function(e){return n.writeSequenceNumber(e)})}return h(e,[{key:"g",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.p&&this.p(e),e}}]),e}();function Dl(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ol.T=-1;var Pl=function(){function e(){d(this,e)}return h(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Dl(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ll(e,t){return e<t?-1:e>t?1:0}function Ml(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function Fl(e){return e+"\0"}var Ul=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Il(xl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Il(xl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Il(xl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Il(xl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return h(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ll(this.nanoseconds,e.nanoseconds):Ll(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Vl=function(){function e(t){d(this,e),this.timestamp=t}return h(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ul(0,0))}}]),e}();function jl(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ql(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bl(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Zl=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&wl(),void 0===r?r=t.length-n:r>t.length-n&&wl(),this.segments=t,this.offset=n,this.len=r}return h(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),zl=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Il(xl.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,u(s.split("/").filter(function(e){return e.length>0})))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zl),Hl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gl=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Hl.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Il(xl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Il(xl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Il(xl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Il(xl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zl),Kl=function(){function e(t){d(this,e),this.fields=t,t.sort(Gl.comparator)}return h(e,[{key:"covers",value:function(e){var t,n=o(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ml(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}]),e}(),Wl=function(){var e=function(){function e(t){d(this,e),this.binaryString=t}return h(e,[{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ll(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();return e.EMPTY_BYTE_STRING=new e(""),e}(),Ql=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yl(e){if(bl(!!e),"string"==typeof e){var t=0,n=Ql.exec(e);if(bl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Jl(e.seconds),nanos:Jl(e.nanos)}}function Jl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $l(e){return"string"==typeof e?Wl.fromBase64String(e):Wl.fromUint8Array(e)}function Xl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ef(e){var t=e.mapValue.fields.__previous_value__;return Xl(t)?ef(t):t}function tf(e){var t=Yl(e.mapValue.fields.__local_write_time__.timestampValue);return new Ul(t.seconds,t.nanos)}function nf(e){return null==e}function rf(e){return 0===e&&1/e==-1/0}function af(e){return"number"==typeof e&&Number.isInteger(e)&&!rf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var of=function(){function e(t){d(this,e),this.path=t}return h(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===zl.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(zl.fromString(t))}},{key:"fromName",value:function(t){return new e(zl.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return zl.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new zl(t.slice()))}}]),e}();function uf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xl(e)?4:10:wl()}function sf(e,t){var n=uf(e);if(n!==uf(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tf(e).isEqual(tf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Yl(e.timestampValue),r=Yl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $l(e.bytesValue).isEqual($l(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jl(e.geoPointValue.latitude)===Jl(t.geoPointValue.latitude)&&Jl(e.geoPointValue.longitude)===Jl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jl(e.integerValue)===Jl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Jl(e.doubleValue),r=Jl(t.doubleValue);return n===r?rf(n)===rf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ml(e.arrayValue.values||[],t.arrayValue.values||[],sf);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jl(n)!==jl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sf(n[i],r[i])))return!1;return!0}(e,t);default:return wl()}}function cf(e,t){return void 0!==(e.values||[]).find(function(e){return sf(e,t)})}function lf(e,t){var n=uf(e),r=uf(t);if(n!==r)return Ll(n,r);switch(n){case 0:return 0;case 1:return Ll(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Jl(e.integerValue||e.doubleValue),r=Jl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ff(e.timestampValue,t.timestampValue);case 4:return ff(tf(e),tf(t));case 5:return Ll(e.stringValue,t.stringValue);case 6:return function(e,t){var n=$l(e),r=$l(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ll(n[i],r[i]);if(0!==a)return a}return Ll(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ll(Jl(e.latitude),Jl(t.latitude));return 0!==n?n:Ll(Jl(e.longitude),Jl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=lf(n[i],r[i]);if(a)return a}return Ll(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ll(r[o],a[o]);if(0!==u)return u;var s=lf(n[r[o]],i[a[o]]);if(0!==s)return s}return Ll(r.length,a.length)}(e.mapValue,t.mapValue);default:throw wl()}}function ff(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ll(e,t);var n=Yl(e),r=Yl(t),i=Ll(n.seconds,r.seconds);return 0!==i?i:Ll(n.nanos,r.nanos)}function hf(e){return df(e)}function df(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Yl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?$l(e.bytesValue).toBase64():"referenceValue"in e?of.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=o(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=df(a)}}catch(u){i.e(u)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=o(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(df(e.fields[a]))}}catch(u){i.e(u)}finally{i.f()}return n+"}"}(e.mapValue):wl();var t}function pf(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vf(e){return!!e&&"integerValue"in e}function gf(e){return!!e&&"arrayValue"in e}function mf(e){return!!e&&"nullValue"in e}function yf(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function kf(e){return!!e&&"mapValue"in e}function wf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ql(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=wf(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=wf(e.arrayValue.values[r]);return n}return Object.assign({},e)}var bf=function(){function e(t){d(this,e),this.value=t}return h(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!kf(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wf(t)}},{key:"setAll",value:function(e){var t=this,n=Gl.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=wf(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return sf(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];kf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ql(t,function(t,n){return e[t]=n});var r,i=o(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(u){i.e(u)}finally{i.f()}}},{key:"clone",value:function(){return new e(wf(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function _f(e){var t=[];return ql(e.fields,function(e,n){var r=new Gl([e]);if(kf(n)){var i=_f(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,u=o(i);try{for(u.s();!(a=u.n()).done;){var s=a.value;t.push(r.child(s))}}catch(c){u.e(c)}finally{u.f()}}}else t.push(r)}),new Kl(t)}var xf=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return h(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bf.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bf.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Vl.min(),bf.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,bf.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,bf.empty(),2)}}]),e}(),If=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.A=null};function Tf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new If(e,t,n,r,i,a,o)}function Ef(e){var t=_l(e);if(null===t.A){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return function(e){return e.field.canonicalString()+e.op.toString()+hf(e.value)}(e)}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return function(e){return e.field.canonicalString()+e.dir}(e)}).join(","),nf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Vf(t.startAt)),t.endAt&&(n+="|ub:",n+=Vf(t.endAt)),t.A=n}return t.A}function Sf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!qf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if((i=e.filters[r]).op!==(a=t.filters[r]).op||!i.field.isEqual(a.field)||!sf(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zf(e.startAt,t.startAt)&&Zf(e.endAt,t.endAt)}function Rf(e){return of.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Cf=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(lf(t,this.value)):null!==t&&uf(this.value)===uf(t)&&this.P(lf(t,this.value))}},{key:"P",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wl()}}},{key:"v",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new Af(e,t,r):"array-contains"===t?new Pf(e,r):"in"===t?new Lf(e,r):"not-in"===t?new Mf(e,r):"array-contains-any"===t?new Ff(e,r):new n(e,t,r)}},{key:"R",value:function(e,t,n){return"in"===t?new Nf(e,n):new Of(e,n)}}]),n}(function(){return function e(){d(this,e)}}()),Af=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=of.fromName(i.referenceValue),a}return h(n,[{key:"matches",value:function(e){var t=of.comparator(e.key,this.key);return this.P(t)}}]),n}(Cf),Nf=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Df(0,r),i}return h(n,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(Cf),Of=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Df(0,r),i}return h(n,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(Cf);function Df(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return of.fromName(e.referenceValue)})}var Pf=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return gf(t)&&cf(t.arrayValue,this.value)}}]),n}(Cf),Lf=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&cf(this.value.arrayValue,t)}}]),n}(Cf),Mf=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return h(n,[{key:"matches",value:function(e){if(cf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!cf(this.value.arrayValue,t)}}]),n}(Cf),Ff=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return h(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!gf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return cf(t.value.arrayValue,e)})}}]),n}(Cf),Uf=function e(t,n){d(this,e),this.position=t,this.before=n};function Vf(e){return"".concat(e.before?"b":"a",":").concat(e.position.map(function(e){return hf(e)}).join(","))}var jf=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n};function qf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Bf(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?of.comparator(of.fromName(o.referenceValue),n.key):lf(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Zf(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!sf(e.position[n],t.position[n]))return!1;return!0}var zf=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.V=null,this.S=null};function Hf(e,t,n,r,i,a,o,u){return new zf(e,t,n,r,i,a,o,u)}function Gf(e){return new zf(e)}function Kf(e){return!nf(e.limit)&&"F"===e.limitType}function Wf(e){return!nf(e.limit)&&"L"===e.limitType}function Qf(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Yf(e){var t,n=o(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.v())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Jf(e){return null!==e.collectionGroup}function $f(e){var t=_l(e);if(null===t.V){t.V=[];var n=Yf(t),r=Qf(t);if(null!==n&&null===r)n.isKeyField()||t.V.push(new jf(n)),t.V.push(new jf(Gl.keyField(),"asc"));else{var i,a=!1,u=o(t.explicitOrderBy);try{for(u.s();!(i=u.n()).done;){var s=i.value;t.V.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){u.e(l)}finally{u.f()}if(!a){var c=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new jf(Gl.keyField(),c))}}}return t.V}function Xf(e){var t=_l(e);if(!t.S)if("F"===t.limitType)t.S=Tf(t.path,t.collectionGroup,$f(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=o($f(t));try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(new jf(a.field,"desc"===a.dir?"asc":"desc"))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Uf(t.endAt.position,!t.endAt.before):null,s=t.startAt?new Uf(t.startAt.position,!t.startAt.before):null;t.S=Tf(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.S}function eh(e,t,n){return new zf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function th(e,t){return Sf(Xf(e),Xf(t))&&e.limitType===t.limitType}function nh(e){return"".concat(Ef(Xf(e)),"|lt:").concat(e.limitType)}function rh(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(hf(t.value));var t}).join(", "),"]")),nf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)}).join(", "),"]")),e.startAt&&(t+=", startAt: "+Vf(e.startAt)),e.endAt&&(t+=", endAt: "+Vf(e.endAt)),"Target(".concat(t,")")}(Xf(e)),"; limitType=").concat(e.limitType,")")}function ih(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):of.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=o(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=o(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!Bf(e.startAt,$f(e),t)||e.endAt&&Bf(e.endAt,$f(e),t))}(e,t)}function ah(e){return function(t,n){var r,i=!1,a=o($f(e));try{for(a.s();!(r=a.n()).done;){var u=r.value,s=oh(u,t,n);if(0!==s)return s;i=i||u.field.isKeyField()}}catch(c){a.e(c)}finally{a.f()}return 0}}function oh(e,t,n){var r=e.field.isKeyField()?of.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?lf(r,i):wl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return wl()}}function uh(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rf(t)?"-0":t}}function sh(e){return{integerValue:""+e}}function ch(e,t){return af(t)?sh(t):uh(e,t)}var lh=function e(){d(this,e),this._=void 0};function fh(e,t,n){return e instanceof ph?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof vh?gh(e,t):e instanceof mh?yh(e,t):function(e,t){var n=dh(e,t),r=wh(n)+wh(e.C);return vf(n)&&vf(e.C)?sh(r):uh(e.N,r)}(e,t)}function hh(e,t,n){return e instanceof vh?gh(e,t):e instanceof mh?yh(e,t):n}function dh(e,t){return e instanceof kh?vf(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var ph=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(lh),vh=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return n}(lh);function gh(e,t){var n,r=bh(t),i=o(e.elements);try{var a=function(){var e=n.value;r.some(function(t){return sf(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}return{arrayValue:{values:r}}}var mh=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return n}(lh);function yh(e,t){var n,r=bh(t),i=o(e.elements);try{var a=function(){var e=n.value;r=r.filter(function(t){return!sf(t,e)})};for(i.s();!(n=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}return{arrayValue:{values:r}}}var kh=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).N=e,i.C=r,i}return n}(lh);function wh(e){return Jl(e.integerValue||e.doubleValue)}function bh(e){return gf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var _h=function e(t,n){d(this,e),this.field=t,this.transform=n},xh=function e(t,n){d(this,e),this.version=t,this.transformResults=n},Ih=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return h(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Th(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Eh=function e(){d(this,e)};function Sh(e,t,n){e instanceof Oh?function(e,t,n){var r=e.value.clone(),i=Lh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dh?function(e,t,n){if(Th(e.precondition,t)){var r=Lh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ph(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Rh(e,t,n){e instanceof Oh?function(e,t,n){if(Th(e.precondition,t)){var r=e.value.clone(),i=Mh(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Nh(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Dh?function(e,t,n){if(Th(e.precondition,t)){var r=Mh(e.fieldTransforms,n,t),i=t.data;i.setAll(Ph(e)),i.setAll(r),t.convertToFoundDocument(Nh(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Th(e.precondition,t)&&t.convertToNoDocument(Vl.min())}(e,t)}function Ch(e,t){var n,r=null,i=o(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,u=t.data.field(a.field),s=dh(a.transform,u||null);null!=s&&(null==r&&(r=bf.empty()),r.set(a.field,s))}}catch(c){i.e(c)}finally{i.f()}return r||null}function Ah(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ml(e,t,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vh&&t instanceof vh||e instanceof mh&&t instanceof mh?Ml(e.elements,t.elements,sf):e instanceof kh&&t instanceof kh?sf(e.C,t.C):e instanceof ph&&t instanceof ph}(e.transform,t.transform)}(e,t)})}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Nh(e){return e.isFoundDocument()?e.version:Vl.min()}var Oh=function(e){p(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return n}(Eh),Dh=function(e){p(n,e);var t=v(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return n}(Eh);function Ph(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function Lh(e,t,n){var r=new Map;bl(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,hh(o,u,n[i]))}return r}function Mh(e,t,n){var r,i=new Map,a=o(e);try{for(a.s();!(r=a.n()).done;){var u=r.value,s=u.transform,c=n.data.field(u.field);i.set(u.field,fh(s,c,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Fh,Uh,Vh=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return n}(Eh),jh=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return n}(Eh),qh=function e(t){d(this,e),this.count=t};function Bh(e){switch(e){default:return wl();case xl.CANCELLED:case xl.UNKNOWN:case xl.DEADLINE_EXCEEDED:case xl.RESOURCE_EXHAUSTED:case xl.INTERNAL:case xl.UNAVAILABLE:case xl.UNAUTHENTICATED:return!1;case xl.INVALID_ARGUMENT:case xl.NOT_FOUND:case xl.ALREADY_EXISTS:case xl.PERMISSION_DENIED:case xl.FAILED_PRECONDITION:case xl.ABORTED:case xl.OUT_OF_RANGE:case xl.UNIMPLEMENTED:case xl.DATA_LOSS:return!0}}function Zh(e){if(void 0===e)return ml("GRPC error has no .code"),xl.UNKNOWN;switch(e){case Fh.OK:return xl.OK;case Fh.CANCELLED:return xl.CANCELLED;case Fh.UNKNOWN:return xl.UNKNOWN;case Fh.DEADLINE_EXCEEDED:return xl.DEADLINE_EXCEEDED;case Fh.RESOURCE_EXHAUSTED:return xl.RESOURCE_EXHAUSTED;case Fh.INTERNAL:return xl.INTERNAL;case Fh.UNAVAILABLE:return xl.UNAVAILABLE;case Fh.UNAUTHENTICATED:return xl.UNAUTHENTICATED;case Fh.INVALID_ARGUMENT:return xl.INVALID_ARGUMENT;case Fh.NOT_FOUND:return xl.NOT_FOUND;case Fh.ALREADY_EXISTS:return xl.ALREADY_EXISTS;case Fh.PERMISSION_DENIED:return xl.PERMISSION_DENIED;case Fh.FAILED_PRECONDITION:return xl.FAILED_PRECONDITION;case Fh.ABORTED:return xl.ABORTED;case Fh.OUT_OF_RANGE:return xl.OUT_OF_RANGE;case Fh.UNIMPLEMENTED:return xl.UNIMPLEMENTED;case Fh.DATA_LOSS:return xl.DATA_LOSS;default:return wl()}}(Uh=Fh||(Fh={}))[Uh.OK=0]="OK",Uh[Uh.CANCELLED=1]="CANCELLED",Uh[Uh.UNKNOWN=2]="UNKNOWN",Uh[Uh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Uh[Uh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Uh[Uh.NOT_FOUND=5]="NOT_FOUND",Uh[Uh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Uh[Uh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Uh[Uh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Uh[Uh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Uh[Uh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Uh[Uh.ABORTED=10]="ABORTED",Uh[Uh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Uh[Uh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Uh[Uh.INTERNAL=13]="INTERNAL",Uh[Uh.UNAVAILABLE=14]="UNAVAILABLE",Uh[Uh.DATA_LOSS=15]="DATA_LOSS";var zh=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Gh.EMPTY}return h(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gh.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gh.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Hh(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Hh(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Hh(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Hh(this.root,e,this.comparator,!0)}}]),e}(),Hh=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return h(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Gh=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return h(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw wl();if(this.right.isRed())throw wl();var e=this.left.check();if(e!==this.right.check())throw wl();return e+(this.isRed()?0:1)}}]),e}();Gh.EMPTY=null,Gh.RED=!0,Gh.BLACK=!1,Gh.EMPTY=new(function(){function e(){d(this,e),this.size=0}return h(e,[{key:"key",get:function(){throw wl()}},{key:"value",get:function(){throw wl()}},{key:"color",get:function(){throw wl()}},{key:"left",get:function(){throw wl()}},{key:"right",get:function(){throw wl()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Gh(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Kh=function(){function e(t){d(this,e),this.comparator=t,this.data=new zh(this.comparator)}return h(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Wh(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Wh(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Wh=function(){function e(t){d(this,e),this.iter=t}return h(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Qh=new zh(of.comparator);function Yh(){return Qh}var Jh=new zh(of.comparator);function $h(){return Jh}var Xh=new zh(of.comparator);function ed(){return Xh}var td=new Kh(of.comparator);function nd(){for(var e=td,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var rd=new Kh(Ll);function id(){return rd}var ad=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return h(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,od.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Vl.min(),r,id(),Yh(),nd())}}]),e}(),od=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return h(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Wl.EMPTY_BYTE_STRING,n,nd(),nd(),nd())}}]),e}(),ud=function e(t,n,r,i){d(this,e),this.k=t,this.removedTargetIds=n,this.key=r,this.$=i},sd=function e(t,n){d(this,e),this.targetId=t,this.O=n},cd=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wl.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},ld=function(){function e(){d(this,e),this.F=0,this.M=dd(),this.L=Wl.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}return h(e,[{key:"current",get:function(){return this.B}},{key:"resumeToken",get:function(){return this.L}},{key:"q",get:function(){return 0!==this.F}},{key:"K",get:function(){return this.U}},{key:"j",value:function(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}},{key:"W",value:function(){var e=nd(),t=nd(),n=nd();return this.M.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:wl()}}),new od(this.L,this.B,e,t,n)}},{key:"G",value:function(){this.U=!1,this.M=dd()}},{key:"H",value:function(e,t){this.U=!0,this.M=this.M.insert(e,t)}},{key:"J",value:function(e){this.U=!0,this.M=this.M.remove(e)}},{key:"Y",value:function(){this.F+=1}},{key:"X",value:function(){this.F-=1}},{key:"Z",value:function(){this.U=!0,this.B=!0}}]),e}(),fd=function(){function e(t){d(this,e),this.tt=t,this.et=new Map,this.nt=Yh(),this.st=hd(),this.it=new Kh(Ll)}return h(e,[{key:"rt",value:function(e){var t,n=o(e.k);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ot(r,e.$):this.ct(r,e.key,e.$)}}catch(s){n.e(s)}finally{n.f()}var i,a=o(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var u=i.value;this.ct(u,e.key,e.$)}}catch(s){a.e(s)}finally{a.f()}}},{key:"at",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ut(n);switch(e.state){case 0:t.ht(n)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||t.removeTarget(n);break;case 3:t.ht(n)&&(r.Z(),r.j(e.resumeToken));break;case 4:t.ht(n)&&(t.lt(n),r.j(e.resumeToken));break;default:wl()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach(function(e,r){n.ht(r)&&t(r)})}},{key:"ft",value:function(e){var t=e.targetId,n=e.O.count,r=this.dt(t);if(r){var i=r.target;if(Rf(i))if(0===n){var a=new of(i.path);this.ct(t,a,xf.newNoDocument(a,Vl.min()))}else bl(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}},{key:"_t",value:function(e){var t=this,n=new Map;this.et.forEach(function(r,i){var a=t.dt(i);if(a){if(r.current&&Rf(a.target)){var o=new of(a.target.path);null!==t.nt.get(o)||t.gt(i,o)||t.ct(i,o,xf.newNoDocument(o,e))}r.K&&(n.set(i,r.W()),r.G())}});var r=nd();this.st.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.dt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))});var i=new ad(e,n,this.it,this.nt,r);return this.nt=Yh(),this.st=hd(),this.it=new Kh(Ll),i}},{key:"ot",value:function(e,t){if(this.ht(e)){var n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ht(e)){var r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.et.delete(e)}},{key:"wt",value:function(e){var t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Y",value:function(e){this.ut(e).Y()}},{key:"ut",value:function(e){var t=this.et.get(e);return t||(t=new ld,this.et.set(e,t)),t}},{key:"yt",value:function(e){var t=this.st.get(e);return t||(t=new Kh(Ll),this.st=this.st.insert(e,t)),t}},{key:"ht",value:function(e){var t=null!==this.dt(e);return t||gl("WatchChangeAggregator","Detected inactive target",e),t}},{key:"dt",value:function(e){var t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}},{key:"lt",value:function(e){var t=this;this.et.set(e,new ld),this.tt.getRemoteKeysForTarget(e).forEach(function(n){t.ct(e,n,null)})}},{key:"gt",value:function(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}]),e}();function hd(){return new zh(of.comparator)}function dd(){return new zh(of.comparator)}var pd={asc:"ASCENDING",desc:"DESCENDING"},vd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gd=function e(t,n){d(this,e),this.databaseId=t,this.D=n};function md(e,t){return e.D?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function yd(e,t){return e.D?t.toBase64():t.toUint8Array()}function kd(e,t){return md(e,t.toTimestamp())}function wd(e){return bl(!!e),Vl.fromTimestamp(function(e){var t=Yl(e);return new Ul(t.seconds,t.nanos)}(e))}function bd(e,t){return function(e){return new zl(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _d(e){var t=zl.fromString(e);return bl(Gd(t)),t}function xd(e,t){return bd(e.databaseId,t.path)}function Id(e,t){var n=_d(t);if(n.get(1)!==e.databaseId.projectId)throw new Il(xl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Il(xl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new of(Rd(n))}function Td(e,t){return bd(e.databaseId,t)}function Ed(e){var t=_d(e);return 4===t.length?zl.emptyPath():Rd(t)}function Sd(e){return new zl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rd(e){return bl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Cd(e,t,n){return{name:xd(e,t),fields:n.value.mapValue.fields}}function Ad(e,t,n){var r=Id(e,t.name),i=wd(t.updateTime),a=new bf({mapValue:{fields:t.fields}}),o=xf.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Nd(e,t){var n;if(t instanceof Oh)n={update:Cd(e,t.key,t.value)};else if(t instanceof Vh)n={delete:xd(e,t.key)};else if(t instanceof Dh)n={update:Cd(e,t.key,t.data),updateMask:Hd(t.fieldMask)};else{if(!(t instanceof jh))return wl();n={verify:xd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof ph)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof mh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof kh)return{fieldPath:t.field.canonicalString(),increment:n.C};throw wl()}(0,e)})),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:wl()}(e,t.precondition)),n}function Od(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ih.updateTime(wd(e.updateTime)):void 0!==e.exists?Ih.exists(e.exists):Ih.none()}(t.currentDocument):Ih.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;"setToServerValue"in t?(bl("REQUEST_TIME"===t.setToServerValue),n=new ph):"appendMissingElements"in t?n=new vh(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new mh(t.removeAllFromArray.values||[]):"increment"in t?n=new kh(e,t.increment):wl();var r=Gl.fromServerFormat(t.fieldPath);return new _h(r,n)}(e,t)}):[];if(t.update){var i=Id(e,t.update.name),a=new bf({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){return new Kl((e.fieldPaths||[]).map(function(e){return Gl.fromServerFormat(e)}))}(t.updateMask);return new Dh(i,a,o,n,r)}return new Oh(i,a,n,r)}if(t.delete){var u=Id(e,t.delete);return new Vh(u,n)}if(t.verify){var s=Id(e,t.verify);return new jh(s,n)}return wl()}function Dd(e,t){return{documents:[Td(e,t.path)]}}function Pd(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Td(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Td(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(yf(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NAN"}};if(mf(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yf(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NOT_NAN"}};if(mf(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qd(e.field),op:jd(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return function(e){return{field:qd(e.field),direction:Vd(e.dir)}}(e)})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.D||nf(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Fd(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Fd(t.endAt)),n}function Ld(e){var t=Ed(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){bl(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Md(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(e){return function(e){return new jf(Bd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}));var s=null;n.limit&&(s=function(e){var t;return nf(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Ud(n.startAt));var l=null;return n.endAt&&(l=Ud(n.endAt)),Hf(t,i,u,o,s,"F",c,l)}function Md(e){return e?void 0!==e.unaryFilter?[zd(e)]:void 0!==e.fieldFilter?[Zd(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return Md(e)}).reduce(function(e,t){return e.concat(t)}):wl():[]}function Fd(e){return{before:e.before,values:e.position}}function Ud(e){return new Uf(e.values||[],!!e.before)}function Vd(e){return pd[e]}function jd(e){return vd[e]}function qd(e){return{fieldPath:e.canonicalString()}}function Bd(e){return Gl.fromServerFormat(e.fieldPath)}function Zd(e){return Cf.create(Bd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wl()}}(e.fieldFilter.op),e.fieldFilter.value)}function zd(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Bd(e.unaryFilter.field);return Cf.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Bd(e.unaryFilter.field);return Cf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Bd(e.unaryFilter.field);return Cf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Bd(e.unaryFilter.field);return Cf.create(i,"!=",{nullValue:"NULL_VALUE"});default:return wl()}}function Hd(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function Gd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Kd(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Qd(t)),t=Wd(e.get(n),t);return Qd(t)}function Wd(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Qd(e){return e+"\x01\x01"}function Yd(e){var t=e.length;if(bl(t>=2),2===t)return bl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),zl.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&wl(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:wl()}a=o+2}return new zl(r)}var Jd=function e(t,n){d(this,e),this.seconds=t,this.nanoseconds=n},$d=function(){var e=function e(t,n,r){d(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r};return e.store="owner",e.key="owner",e}(),Xd=function(){var e=function e(t,n,r){d(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r};return e.store="mutationQueues",e.keyPath="userId",e}(),ep=function e(t,n,r,i,a){d(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a};ep.store="mutations",ep.keyPath="batchId",ep.userMutationsIndex="userMutationsIndex",ep.userMutationsKeyPath=["userId","batchId"];var tp=function(){var e=function(){function e(){d(this,e)}return h(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Kd(t)]}},{key:"key",value:function(e,t,n){return[e,Kd(t),n]}}]),e}();return e.store="documentMutations",e.PLACEHOLDER=new e,e}(),np=function e(t,n){d(this,e),this.path=t,this.readTime=n},rp=function e(t,n){d(this,e),this.path=t,this.version=n},ip=function e(t,n,r,i,a,o){d(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o};ip.store="remoteDocuments",ip.readTimeIndex="readTimeIndex",ip.readTimeIndexPath="readTime",ip.collectionReadTimeIndex="collectionReadTimeIndex",ip.collectionReadTimeIndexPath=["parentPath","readTime"];var ap=function(){var e=function e(t){d(this,e),this.byteSize=t};return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),op=function e(t,n,r,i,a,o,u){d(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u};op.store="targets",op.keyPath="targetId",op.queryTargetsIndexName="queryTargetsIndex",op.queryTargetsKeyPath=["canonicalId","targetId"];var up=function e(t,n,r){d(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r};up.store="targetDocuments",up.keyPath=["targetId","path"],up.documentTargetsIndex="documentTargetsIndex",up.documentTargetsKeyPath=["path","targetId"];var sp=function(){var e=function e(t,n,r,i){d(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i};return e.key="targetGlobalKey",e.store="targetGlobal",e}(),cp=function(){var e=function e(t,n){d(this,e),this.collectionId=t,this.parent=n};return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}(),lp=function(){var e=function e(t,n,r,i){d(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i};return e.store="clientMetadata",e.keyPath="clientId",e}(),fp=function(){var e=function e(t,n,r){d(this,e),this.bundleId=t,this.createTime=n,this.version=r};return e.store="bundles",e.keyPath="bundleId",e}(),hp=function(){var e=function e(t,n,r){d(this,e),this.name=t,this.readTime=n,this.bundledQuery=r};return e.store="namedQueries",e.keyPath="name",e}(),dp=[Xd.store,ep.store,tp.store,ip.store,op.store,$d.store,sp.store,up.store,lp.store,ap.store,cp.store,fp.store,hp.store],pp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vp=function(){function e(){d(this,e),this.onCommittedListeners=[]}return h(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}(),gp=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return h(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&wl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=o(t);try{var a=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}}]),e}(),mp=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.Et=new Tl,this.transaction.oncomplete=function(){r.Et.resolve()},this.transaction.onabort=function(){n.error?r.Et.reject(new wp(t,n.error)):r.Et.resolve()},this.transaction.onerror=function(e){var n=Tp(e.target.error);r.Et.reject(new wp(t,n))}}return h(e,[{key:"It",get:function(){return this.Et.promise}},{key:"abort",value:function(e){e&&this.Et.reject(e),this.aborted||(gl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new _p(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new wp(n,t)}}}]),e}(),yp=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.At=r,12.2===e.Rt((0,io.z$)())&&ml("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return h(e,[{key:"Dt",value:function(e){var t=this;return(0,eo.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t.db,n.t0){n.next=6;break}return gl("SimpleDb","Opening database:",t.name),n.next=5,new Promise(function(n,r){var i=indexedDB.open(t.name,t.version);i.onsuccess=function(e){n(e.target.result)},i.onblocked=function(){r(new wp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;r("VersionError"===n.name?new Il(xl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Il(xl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new wp(e,n))},i.onupgradeneeded=function(e){gl("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,i.transaction,e.oldVersion,t.version).next(function(){gl("SimpleDb","Database upgrade to version "+t.version+" complete")})}});case 5:t.db=n.sent;case 6:return t.Nt&&(t.db.onversionchange=function(e){return t.Nt(e)}),n.abrupt("return",t.db);case 8:case"end":return n.stop()}},n)}))()}},{key:"xt",value:function(e){this.Nt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(e,t,n,r){var i=this;return(0,eo.Z)(regeneratorRuntime.mark(function a(){var o,u,s,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o="readonly"===t,u=0;case 2:return++u,a.prev=3,a.delegateYield(regeneratorRuntime.mark(function t(){var a,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Dt(e);case 2:return i.db=t.sent,a=mp.open(i.db,e,o?"readonly":"readwrite",n),(u=r(a).catch(function(e){return a.abort(e),gp.reject(e)}).toPromise()).catch(function(){}),t.next=7,a.It;case 7:return t.t0=u,t.abrupt("return",{v:t.t0});case 9:case"end":return t.stop()}},t)})(),"t0",5);case 5:if("object"!=typeof(s=a.t0)){a.next=8;break}return a.abrupt("return",s.v);case 8:a.next=15;break;case 10:if(a.prev=10,a.t1=a.catch(3),c="FirebaseError"!==a.t1.name&&u<3,gl("SimpleDb","Transaction failed with error:",a.t1.message,"Retrying:",c),i.close(),c){a.next=15;break}return a.abrupt("return",Promise.reject(a.t1));case 15:a.next=2;break;case 17:case"end":return a.stop()}},a,null,[[3,10]])}))()}},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return gl("SimpleDb","Removing database:",e),xp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!(0,io.hl)())return!1;if(e.Pt())return!0;var t=(0,io.z$)(),n=e.Rt(t),r=0<n&&n<10,i=e.vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"Pt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}},{key:"St",value:function(e,t){return e.store(t)}},{key:"Rt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),kp=function(){function e(t){d(this,e),this.kt=t,this.$t=!1,this.Ot=null}return h(e,[{key:"isDone",get:function(){return this.$t}},{key:"Ft",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.kt=e}},{key:"done",value:function(){this.$t=!0}},{key:"Mt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return xp(this.kt.delete())}}]),e}(),wp=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,xl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return n}(Il);function bp(e){return"IndexedDbTransactionError"===e.name}var _p=function(){function e(t){d(this,e),this.store=t}return h(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(gl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(gl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),xp(n)}},{key:"add",value:function(e){return gl("SimpleDb","ADD",this.store.name,e,e),xp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return xp(this.store.get(e)).next(function(n){return void 0===n&&(n=null),gl("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return gl("SimpleDb","DELETE",this.store.name,e),xp(this.store.delete(e))}},{key:"count",value:function(){return gl("SimpleDb","COUNT",this.store.name),xp(this.store.count())}},{key:"Lt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,function(e,t){r.push(t)}).next(function(){return r})}},{key:"Ut",value:function(e,t){gl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.qt=!1;var r=this.cursor(n);return this.Bt(r,function(e,t,n){return n.delete()})}},{key:"Kt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Bt(r,t)}},{key:"jt",value:function(e){var t=this.cursor({});return new gp(function(n,r){t.onerror=function(e){var t=Tp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"Bt",value:function(e,t){var n=[];return new gp(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new kp(i),o=t(i.primaryKey,i.value,a);if(o instanceof gp){var u=o.catch(function(e){return a.done(),gp.reject(e)});n.push(u)}a.isDone?r():null===a.Ft?i.continue():i.continue(a.Ft)}else r()}}).next(function(){return gp.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function xp(e){return new gp(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=Tp(e.target.error);n(t)}})}var Ip=!1;function Tp(e){var t=yp.Rt((0,io.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Il("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ip||(Ip=!0,setTimeout(function(){throw r},0)),r}}return e}var Ep=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Qt=e,i.currentSequenceNumber=r,i}return n}(vp);function Sp(e,t){var n=_l(e);return yp.St(n.Qt,t)}var Rp=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return h(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Sh(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=o(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Rh(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=o(this.mutations);try{for(a.s();!(i=a.n()).done;){var u=i.value;u.key.isEqual(e.key)&&Rh(u,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Vl.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},nd())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,function(e,t){return Ah(e,t)})&&Ml(this.baseMutations,e.baseMutations,function(e,t){return Ah(e,t)})}}]),e}(),Cp=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return h(e,null,[{key:"from",value:function(t,n,r){bl(t.mutations.length===r.length);for(var i=ed(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Ap=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vl.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vl.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wl.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return h(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Np=function e(t){d(this,e),this.Wt=t};function Op(e,t){if(t.document)return Ad(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=of.fromSegments(t.noDocument.path),r=Fp(t.noDocument.readTime),i=xf.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=of.fromSegments(t.unknownDocument.path),o=Fp(t.unknownDocument.version);return xf.newUnknownDocument(a,o)}return wl()}function Dp(e,t,n){var r=Pp(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:xd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:md(e,t.version.toTimestamp())}}(e.Wt,t);return new ip(null,null,a,t.hasCommittedMutations,r,i)}if(t.isNoDocument()){var o=t.key.path.toArray(),u=Mp(t.version),s=t.hasCommittedMutations;return new ip(null,new np(o,u),null,s,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=Mp(t.version);return new ip(new rp(c,l),null,null,!0,r,i)}return wl()}function Pp(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Lp(e){var t=new Ul(e[0],e[1]);return Vl.fromTimestamp(t)}function Mp(e){var t=e.toTimestamp();return new Jd(t.seconds,t.nanoseconds)}function Fp(e){var t=new Ul(e.seconds,e.nanoseconds);return Vl.fromTimestamp(t)}function Up(e,t){for(var n=(t.baseMutations||[]).map(function(t){return Od(e.Wt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i.updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var a=t.mutations.map(function(t){return Od(e.Wt,t)}),o=Ul.fromMillis(t.localWriteTimeMs);return new Rp(t.batchId,o,n,a)}function Vp(e){var t,n,r=Fp(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Fp(e.lastLimboFreeSnapshotVersion):Vl.min();return void 0!==e.query.documents?(bl(1===(n=e.query).documents.length),t=Xf(Gf(Ed(n.documents[0])))):t=function(e){return Xf(Ld(e))}(e.query),new Ap(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Wl.fromBase64String(e.resumeToken))}function jp(e,t){var n,r=Mp(t.snapshotVersion),i=Mp(t.lastLimboFreeSnapshotVersion);n=Rf(t.target)?Dd(e.Wt,t.target):Pd(e.Wt,t.target);var a=t.resumeToken.toBase64();return new op(t.targetId,Ef(t.target),r,a,t.sequenceNumber,i,n)}function qp(e){var t=Ld({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?eh(t,t.limit,"L"):t}var Bp=function(){function e(){d(this,e)}return h(e,[{key:"getBundleMetadata",value:function(e,t){return Zp(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:Fp(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return Zp(e).put({bundleId:(n=t).id,createTime:Mp(wd(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return zp(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:qp(t.bundledQuery),readTime:Fp(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return zp(e).put(function(e){return{name:e.name,readTime:Mp(wd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Zp(e){return Sp(e,fp.store)}function zp(e){return Sp(e,hp.store)}var Hp=function(){function e(){d(this,e),this.Gt=new Gp}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Gt.add(t),gp.resolve()}},{key:"getCollectionParents",value:function(e,t){return gp.resolve(this.Gt.getEntries(t))}}]),e}(),Gp=function(){function e(){d(this,e),this.index={}}return h(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Kh(zl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Kh(zl.comparator)).toArray()}}]),e}(),Kp=function(){function e(){d(this,e),this.zt=new Gp}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.zt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.zt.add(t)});var a={collectionId:r,parent:Kd(i)};return Wp(e).put(a)}return gp.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fl(t),""],!1,!0);return Wp(e).Lt(r).next(function(e){var r,i=o(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Yd(a.parent))}}catch(u){i.e(u)}finally{i.f()}return n})}}]),e}();function Wp(e){return Sp(e,cp.store)}var Qp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yp=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return h(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Jp(e,t,n){var r=e.store(ep.store),i=e.store(tp.store),a=[],u=IDBKeyRange.only(n.batchId),s=0,c=r.Kt({range:u},function(e,t,n){return s++,n.delete()});a.push(c.next(function(){bl(1===s)}));var l,f=[],h=o(n.mutations);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=tp.key(t,d.key.path,n.batchId);a.push(i.delete(p)),f.push(d.key)}}catch(v){h.e(v)}finally{h.f()}return gp.waitFor(a).next(function(){return f})}function $p(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw wl();t=e.noDocument}return JSON.stringify(t).length}Yp.DEFAULT_COLLECTION_PERCENTILE=10,Yp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yp.DEFAULT=new Yp(41943040,Yp.DEFAULT_COLLECTION_PERCENTILE,Yp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yp.DISABLED=new Yp(-1,0,0);var Xp=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.N=n,this.Ht=r,this.referenceDelegate=i,this.Jt={}}return h(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tv(e).Kt({index:ep.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=nv(e),u=tv(e);return u.add({}).next(function(s){bl("number"==typeof s);var c,l=new Rp(s,t,n,r),f=function(e,t,n){var r=n.baseMutations.map(function(t){return Nd(e.Wt,t)}),i=n.mutations.map(function(t){return Nd(e.Wt,t)});return new ep(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.N,i.userId,l),h=[],d=new Kh(function(e,t){return Ll(e.canonicalString(),t.canonicalString())}),p=o(r);try{for(p.s();!(c=p.n()).done;){var v=c.value,g=tp.key(i.userId,v.key.path,s);d=d.add(v.key.path.popLast()),h.push(u.put(f)),h.push(a.put(g,tp.PLACEHOLDER))}}catch(m){p.e(m)}finally{p.f()}return d.forEach(function(t){h.push(i.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.Jt[s]=l.keys()}),gp.waitFor(h).next(function(){return l})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return tv(e).get(t).next(function(e){return e?(bl(e.userId===n.userId),Up(n.N,e)):null})}},{key:"Xt",value:function(e,t){var n=this;return this.Jt[t]?gp.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.Jt[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return tv(e).Kt({index:ep.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(bl(t.batchId>=r),a=Up(n.N,t)),i.done()}).next(function(){return a})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return tv(e).Kt({index:ep.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tv(e).Lt(ep.userMutationsIndex,n).next(function(e){return e.map(function(e){return Up(t.N,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,i=tp.prefixForPath(this.userId,t.path),a=IDBKeyRange.lowerBound(i),o=[];return nv(e).Kt({range:a},function(i,a,u){var s=r(i,3),c=s[0],l=s[1],f=s[2],h=Yd(l);if(c===n.userId&&t.path.isEqual(h))return tv(e).get(f).next(function(e){if(!e)throw wl();bl(e.userId===n.userId),o.push(Up(n.N,e))});u.done()}).next(function(){return o})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,i=new Kh(Ll),a=[];return t.forEach(function(t){var o=tp.prefixForPath(n.userId,t.path),u=IDBKeyRange.lowerBound(o),s=nv(e).Kt({range:u},function(e,a,o){var u=r(e,3),s=u[0],c=u[1],l=u[2],f=Yd(c);s===n.userId&&t.path.isEqual(f)?i=i.add(l):o.done()});a.push(s)}),gp.waitFor(a).next(function(){return n.Zt(e,i)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,i=t.path,a=i.length+1,o=tp.prefixForPath(this.userId,i),u=IDBKeyRange.lowerBound(o),s=new Kh(Ll);return nv(e).Kt({range:u},function(e,t,o){var u=r(e,3),c=u[0],l=u[1],f=u[2],h=Yd(l);c===n.userId&&i.isPrefixOf(h)?h.length===a&&(s=s.add(f)):o.done()}).next(function(){return n.Zt(e,s)})}},{key:"Zt",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(tv(e).get(t).next(function(e){if(null===e)throw wl();bl(e.userId===n.userId),r.push(Up(n.N,e))}))}),gp.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Jp(e.Qt,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.te(t.batchId)}),gp.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"te",value:function(e){delete this.Jt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return gp.resolve();var r=IDBKeyRange.lowerBound(tp.prefixForUser(t.userId)),i=[];return nv(e).Kt({range:r},function(e,n,r){if(e[0]===t.userId){var a=Yd(e[1]);i.push(a)}else r.done()}).next(function(){bl(0===i.length)})})}},{key:"containsKey",value:function(e,t){return ev(e,this.userId,t)}},{key:"ee",value:function(e){var t=this;return rv(e).get(this.userId).next(function(e){return e||new Xd(t.userId,-1,"")})}}],[{key:"Yt",value:function(t,n,r,i){return bl(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ev(e,t,n){var i=tp.prefixForPath(t,n.path),a=i[1],o=IDBKeyRange.lowerBound(i),u=!1;return nv(e).Kt({range:o,qt:!0},function(e,n,i){var o=r(e,3),s=o[0],c=o[1];o[2];s===t&&c===a&&(u=!0),i.done()}).next(function(){return u})}function tv(e){return Sp(e,ep.store)}function nv(e){return Sp(e,tp.store)}function rv(e){return Sp(e,Xd.store)}var iv=function(){function e(t){d(this,e),this.ne=t}return h(e,[{key:"next",value:function(){return this.ne+=2,this.ne}}],[{key:"se",value:function(){return new e(0)}},{key:"ie",value:function(){return new e(-1)}}]),e}(),av=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.N=n}return h(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.re(e).next(function(n){var r=new iv(n.highestTargetId);return n.highestTargetId=r.next(),t.oe(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.re(e).next(function(e){return Vl.fromTimestamp(new Ul(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.re(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.re(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.oe(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.ce(e,t).next(function(){return n.re(e).next(function(r){return r.targetCount+=1,n.ae(t,r),n.oe(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.ce(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ov(e).delete(t.targetId)}).next(function(){return n.re(e)}).next(function(t){return bl(t.targetCount>0),t.targetCount-=1,n.oe(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ov(e).Kt(function(o,u){var s=Vp(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))}).next(function(){return gp.waitFor(a)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return ov(e).Kt(function(e,n){var r=Vp(n);t(r)})}},{key:"re",value:function(e){return uv(e).get(sp.key).next(function(e){return bl(null!==e),e})}},{key:"oe",value:function(e,t){return uv(e).put(sp.key,t)}},{key:"ce",value:function(e,t){return ov(e).put(jp(this.N,t))}},{key:"ae",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.re(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=Ef(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ov(e).Kt({range:r,index:op.queryTargetsIndexName},function(e,n,r){var a=Vp(n);Sf(t,a.target)&&(i=a,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=sv(e);return t.forEach(function(t){var o=Kd(t.path);i.push(a.put(new up(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))}),gp.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=sv(e);return gp.forEach(t,function(t){var a=Kd(t.path);return gp.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=sv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=sv(e),i=nd();return r.Kt({range:n,qt:!0},function(e,t,n){var r=Yd(e[1]),a=new of(r);i=i.add(a)}).next(function(){return i})}},{key:"containsKey",value:function(e,t){var n=Kd(t.path),i=IDBKeyRange.bound([n],[Fl(n)],!1,!0),a=0;return sv(e).Kt({index:up.documentTargetsIndex,qt:!0,range:i},function(e,t,n){var i=r(e,2),o=i[0];i[1];0!==o&&(a++,n.done())}).next(function(){return a>0})}},{key:"Tt",value:function(e,t){return ov(e).get(t).next(function(e){return e?Vp(e):null})}}]),e}();function ov(e){return Sp(e,op.store)}function uv(e){return Sp(e,sp.store)}function sv(e){return Sp(e,up.store)}function cv(e){return lv.apply(this,arguments)}function lv(){return(lv=(0,eo.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===xl.FAILED_PRECONDITION&&t.message===pp){e.next=2;break}throw t;case 2:gl("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fv(e,t){var n=r(e,2),i=n[0],a=n[1],o=r(t,2),u=o[0],s=o[1],c=Ll(i,u);return 0===c?Ll(a,s):c}var hv=function(){function e(t){d(this,e),this.ue=t,this.buffer=new Kh(fv),this.he=0}return h(e,[{key:"le",value:function(){return++this.he}},{key:"fe",value:function(e){var t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();fv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),dv=function(){function e(t,n){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.de=!1,this.we=null}return h(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}},{key:"stop",value:function(){this.we&&(this.we.cancel(),this.we=null)}},{key:"started",get:function(){return null!==this.we}},{key:"_e",value:function(e){var t=this,n=this.de?3e5:6e4;gl("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,eo.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.we=null,t.de=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!bp(n.t0)){n.next=12;break}gl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,cv(n.t0);case 14:return n.next=16,t._e(e);case 16:case"end":return n.stop()}},n,null,[[1,6]])})))}}]),e}(),pv=function(){function e(t,n){d(this,e),this.me=t,this.params=n}return h(e,[{key:"calculateTargetCount",value:function(e,t){return this.me.ge(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return gp.resolve(Ol.T);var r=new hv(t);return this.me.forEachTarget(e,function(e){return r.fe(e.sequenceNumber)}).next(function(){return n.me.ye(e,function(e){return r.fe(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.me.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.me.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(gl("LruGarbageCollector","Garbage collection skipped; disabled"),gp.resolve(Qp)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(gl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Qp):n.pe(e,t)})}},{key:"getCacheSize",value:function(e){return this.me.getCacheSize(e)}},{key:"pe",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(gl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return s=Date.now(),vl()<=ro.in.DEBUG&&gl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),gp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),vv=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new pv(e,t)}(this,n)}return h(e,[{key:"ge",value:function(e){var t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"Te",value:function(e){var t=0;return this.ye(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ye",value:function(e,t){return this.Ee(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return gv(e,n)}},{key:"removeReference",value:function(e,t,n){return gv(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return gv(e,t)}},{key:"Ie",value:function(e,t){return function(e,t){var n=!1;return rv(e).jt(function(r){return ev(e,r,t).next(function(e){return e&&(n=!0),gp.resolve(!e)})}).next(function(){return n})}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ee(e,function(o,u){if(u<=t){var s=n.Ie(e,o).next(function(t){if(!t)return a++,r.getEntry(e,o).next(function(){return r.removeEntry(o),sv(e).delete([0,Kd(o.path)])})});i.push(s)}}).next(function(){return gp.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return a})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return gv(e,t)}},{key:"Ee",value:function(e,t){var n,i=sv(e),a=Ol.T;return i.Kt({index:up.documentTargetsIndex},function(e,i){var o=r(e,2),u=o[0],s=(o[1],i.path),c=i.sequenceNumber;0===u?(a!==Ol.T&&t(new of(Yd(n)),a),a=c,n=s):a=Ol.T}).next(function(){a!==Ol.T&&t(new of(Yd(n)),a)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function gv(e,t){return sv(e).put(function(e,t){return new up(0,Kd(e.path),t)}(t,e.currentSequenceNumber))}var mv=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return h(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var i,a=o(n);try{for(a.s();!(i=a.n()).done;){var u=r(i.value,2),s=u[0],c=u[1];if(this.equalsFn(s,e))return c}}catch(l){a.e(l)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){ql(this.inner,function(t,n){var i,a=o(n);try{for(a.s();!(i=a.n()).done;){var u=r(i.value,2),s=u[0],c=u[1];e(s,c)}}catch(l){a.e(l)}finally{a.f()}})}},{key:"isEmpty",value:function(){return Bl(this.inner)}}]),e}(),yv=function(){function e(){d(this,e),this.changes=new mv(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return h(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:Vl.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:xf.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?gp.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),kv=function(){function e(t,n){d(this,e),this.N=t,this.Ht=n}return h(e,[{key:"addEntry",value:function(e,t,n){return _v(e).put(xv(t),n)}},{key:"removeEntry",value:function(e,t){var n=_v(e),r=xv(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.Ae(e,r)})}},{key:"getEntry",value:function(e,t){var n=this;return _v(e).get(xv(t)).next(function(e){return n.Re(t,e)})}},{key:"be",value:function(e,t){var n=this;return _v(e).get(xv(t)).next(function(e){return{document:n.Re(t,e),size:$p(e)}})}},{key:"getEntries",value:function(e,t){var n=this,r=Yh();return this.Pe(e,t,function(e,t){var i=n.Re(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"ve",value:function(e,t){var n=this,r=Yh(),i=new zh(of.comparator);return this.Pe(e,t,function(e,t){var a=n.Re(e,t);r=r.insert(e,a),i=i.insert(e,$p(t))}).next(function(){return{documents:r,Ve:i}})}},{key:"Pe",value:function(e,t,n){if(t.isEmpty())return gp.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return _v(e).Kt({range:r},function(e,t,r){for(var o=of.fromSegments(e);a&&of.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Mt(a.path.toArray()):r.done()}).next(function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Yh(),a=t.path.length+1,o={};if(n.isEqual(Vl.min())){var u=t.path.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=Pp(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=ip.collectionReadTimeIndex}return _v(e).Kt(o,function(e,n,o){if(e.length===a){var u=Op(r.N,n);t.path.isPrefixOf(u.key.path)?ih(t,u)&&(i=i.insert(u.key,u)):o.done()}}).next(function(){return i})}},{key:"newChangeBuffer",value:function(e){return new wv(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return bv(e).get(ap.key).next(function(e){return bl(!!e),e})}},{key:"Ae",value:function(e,t){return bv(e).put(ap.key,t)}},{key:"Re",value:function(e,t){if(t){var n=Op(this.N,t);if(!n.isNoDocument()||!n.version.isEqual(Vl.min()))return n}return xf.newInvalidDocument(e)}}]),e}(),wv=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Se=e,i.trackRemovals=r,i.De=new mv(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),i}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Kh(function(e,t){return Ll(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(a,o){var u=t.De.get(a);if(o.document.isValidDocument()){var s=Dp(t.Se.N,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=$p(s);r+=c-u,n.push(t.Se.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=Dp(t.Se.N,xf.newNoDocument(a,Vl.min()),t.getReadTime(a));n.push(t.Se.addEntry(e,a,l))}else n.push(t.Se.removeEntry(e,a))}),i.forEach(function(r){n.push(t.Se.Ht.addToCollectionParentIndex(e,r))}),n.push(this.Se.updateMetadata(e,r)),gp.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Se.be(e,t).next(function(e){return n.De.set(t,e.size),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Se.ve(e,t).next(function(e){var t=e.documents;return e.Ve.forEach(function(e,t){n.De.set(e,t)}),t})}}]),n}(yv);function bv(e){return Sp(e,ap.store)}function _v(e){return Sp(e,ip.store)}function xv(e){return e.path.toArray()}var Iv=function(){function e(t){d(this,e),this.N=t}return h(e,[{key:"Ct",value:function(e,t,n,r){var i=this;bl(n<r&&n>=0&&r<=11);var a=new mp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore($d.store)}(e),function(e){e.createObjectStore(Xd.store,{keyPath:Xd.keyPath}),e.createObjectStore(ep.store,{keyPath:ep.keyPath,autoIncrement:!0}).createIndex(ep.userMutationsIndex,ep.userMutationsKeyPath,{unique:!0}),e.createObjectStore(tp.store)}(e),Tv(e),function(e){e.createObjectStore(ip.store)}(e));var o=gp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(up.store),e.deleteObjectStore(op.store),e.deleteObjectStore(sp.store)}(e),Tv(e)),o=o.next(function(){return function(e){var t=e.store(sp.store),n=new sp(0,0,Vl.min().toTimestamp(),0);return t.put(sp.key,n)}(a)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(e,t){return t.store(ep.store).Lt().next(function(n){e.deleteObjectStore(ep.store),e.createObjectStore(ep.store,{keyPath:ep.keyPath,autoIncrement:!0}).createIndex(ep.userMutationsIndex,ep.userMutationsKeyPath,{unique:!0});var r=t.store(ep.store),i=n.map(function(e){return r.put(e)});return gp.waitFor(i)})}(e,a)})),o=o.next(function(){!function(e){e.createObjectStore(lp.store,{keyPath:lp.keyPath})}(e)})),n<5&&r>=5&&(o=o.next(function(){return i.Ce(a)})),n<6&&r>=6&&(o=o.next(function(){return function(e){e.createObjectStore(ap.store)}(e),i.Ne(a)})),n<7&&r>=7&&(o=o.next(function(){return i.xe(a)})),n<8&&r>=8&&(o=o.next(function(){return i.ke(e,a)})),n<9&&r>=9&&(o=o.next(function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(ip.store);t.createIndex(ip.readTimeIndex,ip.readTimeIndexPath,{unique:!1}),t.createIndex(ip.collectionReadTimeIndex,ip.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(o=o.next(function(){return i.$e(a)})),n<11&&r>=11&&(o=o.next(function(){!function(e){e.createObjectStore(fp.store,{keyPath:fp.keyPath})}(e),function(e){e.createObjectStore(hp.store,{keyPath:hp.keyPath})}(e)})),o}},{key:"Ne",value:function(e){var t=0;return e.store(ip.store).Kt(function(e,n){t+=$p(n)}).next(function(){var n=new ap(t);return e.store(ap.store).put(ap.key,n)})}},{key:"Ce",value:function(e){var t=this,n=e.store(Xd.store),r=e.store(ep.store);return n.Lt().next(function(n){return gp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Lt(ep.userMutationsIndex,i).next(function(r){return gp.forEach(r,function(r){bl(r.userId===n.userId);var i=Up(t.N,r);return Jp(e,n.userId,i).next(function(){})})})})})}},{key:"xe",value:function(e){var t=e.store(up.store),n=e.store(ip.store);return e.store(sp.store).get(sp.key).next(function(e){var r=[];return n.Kt(function(n,i){var a=new zl(n),o=function(e){return[0,Kd(e)]}(a);r.push(t.get(o).next(function(n){return n?gp.resolve():function(n){return t.put(new up(0,Kd(n),e.highestListenSequenceNumber))}(a)}))}).next(function(){return gp.waitFor(r)})})}},{key:"ke",value:function(e,t){e.createObjectStore(cp.store,{keyPath:cp.keyPath});var n=t.store(cp.store),i=new Gp,a=function(e){if(i.add(e)){var t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Kd(r)})}};return t.store(ip.store).Kt({qt:!0},function(e,t){var n=new zl(e);return a(n.popLast())}).next(function(){return t.store(tp.store).Kt({qt:!0},function(e,t){var n=r(e,3),i=(n[0],n[1]),o=(n[2],Yd(i));return a(o.popLast())})})}},{key:"$e",value:function(e){var t=this,n=e.store(op.store);return n.Kt(function(e,r){var i=Vp(r),a=jp(t.N,i);return n.put(a)})}}]),e}();function Tv(e){e.createObjectStore(up.store,{keyPath:up.keyPath}).createIndex(up.documentTargetsIndex,up.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(op.store,{keyPath:op.keyPath}).createIndex(op.queryTargetsIndexName,op.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(sp.store)}var Ev="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sv=function(){function e(t,n,r,i,a,o,u,s,c,l){if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=u,this.Fe=c,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=function(e){return Promise.resolve()},!e.bt())throw new Il(xl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vv(this,i),this.We=n+"main",this.N=new Np(s),this.Ge=new yp(this.We,11,new Iv(this.N)),this.ze=new av(this.referenceDelegate,this.N),this.Ht=new Kp,this.He=function(e,t){return new kv(e,t)}(this.N,this.Ht),this.Je=new Bp,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&ml("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return h(e,[{key:"start",value:function(){var e=this;return this.Xe().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Il(xl.FAILED_PRECONDITION,Ev);return e.Ze(),e.tn(),e.en(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.ze.getHighestSequenceNumber(t)})}).then(function(t){e.Le=new Ol(t,e.Fe)}).then(function(){e.Be=!0}).catch(function(t){return e.Ge&&e.Ge.close(),Promise.reject(t)})}},{key:"nn",value:function(e){var t,n=this;return this.Qe=(t=(0,eo.Z)(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.started){t.next=2;break}return t.abrupt("return",e(r));case 2:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){var t;this.Ge.xt((t=(0,eo.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Xe();case 4:case"end":return e.stop()}},e)}))))}},{key:"Xe",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return Cv(t).put(new lp(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.sn(t).next(function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable(function(){return e.Qe(!1)}))})}).next(function(){return e.rn(t)}).next(function(n){return e.isPrimary&&!n?e.on(t).next(function(){return!1}):!!n&&e.cn(t).next(function(){return!0})})}).catch(function(t){if(bp(t))return gl("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return gl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable(function(){return e.Qe(t)}),e.isPrimary=t})}},{key:"sn",value:function(e){var t=this;return Rv(e).get($d.key).next(function(e){return gp.resolve(t.an(e))})}},{key:"un",value:function(e){return Cv(e).delete(this.clientId)}},{key:"hn",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isPrimary||e.ln(e.je,18e5)){t.next=6;break}return e.je=Date.now(),t.next=4,e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var n=Sp(t,lp.store);return n.Lt().next(function(t){var r=e.fn(t,18e5),i=t.filter(function(e){return-1===r.indexOf(e)});return gp.forEach(i,function(e){return n.delete(e.clientId)}).next(function(){return i})})}).catch(function(){return[]});case 4:if(n=t.sent,e.Ye){r=o(n);try{for(r.s();!(i=r.n()).done;)a=i.value,e.Ye.removeItem(e.dn(a.clientId))}catch(u){r.e(u)}finally{r.f()}}case 6:case"end":return t.stop()}},t)}))()}},{key:"en",value:function(){var e=this;this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.Xe().then(function(){return e.hn()}).then(function(){return e.en()})})}},{key:"an",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"rn",value:function(e){var t=this;return this.Me?gp.resolve(!0):Rv(e).get($d.key).next(function(n){if(null!==n&&t.ln(n.leaseTimestampMs,5e3)&&!t.wn(n.ownerId)){if(t.an(n)&&t.networkEnabled)return!0;if(!t.an(n)){if(!n.allowTabSynchronization)throw new Il(xl.FAILED_PRECONDITION,Ev);return!1}}return!(!t.networkEnabled||!t.inForeground)||Cv(e).Lt().next(function(e){return void 0===t.fn(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.inForeground&&e.inForeground,r=t.networkEnabled===e.networkEnabled;if(!t.networkEnabled&&e.networkEnabled||n&&r)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&gl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),t.next=7,e.Ge.runTransaction("shutdown","readwrite",[$d.store,lp.store],function(t){var n=new Ep(t,Ol.T);return e.on(n).next(function(){return e.un(n)})});case 7:e.Ge.close(),e.yn();case 9:case"end":return t.stop()}},t)}))()}},{key:"fn",value:function(e,t){var n=this;return e.filter(function(e){return n.ln(e.updateTimeMs,t)&&!n.wn(e.clientId)})}},{key:"pn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return Cv(t).Lt().next(function(t){return e.fn(t,18e5).map(function(e){return e.clientId})})})}},{key:"started",get:function(){return this.Be}},{key:"getMutationQueue",value:function(e){return Xp.Yt(e,this.N,this.Ht,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r,i=this;return gl("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",dp,function(a){return r=new Ep(a,i.Le?i.Le.next():Ol.T),"readwrite-primary"===t?i.sn(r).next(function(e){return!!e||i.rn(r)}).next(function(t){if(!t)throw ml("Failed to obtain primary lease for action '".concat(e,"'.")),i.isPrimary=!1,i.Oe.enqueueRetryable(function(){return i.Qe(!1)}),new Il(xl.FAILED_PRECONDITION,pp);return n(r)}).next(function(e){return i.cn(r).next(function(){return e})}):i.Tn(r).next(function(){return n(r)})}).then(function(e){return r.raiseOnCommittedEvent(),e})}},{key:"Tn",value:function(e){var t=this;return Rv(e).get($d.key).next(function(e){if(null!==e&&t.ln(e.leaseTimestampMs,5e3)&&!t.wn(e.ownerId)&&!t.an(e)&&!(t.Me||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Il(xl.FAILED_PRECONDITION,Ev)})}},{key:"cn",value:function(e){var t=new $d(this.clientId,this.allowTabSynchronization,Date.now());return Rv(e).put($d.key,t)}},{key:"on",value:function(e){var t=this,n=Rv(e);return n.get($d.key).next(function(e){return t.an(e)?(gl("IndexedDbPersistence","Releasing primary lease."),n.delete($d.key)):gp.resolve()})}},{key:"ln",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(ml("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"Ze",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){e.Oe.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.Xe()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}},{key:"mn",value:function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}},{key:"tn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=function(){t._n(),(0,io.G6)()&&navigator.appVersion.match("Version/14")&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.Ue))}},{key:"gn",value:function(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}},{key:"wn",value:function(e){var t;try{var n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return gl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ml("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"_n",value:function(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(ko){ml("Failed to set zombie client id.",ko)}}},{key:"yn",value:function(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(ko){}}},{key:"dn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return yp.bt()}}]),e}();function Rv(e){return Sp(e,$d.store)}function Cv(e){return Sp(e,lp.store)}function Av(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Nv=function e(t,n){d(this,e),this.progress=t,this.En=n},Ov=function(){function e(t,n,r){d(this,e),this.He=t,this.In=n,this.Ht=r}return h(e,[{key:"An",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.Rn(e,t,r)})}},{key:"Rn",value:function(e,t,n){return this.He.getEntry(e,t).next(function(e){var t,r=o(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e})}},{key:"bn",value:function(e,t){e.forEach(function(e,n){var r,i=o(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}})}},{key:"Pn",value:function(e,t){var n=this;return this.He.getEntries(e,t).next(function(t){return n.vn(e,t).next(function(){return t})})}},{key:"vn",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.bn(t,e)})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return of.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):Jf(t)?this.Sn(e,t,n):this.Dn(e,t,n)}},{key:"Vn",value:function(e,t){return this.An(e,new of(t)).next(function(e){var t=$h();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"Sn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=$h();return this.Ht.getCollectionParents(e,i).next(function(o){return gp.forEach(o,function(o){var u=function(e,t){return new zf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Dn(e,u,n).next(function(e){e.forEach(function(e,t){a=a.insert(e,t)})})}).next(function(){return a})})}},{key:"Dn",value:function(e,t,n){var r,i,a=this;return this.He.getDocumentsMatchingQuery(e,t,n).next(function(n){return r=n,a.In.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return i=t,a.Cn(e,i,r).next(function(e){r=e;var t,n=o(i);try{for(n.s();!(t=n.n()).done;){var a,u=t.value,s=o(u.mutations);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=c.key,f=r.get(l);null==f&&(f=xf.newInvalidDocument(l),r=r.insert(l,f)),Rh(c,f,u.localWriteTime),f.isFoundDocument()||(r=r.remove(l))}}catch(h){s.e(h)}finally{s.f()}}}catch(h){n.e(h)}finally{n.f()}})}).next(function(){return r.forEach(function(e,n){ih(t,n)||(r=r.remove(e))}),r})}},{key:"Cn",value:function(e,t,n){var r,i=nd(),a=o(t);try{for(a.s();!(r=a.n()).done;){var u,s=o(r.value.mutations);try{for(s.s();!(u=s.n()).done;){var c=u.value;c instanceof Dh&&null===n.get(c.key)&&(i=i.add(c.key))}}catch(f){s.e(f)}finally{s.f()}}}catch(f){a.e(f)}finally{a.f()}var l=n;return this.He.getEntries(e,i).next(function(e){return e.forEach(function(e,t){t.isFoundDocument()&&(l=l.insert(e,t))}),l})}}]),e}(),Dv=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Nn=r,this.xn=i}return h(e,null,[{key:"kn",value:function(t,n){var r,i=nd(),a=nd(),u=o(n.docChanges);try{for(u.s();!(r=u.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(c){u.e(c)}finally{u.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Pv=function(){function e(){d(this,e)}return h(e,[{key:"$n",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Vl.min())?this.Fn(e,t):this.On.Pn(e,r).next(function(a){var o=i.Mn(t,a);return(Kf(t)||Wf(t))&&i.Ln(t.limitType,o,r,n)?i.Fn(e,t):(vl()<=ro.in.DEBUG&&gl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),rh(t)),i.On.getDocumentsMatchingQuery(e,t,n).next(function(e){return o.forEach(function(t){e=e.insert(t.key,t)}),e}))})}},{key:"Mn",value:function(e,t){var n=new Kh(ah(e));return t.forEach(function(t,r){ih(e,r)&&(n=n.add(r))}),n}},{key:"Ln",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return vl()<=ro.in.DEBUG&&gl("QueryEngine","Using full collection scan to execute query:",rh(t)),this.On.getDocumentsMatchingQuery(e,t,Vl.min())}}]),e}(),Lv=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Bn=n,this.N=i,this.Un=new zh(Ll),this.qn=new mv(function(e){return Ef(e)},Sf),this.Kn=Vl.min(),this.In=t.getMutationQueue(r),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new Ov(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}return h(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.Un)})}}]),e}();function Mv(e,t,n,r){return new Lv(e,t,n,r)}function Fv(e,t){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_l(t),i=r.In,a=r.Qn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.In.getAllMutationBatches(e).next(function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new Ov(r.jn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)}).next(function(n){var r,i=[],u=[],s=nd(),c=o(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;i.push(l.batchId);var f,h=o(l.mutations);try{for(h.s();!(f=h.n()).done;){var d=f.value;s=s.add(d.key)}}catch(w){h.e(w)}finally{h.f()}}}catch(w){c.e(w)}finally{c.f()}var p,v=o(n);try{for(v.s();!(p=v.n()).done;){var g=p.value;u.push(g.batchId);var m,y=o(g.mutations);try{for(y.s();!(m=y.n()).done;){var k=m.value;s=s.add(k.key)}}catch(w){y.e(w)}finally{y.f()}}}catch(w){v.e(w)}finally{v.f()}return a.Pn(e,s).next(function(e){return{Wn:e,removedBatchIds:i,addedBatchIds:u}})})});case 4:return u=e.sent,e.abrupt("return",(r.In=i,r.Qn=a,r.Bn.$n(r.Qn),u));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vv(e,t){var n=_l(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=gp.resolve();return a.forEach(function(e){o=o.next(function(){return r.getEntry(t,e)}).next(function(t){var a=n.docVersions.get(e);bl(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(function(){return e.In.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n.In.performConsistencyCheck(e)}).next(function(){return n.Qn.Pn(e,r)})})}function jv(e){var t=_l(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.ze.getLastRemoteSnapshotVersion(e)})}function qv(e,t){var n=_l(e),r=t.snapshotVersion,i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;var o=[];t.targetChanges.forEach(function(t,a){var u=i.get(a);if(u){o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,a).next(function(){return n.ze.addMatchingKeys(e,t.addedDocuments,a)}));var s=t.resumeToken;if(s.approximateByteSize()>0){var c=u.withResumeToken(s,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return bl(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,t)&&o.push(n.ze.updateTargetData(e,c))}}});var u=Yh();if(t.documentUpdates.forEach(function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Bv(e,a,t.documentUpdates,r,void 0).next(function(e){u=e})),!r.isEqual(Vl.min())){var s=n.ze.getLastRemoteSnapshotVersion(e).next(function(t){return n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r)});o.push(s)}return gp.waitFor(o).next(function(){return a.apply(e)}).next(function(){return n.Qn.vn(e,u)}).next(function(){return u})}).then(function(e){return n.Un=i,e})}function Bv(e,t,n,r,i){var a=nd();return n.forEach(function(e){return a=a.add(e)}),t.getEntries(e,a).next(function(e){var a=Yh();return n.forEach(function(n,o){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Vl.min())?(t.removeEntry(n,s),a=a.insert(n,o)):!u.isValidDocument()||o.version.compareTo(u.version)>0||0===o.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(o,s),a=a.insert(n,o)):gl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",o.version)}),a})}function Zv(e,t){var n=_l(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)})}function zv(e,t){var n=_l(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.ze.getTargetData(e,t).next(function(i){return i?(r=i,gp.resolve(r)):n.ze.allocateTargetId(e).next(function(i){return r=new Ap(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function Hv(e,t,n){return Gv.apply(this,arguments)}function Gv(){return(Gv=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_l(t),a=i.Un.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),bp(e.t1)){e.next=12;break}throw e.t1;case 12:gl("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Un=i.Un.remove(n),i.qn.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function Kv(e,t,n){var r=_l(e),i=Vl.min(),a=nd();return r.persistence.runTransaction("Execute query","readonly",function(e){return function(e,t,n){var r=_l(e),i=r.qn.get(n);return void 0!==i?gp.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,Xf(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.Bn.getDocumentsMatchingQuery(e,t,n?i:Vl.min(),n?a:nd())}).next(function(e){return{documents:e,Gn:a}})})}function Wv(e,t){var n=_l(e),r=_l(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.Tt(e,t).next(function(e){return e?e.target:null})})}function Qv(e){var t=_l(e);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return function(e,t,n){var r=_l(e),i=Yh(),a=Pp(n),o=_v(t),u=IDBKeyRange.lowerBound(a,!0);return o.Kt({index:ip.readTimeIndex,range:u},function(e,t){var n=Op(r.N,t);i=i.insert(n.key,n),a=t.readTime}).next(function(){return{En:i,readTime:Lp(a)}})}(t.jn,e,t.Kn)}).then(function(e){var n=e.En,r=e.readTime;return t.Kn=r,n})}function Yv(){return(Yv=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=_l(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",function(e){return function(e){var t=_v(e),n=Vl.min();return t.Kt({index:ip.readTimeIndex,reverse:!0},function(e,t,r){t.readTime&&(n=Lp(t.readTime)),r.done()}).next(function(){return n})}(e)}).then(function(e){n.Kn=e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jv(){return(Jv=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,u,s,c,l,f,h,d,p,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=_l(t),u=nd(),s=Yh(),c=ed(),l=o(r);try{for(l.s();!(f=l.n()).done;)h=f.value,d=n.zn(h.metadata.name),h.document&&(u=u.add(d)),s=s.insert(d,n.Hn(h)),c=c.insert(d,n.Jn(h.metadata.readTime))}catch(g){l.e(g)}finally{l.f()}return p=a.jn.newChangeBuffer({trackRemovals:!0}),e.next=7,zv(a,function(e){return Xf(Gf(zl.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return Bv(e,p,s,Vl.min(),c).next(function(t){return p.apply(e),t}).next(function(t){return a.ze.removeMatchingKeysForTargetId(e,v.targetId).next(function(){return a.ze.addMatchingKeys(e,u,v.targetId)}).next(function(){return a.Qn.vn(e,t)}).next(function(){return t})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $v(e,t){return Xv.apply(this,arguments)}function Xv(){return(Xv=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:nd(),e.next=3,zv(t,Xf(qp(n.bundledQuery)));case 3:return i=e.sent,a=_l(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=wd(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Je.saveNamedQuery(e,n);var o=i.withResumeToken(Wl.EMPTY_BYTE_STRING,t);return a.Un=a.Un.insert(o.targetId,o),a.ze.updateTargetData(e,o).next(function(){return a.ze.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return a.ze.addMatchingKeys(e,r,i.targetId)}).next(function(){return a.Je.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var eg=function(){function e(t){d(this,e),this.N=t,this.Yn=new Map,this.Xn=new Map}return h(e,[{key:"getBundleMetadata",value:function(e,t){return gp.resolve(this.Yn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:wd(n.createTime)}),gp.resolve()}},{key:"getNamedQuery",value:function(e,t){return gp.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:qp(e.bundledQuery),readTime:wd(e.readTime)}}(t)),gp.resolve()}}]),e}(),tg=function(){function e(){d(this,e),this.Zn=new Kh(ng.ts),this.es=new Kh(ng.ns)}return h(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ng(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.rs(new ng(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"cs",value:function(e){var t=this,n=new of(new zl([])),r=new ng(n,e),i=new ng(n,e+1),a=[];return this.es.forEachInRange([r,i],function(e){t.rs(e),a.push(e.key)}),a}},{key:"us",value:function(){var e=this;this.Zn.forEach(function(t){return e.rs(t)})}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new of(new zl([])),n=new ng(t,e),r=new ng(t,e+1),i=nd();return this.es.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new ng(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ng=function(){function e(t,n){d(this,e),this.key=t,this.ls=n}return h(e,null,[{key:"ts",value:function(e,t){return of.comparator(e.key,t.key)||Ll(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Ll(e.ls,t.ls)||of.comparator(e.key,t.key)}}]),e}(),rg=function(){function e(t,n){d(this,e),this.Ht=t,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new Kh(ng.ts)}return h(e,[{key:"checkEmpty",value:function(e){return gp.resolve(0===this.In.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++;var a=new Rp(i,t,n,r);this.In.push(a);var u,s=o(r);try{for(s.s();!(u=s.n()).done;){var c=u.value;this.ds=this.ds.add(new ng(c.key,i)),this.Ht.addToCollectionParentIndex(e,c.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return gp.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return gp.resolve(this.ws(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this._s(t+1),r=n<0?0:n;return gp.resolve(this.In.length>r?this.In[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return gp.resolve(0===this.In.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return gp.resolve(this.In.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ng(t,0),i=new ng(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],function(e){var t=n.ws(e.ls);a.push(t)}),gp.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kh(Ll);return t.forEach(function(e){var t=new ng(e,0),i=new ng(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],function(e){r=r.add(e.ls)})}),gp.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;of.isDocumentKey(i)||(i=i.child(""));var a=new ng(new of(i),0),o=new Kh(Ll);return this.ds.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},a),gp.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.ws(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;bl(0===this.ys(t.batchId,"removed")),this.In.shift();var r=this.ds;return gp.forEach(t.mutations,function(i){var a=new ng(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.ds=r})}},{key:"te",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ng(t,0),r=this.ds.firstAfterOrEqual(n);return gp.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return gp.resolve()}},{key:"ys",value:function(e,t){return this._s(e)}},{key:"_s",value:function(e){return 0===this.In.length?0:e-this.In[0].batchId}},{key:"ws",value:function(e){var t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}]),e}(),ig=function(){function e(t,n){d(this,e),this.Ht=t,this.ps=n,this.docs=new zh(of.comparator),this.size=0}return h(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return gp.resolve(n?n.document.clone():xf.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Yh();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():xf.newInvalidDocument(e))}),gp.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Yh(),i=new of(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||ih(t,c)&&(r=r.insert(c.key,c.clone()))}return gp.resolve(r)}},{key:"Ts",value:function(e,t){return gp.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new ag(this)}},{key:"getSize",value:function(e){return gp.resolve(this.size)}}]),e}(),ag=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).Se=e,r}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(t.Se.addEntry(e,i.document,t.getReadTime(r))):t.Se.removeEntry(r)}),gp.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Se.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Se.getEntries(e,t)}}]),n}(yv),og=function(){function e(t){d(this,e),this.persistence=t,this.Es=new mv(function(e){return Ef(e)},Sf),this.lastRemoteSnapshotVersion=Vl.min(),this.highestTargetId=0,this.Is=0,this.As=new tg,this.targetCount=0,this.Rs=iv.se()}return h(e,[{key:"forEachTarget",value:function(e,t){return this.Es.forEach(function(e,n){return t(n)}),gp.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return gp.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return gp.resolve(this.Is)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),gp.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),gp.resolve()}},{key:"ce",value:function(e){this.Es.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new iv(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ce(t),this.targetCount+=1,gp.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ce(t),gp.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,gp.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Es.forEach(function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Es.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),gp.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return gp.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Es.get(t)||null;return gp.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),gp.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),gp.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.cs(t),gp.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return gp.resolve(n)}},{key:"containsKey",value:function(e,t){return gp.resolve(this.As.containsKey(t))}}]),e}(),ug=function(){function e(t,n){var r=this;d(this,e),this.bs={},this.Le=new Ol(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new og(this),this.Ht=new Hp,this.He=function(e,t){return new ig(e,function(e){return r.referenceDelegate.Ps(e)})}(this.Ht),this.N=new Np(n),this.Je=new eg(this.N)}return h(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Be=!1,Promise.resolve()}},{key:"started",get:function(){return this.Be}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new rg(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r=this;gl("MemoryPersistence","Starting transaction:",e);var i=new sg(this.Le.next());return this.referenceDelegate.vs(),n(i).next(function(e){return r.referenceDelegate.Vs(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"Ss",value:function(e,t){return gp.or(Object.values(this.bs).map(function(n){return function(){return n.containsKey(e,t)}}))}}]),e}(),sg=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return n}(vp),cg=function(){function e(t){d(this,e),this.persistence=t,this.Ds=new tg,this.Cs=null}return h(e,[{key:"xs",get:function(){if(this.Cs)return this.Cs;throw wl()}},{key:"addReference",value:function(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),gp.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),gp.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),gp.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ds.cs(t.targetId).forEach(function(e){return n.xs.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.xs.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"vs",value:function(){this.Cs=new Set}},{key:"Vs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gp.forEach(this.xs,function(r){var i=of.fromPath(r);return t.ks(e,i).next(function(e){e||n.removeEntry(i)})}).next(function(){return t.Cs=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.ks(e,t).next(function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())})}},{key:"Ps",value:function(e){return 0}},{key:"ks",value:function(e,t){var n=this;return gp.or([function(){return gp.resolve(n.Ds.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ss(e,t)}])}}],[{key:"Ns",value:function(t){return new e(t)}}]),e}();function lg(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function fg(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function hg(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var dg=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return h(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Il(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ml("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),pg=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return h(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Il(i.error.code,i.error.message))),a?new e(t,i.state,r):(ml("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),vg=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return h(e,null,[{key:"$s",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=id(),o=0;i&&o<r.activeTargetIds.length;++o)i=af(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ml("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),gg=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return h(e,null,[{key:"$s",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ml("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),mg=function(){function e(){d(this,e),this.activeTargetIds=id()}return h(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),yg=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new zh(Ll),this.started=!1,this.Ks=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.js=lg(this.persistenceKey,this.Ls),this.Qs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new mg),this.Ws=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Gs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.zs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Hs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Js=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}return h(e,[{key:"start",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,u,s,c,l,f,h,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.syncEngine.pn();case 2:n=t.sent,r=o(n),t.prev=4,r.s();case 6:if((i=r.n()).done){t.next=14;break}if((a=i.value)!==e.Ls){t.next=10;break}return t.abrupt("continue",12);case 10:(u=e.getItem(lg(e.persistenceKey,a)))&&(s=vg.$s(a,u))&&(e.qs=e.qs.insert(s.clientId,s));case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),r.e(t.t0);case 19:return t.prev=19,r.f(),t.finish(19);case 22:e.Ys(),(c=e.storage.getItem(e.Hs))&&(l=e.Xs(c))&&e.Zs(l),f=o(e.Ks);try{for(f.s();!(h=f.n()).done;)d=h.value,e.Us(d)}catch(p){f.e(p)}finally{f.f()}e.Ks=[],e.window.addEventListener("pagehide",function(){return e.shutdown()}),e.started=!0;case 28:case"end":return t.stop()}},t,null,[[4,16,19,22]])}))()}},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Qs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ti(this.qs)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.ei(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ei(e,t,n),this.ni(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(hg(this.persistenceKey,e));if(n){var r=pg.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}},{key:"removeLocalQueryTarget",value:function(e){this.si.Ms(e),this.Ys()}},{key:"isLocalQueryTarget",value:function(e){return this.si.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(hg(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ii(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.ni(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.ri(e)}},{key:"notifyBundleLoaded",value:function(){this.oi()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return gl("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){gl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){gl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Us",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(gl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void ml("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,eo.Z)(regeneratorRuntime.mark(function e(){var r,i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Ws.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ci(n.key),e.abrupt("return",t.ai(r,null));case 6:if(!(i=t.ui(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ai(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.hi(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.li(a));case 16:e.next=39;break;case 18:if(!t.zs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.fi(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.di(o));case 23:e.next=39;break;case 25:if(n.key!==t.Hs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Xs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Zs(u));case 30:e.next=39;break;case 32:if(n.key!==t.Qs){e.next=37;break}(s=function(e){var t=Ol.T;if(null!=e)try{var n=JSON.parse(e);bl("number"==typeof n),t=n}catch(e){ml("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Ol.T&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Js){e.next=39;break}return e.abrupt("return",t.syncEngine.wi());case 39:e.next=42;break;case 41:t.Ks.push(n);case 42:case"end":return e.stop()}},e)})))}}},{key:"si",get:function(){return this.qs.get(this.Ls)}},{key:"Ys",value:function(){this.setItem(this.js,this.si.Os())}},{key:"ei",value:function(e,t,n){var r=new dg(this.currentUser,e,t,n),i=fg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"ni",value:function(e){var t=fg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"ri",value:function(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}},{key:"ii",value:function(e,t,n){var r=hg(this.persistenceKey,e),i=new pg(e,t,n);this.setItem(r,i.Os())}},{key:"oi",value:function(){this.setItem(this.Js,"value-not-used")}},{key:"ci",value:function(e){var t=this.Ws.exec(e);return t?t[1]:null}},{key:"ui",value:function(e,t){var n=this.ci(e);return vg.$s(n,t)}},{key:"hi",value:function(e,t){var n=this.Gs.exec(e),r=Number(n[1]);return dg.$s(new hl(void 0!==n[2]?n[2]:null),r,t)}},{key:"fi",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]);return pg.$s(r,t)}},{key:"Xs",value:function(e){return gg.$s(e)}},{key:"li",value:function(e){var t=this;return(0,eo.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.user.uid!==t.currentUser.uid){n.next=2;break}return n.abrupt("return",t.syncEngine._i(e.batchId,e.state,e.error));case 2:gl("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid));case 3:case"end":return n.stop()}},n)}))()}},{key:"di",value:function(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}},{key:"ai",value:function(e,t){var n=this,r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.ti(this.qs),a=this.ti(r),o=[],u=[];return a.forEach(function(e){i.has(e)||o.push(e)}),i.forEach(function(e){a.has(e)||u.push(e)}),this.syncEngine.gi(o,u).then(function(){n.qs=r})}},{key:"Zs",value:function(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ti",value:function(e){var t=id();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),kg=function(){function e(){d(this,e),this.yi=new mg,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return h(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.yi.Fs(e),this.pi[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.pi[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.yi.Ms(e)}},{key:"isLocalQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.pi[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.yi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.yi=new mg,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),wg=function(){function e(){d(this,e)}return h(e,[{key:"Ti",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),bg=function(){function e(){var t=this;d(this,e),this.Ei=function(){return t.Ii()},this.Ai=function(){return t.Ri()},this.bi=[],this.Pi()}return h(e,[{key:"Ti",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}},{key:"Pi",value:function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}},{key:"Ii",value:function(){gl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=o(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ri",value:function(){gl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=o(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),_g={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},xg=function(){function e(t){d(this,e),this.vi=t.vi,this.Vi=t.Vi}return h(e,[{key:"Si",value:function(e){this.Di=e}},{key:"Ci",value:function(e){this.Ni=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Vi()}},{key:"send",value:function(e){this.vi(e)}},{key:"ki",value:function(){this.Di()}},{key:"$i",value:function(e){this.Ni(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),Ig=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return h(n,[{key:"qi",value:function(e,t,n,r){return new Promise(function(i,a){var o=new fl;o.listenOnce(ol.COMPLETE,function(){try{switch(o.getLastErrorCode()){case al.NO_ERROR:var t=o.getResponseJson();gl("Connection","XHR received:",JSON.stringify(t)),i(t);break;case al.TIMEOUT:gl("Connection",'RPC "'+e+'" timed out'),a(new Il(xl.DEADLINE_EXCEEDED,"Request time out"));break;case al.HTTP_ERROR:var n=o.getStatus();if(gl("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(xl).indexOf(t)>=0?t:xl.UNKNOWN}(r.status);a(new Il(u,r.message))}else a(new Il(xl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Il(xl.UNAVAILABLE,"Connection failed."));break;default:wl()}}finally{gl("Connection",'RPC "'+e+'" completed.')}});var u=JSON.stringify(r);o.send(t,"POST",u,n,15)})}},{key:"ji",value:function(e,t){var n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=rl(),i=il(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new cl({})),this.Ui(a.initMessageHeaders,t),(0,io.uI)()||(0,io.b$)()||(0,io.d)()||(0,io.w1)()||(0,io.Mn)()||(0,io.ru)()||(a.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");gl("Connection","Creating WebChannel: "+o,a);var u=r.createWebChannel(o,a),s=!1,c=!1,l=new xg({vi:function(e){c?gl("Connection","Not sending because WebChannel is closed:",e):(s||(gl("Connection","Opening WebChannel transport."),u.open(),s=!0),gl("Connection","WebChannel sending:",e),u.send(e))},Vi:function(){return u.close()}}),f=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return f(u,ll.EventType.OPEN,function(){c||gl("Connection","WebChannel transport opened.")}),f(u,ll.EventType.CLOSE,function(){c||(c=!0,gl("Connection","WebChannel transport closed"),l.$i())}),f(u,ll.EventType.ERROR,function(e){c||(c=!0,yl("Connection","WebChannel transport errored:",e),l.$i(new Il(xl.UNAVAILABLE,"The operation could not be completed")))}),f(u,ll.EventType.MESSAGE,function(e){var t;if(!c){var n=e.data[0];bl(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){gl("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Fh[e];if(void 0!==t)return Zh(t)}(a),s=i.message;void 0===o&&(o=xl.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),c=!0,l.$i(new Il(o,s)),u.close()}else gl("Connection","WebChannel received:",n),l.Oi(n)}}),f(i,ul.STAT_EVENT,function(e){e.stat===sl.PROXY?gl("Connection","Detected buffering proxy"):e.stat===sl.NOPROXY&&gl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.ki()},0),l}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId,this.Fi=(t.ssl?"https":"http")+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return h(e,[{key:"Li",value:function(e,t,n,r){var i=this.Bi(e,t);gl("RestConnection","Sending: ",i,n);var a={};return this.Ui(a,r),this.qi(e,i,a,n).then(function(e){return gl("RestConnection","Received: ",e),e},function(t){throw yl("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t})}},{key:"Ki",value:function(e,t,n,r){return this.Li(e,t,n,r)}},{key:"Ui",value:function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+dl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}},{key:"Bi",value:function(e,t){return"".concat(this.Fi,"/v1/").concat(t,":").concat(_g[e])}}]),e}());function Tg(){return"undefined"!=typeof window?window:null}function Eg(){return"undefined"!=typeof document?document:null}function Sg(e){return new gd(e,!0)}var Rg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Oe=t,this.timerId=n,this.Qi=r,this.Wi=i,this.Gi=a,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}return h(e,[{key:"reset",value:function(){this.zi=0}},{key:"Yi",value:function(){this.zi=this.Gi}},{key:"Xi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),i=Math.max(0,n-r);i>0&&gl("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.zi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,function(){return t.Ji=Date.now(),e()}),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}},{key:"tr",value:function(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}},{key:"cancel",value:function(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}},{key:"Zi",value:function(){return(Math.random()-.5)*this.zi}}]),e}(),Cg=function(){function e(t,n,r,i,a,o,u){d(this,e),this.Oe=t,this.er=r,this.nr=i,this.sr=a,this.credentialsProvider=o,this.listener=u,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new Rg(t,n)}return h(e,[{key:"ur",value:function(){return 1===this.state||5===this.state||this.hr()}},{key:"hr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.lr()}},{key:"stop",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.ur(),!t.t0){t.next=4;break}return t.next=4,e.close(0);case 4:case"end":return t.stop()}},t)}))()}},{key:"dr",value:function(){this.state=0,this.ar.reset()}},{key:"wr",value:function(){var e=this;this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,function(){return e._r()}))}},{key:"mr",value:function(e){this.gr(),this.stream.send(e)}},{key:"_r",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hr()){t.next=2;break}return t.abrupt("return",e.close(0));case 2:case"end":return t.stop()}},t)}))()}},{key:"gr",value:function(){this.rr&&(this.rr.cancel(),this.rr=null)}},{key:"yr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(e,t){var n=this;return(0,eo.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.gr(),n.yr(),n.ar.cancel(),n.ir++,4!==e?n.ar.reset():t&&t.code===xl.RESOURCE_EXHAUSTED?(ml(t.toString()),ml("Using maximum backoff delay to prevent overloading the backend."),n.ar.Yi()):t&&t.code===xl.UNAUTHENTICATED&&3!==n.state&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.pr(),n.stream.close(),n.stream=null),n.state=e,r.next=9,n.listener.Ci(t);case 9:case"end":return r.stop()}},r)}))()}},{key:"pr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Tr(this.ir),n=this.ir;this.credentialsProvider.getToken().then(function(t){e.ir===n&&e.Er(t)},function(n){t(function(){var t=new Il(xl.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ir(t)})})}},{key:"Er",value:function(e){var t=this,n=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(function(){n(function(){return t.state=2,t.cr=t.Oe.enqueueAfterDelay(t.nr,1e4,function(){return t.hr()&&(t.state=3),Promise.resolve()}),t.listener.Si()})}),this.stream.Ci(function(e){n(function(){return t.Ir(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})}},{key:"lr",value:function(){var e=this;this.state=5,this.ar.Xi((0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"Ir",value:function(e){return gl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Tr",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget(function(){return t.ir===e?n():(gl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),Ag=function(e){p(n,e);var t=v(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,o)).N=a,u}return h(n,[{key:"Ar",value:function(e){return this.sr.ji("Listen",e)}},{key:"onMessage",value:function(e){this.ar.reset();var t=function(e,t){var n;if("targetChange"in t){var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:wl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.D?(bl(void 0===t||"string"==typeof t),Wl.fromBase64String(t||"")):(bl(void 0===t||t instanceof Uint8Array),Wl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?xl.UNKNOWN:Zh(e.code);return new Il(t,e.message||"")}(o);n=new cd(r,i,a,u||null)}else if("documentChange"in t){var s=t.documentChange,c=Id(e,s.document.name),l=wd(s.document.updateTime),f=new bf({mapValue:{fields:s.document.fields}}),h=xf.newFoundDocument(c,l,f);n=new ud(s.targetIds||[],s.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){var d=t.documentDelete,p=Id(e,d.document),v=d.readTime?wd(d.readTime):Vl.min(),g=xf.newNoDocument(p,v);n=new ud([],d.removedTargetIds||[],g.key,g)}else if("documentRemove"in t){var m=t.documentRemove,y=Id(e,m.document);n=new ud([],m.removedTargetIds||[],y,null)}else{if(!("filter"in t))return wl();var k=t.filter,w=new qh(k.count||0);n=new sd(k.targetId,w)}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Vl.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Vl.min():t.readTime?wd(t.readTime):Vl.min()}(e);return this.listener.Rr(t,n)}},{key:"br",value:function(e){var t={};t.database=Sd(this.N),t.addTarget=function(e,t){var n,r=t.target;return(n=Rf(r)?{documents:Dd(e,r)}:{query:Pd(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=yd(e,t.resumeToken):t.snapshotVersion.compareTo(Vl.min())>0&&(n.readTime=md(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wl()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.mr(t)}},{key:"Pr",value:function(e){var t={};t.database=Sd(this.N),t.removeTarget=e,this.mr(t)}}]),n}(Cg),Ng=function(e){p(r,e);var n=v(r);function r(e,t,i,a,o){var u;return d(this,r),(u=n.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o)).N=a,u.vr=!1,u}return h(r,[{key:"Vr",get:function(){return this.vr}},{key:"start",value:function(){this.vr=!1,this.lastStreamToken=void 0,t(_(r.prototype),"start",this).call(this)}},{key:"pr",value:function(){this.vr&&this.Sr([])}},{key:"Ar",value:function(e){return this.sr.ji("Write",e)}},{key:"onMessage",value:function(e){if(bl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();var t=function(e,t){return e&&e.length>0?(bl(void 0!==t),e.map(function(e){return function(e,t){var n=wd(e.updateTime?e.updateTime:t);return n.isEqual(Vl.min())&&(n=wd(t)),new xh(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=wd(e.commitTime);return this.listener.Dr(n,t)}return bl(!e.writeResults||0===e.writeResults.length),this.vr=!0,this.listener.Cr()}},{key:"Nr",value:function(){var e={};e.database=Sd(this.N),this.mr(e)}},{key:"Sr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return Nd(t.N,e)})};this.mr(n)}}]),r}(Cg),Og=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).credentials=e,a.sr=r,a.N=i,a.kr=!1,a}return h(n,[{key:"$r",value:function(){if(this.kr)throw new Il(xl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Li",value:function(e,t,n){var r=this;return this.$r(),this.credentials.getToken().then(function(i){return r.sr.Li(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===xl.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Il(xl.UNKNOWN,e.toString())})}},{key:"Ki",value:function(e,t,n){var r=this;return this.$r(),this.credentials.getToken().then(function(i){return r.sr.Ki(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===xl.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Il(xl.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.kr=!0}}]),n}(function(){return function e(){d(this,e)}}()),Dg=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}return h(e,[{key:"Lr",value:function(){var e=this;0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Fr=null,e.Ur("Backend didn't respond within 10 seconds."),e.Br("Offline"),Promise.resolve()}))}},{key:"qr",value:function(e){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Br("Offline")))}},{key:"set",value:function(e){this.Kr(),this.Or=0,"Online"===e&&(this.Mr=!1),this.Br(e)}},{key:"Br",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Ur",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Mr?(ml(t),this.Mr=!1):gl("OnlineStateTracker",t)}},{key:"Kr",value:function(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}]),e}(),Pg=function e(t,n,r,i,a){d(this,e);var o=this;this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=a,this.zr.Ti(function(e){r.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Hg(o),!e.t0){e.next=5;break}return gl("RemoteStore","Restarting streams for network reachability change."),e.next=5,(t=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=_l(t)).Wr.add(4),e.next=4,Fg(n);case 4:return n.Hr.set("Unknown"),n.Wr.delete(4),e.next=8,Lg(n);case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})(o);case 5:case"end":return e.stop()}},e)})))}),this.Hr=new Dg(r,i)};function Lg(e){return Mg.apply(this,arguments)}function Mg(){return(Mg=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Hg(t)){e.next=18;break}n=o(t.Gr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function Fg(e){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=o(t.Gr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function Vg(e,t){var n=_l(e);n.Qr.has(t.targetId)||(n.Qr.set(t.targetId,t),zg(n)?Zg(n):ym(n).hr()&&qg(n,t))}function jg(e,t){var n=_l(e),r=ym(n);n.Qr.delete(t),r.hr()&&Bg(n,t),0===n.Qr.size&&(r.hr()?r.wr():Hg(n)&&n.Hr.set("Unknown"))}function qg(e,t){e.Jr.Y(t.targetId),ym(e).br(t)}function Bg(e,t){e.Jr.Y(t),ym(e).Pr(t)}function Zg(e){e.Jr=new fd({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Tt:function(t){return e.Qr.get(t)||null}}),ym(e).start(),e.Hr.Lr()}function zg(e){return Hg(e)&&!ym(e).ur()&&e.Qr.size>0}function Hg(e){return 0===_l(e).Wr.size}function Gg(e){e.Jr=void 0}function Kg(e){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,eo.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.Qr.forEach(function(e,n){qg(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qg(e,t){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Gg(t),zg(t)?(t.Hr.qr(n),Zg(t)):t.Hr.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jg(e,t,n){return $g.apply(this,arguments)}function $g(){return($g=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Hr.set("Online"),!(n instanceof cd&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,(a=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=o(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(u=a.value,e.t0=t.Qr.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.Qr.delete(u),t.Jr.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])})),function(e,t){return a.apply(this,arguments)})(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),gl("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Xg(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof ud?t.Jr.rt(n):n instanceof sd?t.Jr.ft(n):t.Jr.at(n),r.isEqual(Vl.min())){e.next=29;break}return e.prev=14,e.next=17,jv(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Jr._t(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Qr.get(r);i&&e.Qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.Qr.get(t);if(n){e.Qr.set(t,n.withResumeToken(Wl.EMPTY_BYTE_STRING,n.snapshotVersion)),Bg(e,t);var r=new Ap(n.target,t,1,n.sequenceNumber);qg(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),gl("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Xg(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function Xg(e,t,n){return em.apply(this,arguments)}function em(){return(em=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(bp(n)){e.next=2;break}throw n;case 2:return t.Wr.add(1),e.next=5,Fg(t);case 5:t.Hr.set("Offline"),r||(r=function(){return jv(t.localStore)}),t.asyncQueue.enqueueRetryable((0,eo.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return gl("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Wr.delete(1),e.next=6,Lg(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tm(e,t){return t().catch(function(n){return Xg(e,n,t)})}function nm(e){return rm.apply(this,arguments)}function rm(){return(rm=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=_l(t),r=km(n),i=n.jr.length>0?n.jr[n.jr.length-1].batchId:-1;case 2:if(!im(n)){e.next=19;break}return e.prev=3,e.next=6,Zv(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.jr.length&&r.wr(),e.abrupt("break",19);case 10:i=a.batchId,am(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Xg(n,e.t0);case 17:e.next=2;break;case 19:om(n)&&um(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function im(e){return Hg(e)&&e.jr.length<10}function am(e,t){e.jr.push(t);var n=km(e);n.hr()&&n.Vr&&n.Sr(t.mutations)}function om(e){return Hg(e)&&!km(e).ur()&&e.jr.length>0}function um(e){km(e).start()}function sm(e){return cm.apply(this,arguments)}function cm(){return(cm=(0,eo.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:km(t).Nr();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lm(e){return fm.apply(this,arguments)}function fm(){return(fm=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=km(t),r=o(t.jr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Sr(a.mutations)}catch(u){r.e(u)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hm(e,t,n){return dm.apply(this,arguments)}function dm(){return(dm=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.jr.shift(),a=Cp.from(i,n,r),e.next=3,tm(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,nm(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pm(e,t){return vm.apply(this,arguments)}function vm(){return(vm=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&km(t).Vr,!e.t0){e.next=4;break}return e.next=4,(r=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Bh(i=n.code)||i===xl.ABORTED){e.next=7;break}return r=t.jr.shift(),km(t).dr(),e.next=5,tm(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,nm(t);case 7:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(t,n);case 4:om(t)&&um(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gm(e,t){return mm.apply(this,arguments)}function mm(){return(mm=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_l(t),!n){e.next=7;break}return r.Wr.delete(2),e.next=5,Lg(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Wr.add(2),e.next=12,Fg(r);case 12:r.Hr.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ym(e){return e.Yr||(e.Yr=function(e,t,n){var r=_l(e);return r.$r(),new Ag(t,r.sr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Kg.bind(null,e),Ci:Qg.bind(null,e),Rr:Jg.bind(null,e)}),e.Gr.push((t=(0,eo.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Yr.dr(),zg(e)?Zg(e):e.Hr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Yr.stop();case 6:Gg(e);case 7:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))),e.Yr;var t}function km(e){return e.Xr||(e.Xr=function(e,t,n){var r=_l(e);return r.$r(),new Ng(t,r.sr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:sm.bind(null,e),Ci:pm.bind(null,e),Cr:lm.bind(null,e),Dr:hm.bind(null,e)}),e.Gr.push((t=(0,eo.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Xr.dr(),t.next=4,nm(e);case 4:t.next=9;break;case 6:return t.next=8,e.Xr.stop();case 8:e.jr.length>0&&(gl("RemoteStore","Stopping write stream with ".concat(e.jr.length," pending writes")),e.jr=[]);case 9:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))),e.Xr;var t}var wm=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Tl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return h(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Il(xl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function bm(e,t){if(ml("AsyncQueue","".concat(t,": ").concat(e)),bp(e))return new Il(xl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var _m=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||of.comparator(e.key,n.key)}:function(e,t){return of.comparator(e.key,t.key)},this.keyedMap=$h(),this.sortedSet=new zh(this.comparator)}return h(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),xm=function(){function e(){d(this,e),this.Zr=new zh(of.comparator)}return h(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Zr.get(t);n?0!==e.type&&3===n.type?this.Zr=this.Zr.insert(t,e):3===e.type&&1!==n.type?this.Zr=this.Zr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Zr=this.Zr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Zr=this.Zr.remove(t):1===e.type&&2===n.type?this.Zr=this.Zr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):wl():this.Zr=this.Zr.insert(t,e)}},{key:"eo",value:function(){var e=[];return this.Zr.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),Im=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return h(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach(function(e){a.push({type:0,doc:e})}),new e(t,n,_m.emptySet(n),a,r,i,!0,!1)}}]),e}(),Tm=function e(){d(this,e),this.no=void 0,this.listeners=[]},Em=function e(){d(this,e),this.queries=new mv(function(e){return nh(e)},th),this.onlineState="Unknown",this.so=new Set};function Sm(e,t){return Rm.apply(this,arguments)}function Rm(){return(Rm=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_l(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Tm),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.no=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=bm(e.t0,"Initialization of query '".concat(rh(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.io(r.onlineState),o.no&&n.ro(o.no)&&Dm(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function Cm(e,t){return Am.apply(this,arguments)}function Am(){return(Am=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_l(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nm(e,t){var n,r=_l(e),i=!1,a=o(t);try{for(a.s();!(n=a.n()).done;){var u=n.value,s=r.queries.get(u.query);if(s){var c,l=o(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.ro(u)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.no=u}}}catch(f){a.e(f)}finally{a.f()}i&&Dm(r)}function Om(e,t,n){var r=_l(e),i=r.queries.get(t);if(i){var a,u=o(i.listeners);try{for(u.s();!(a=u.n()).done;){a.value.onError(n)}}catch(s){u.e(s)}finally{u.f()}}r.queries.delete(t)}function Dm(e){e.so.forEach(function(e){e.next()})}var Pm=function(){function e(t,n,r){d(this,e),this.query=t,this.oo=n,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=r||{}}return h(e,[{key:"ro",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=o(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(u){r.e(u)}finally{r.f()}e=new Im(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.co?this.uo(e)&&(this.oo.next(e),a=!0):this.ho(e,this.onlineState)&&(this.lo(e),a=!0),this.ao=e,a}},{key:"onError",value:function(e){this.oo.error(e)}},{key:"io",value:function(e){this.onlineState=e;var t=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),t=!0),t}},{key:"ho",value:function(e,t){return!e.fromCache||!(this.options.fo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}},{key:"uo",value:function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"lo",value:function(e){e=Im.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}]),e}(),Lm=function(){function e(t,n){d(this,e),this.payload=t,this.byteLength=n}return h(e,[{key:"wo",value:function(){return"metadata"in this.payload}}]),e}(),Mm=function(){function e(t){d(this,e),this.N=t}return h(e,[{key:"zn",value:function(e){return Id(this.N,e)}},{key:"Hn",value:function(e){return e.metadata.exists?Ad(this.N,e.document,!1):xf.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}},{key:"Jn",value:function(e){return wd(e)}}]),e}(),Fm=function(){function e(t,n,r){d(this,e),this._o=t,this.localStore=n,this.N=r,this.queries=[],this.documents=[],this.progress=Um(t)}return h(e,[{key:"mo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"yo",value:function(e){var t,n=new Map,r=new Mm(this.N),i=o(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var u,s=r.zn(a.metadata.name),c=o(a.metadata.queries);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=(n.get(l)||nd()).add(s);n.set(l,f)}}catch(h){c.e(h)}finally{c.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t,n,r){return Jv.apply(this,arguments)}(e.localStore,new Mm(e.N),e.documents,e._o.id);case 2:n=t.sent,r=e.yo(e.documents),i=o(e.queries),t.prev=5,i.s();case 7:if((a=i.n()).done){t.next=13;break}return u=a.value,t.next=11,$v(e.localStore,u,r.get(u.name));case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),i.e(t.t0);case 18:return t.prev=18,i.f(),t.finish(18);case 21:return t.abrupt("return",(e.progress.taskState="Success",new Nv(Object.assign({},e.progress),n)));case 22:case"end":return t.stop()}},t,null,[[5,15,18,21]])}))()}}]),e}();function Um(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Vm=function e(t){d(this,e),this.key=t},jm=function e(t){d(this,e),this.key=t},qm=function(){function e(t,n){d(this,e),this.query=t,this.po=n,this.To=null,this.current=!1,this.Eo=nd(),this.mutatedKeys=nd(),this.Io=ah(t),this.Ao=new _m(this.Io)}return h(e,[{key:"Ro",get:function(){return this.po}},{key:"bo",value:function(e,t){var n=this,r=t?t.Po:new xm,i=t?t.Ao:this.Ao,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Kf(this.query)&&i.size===this.query.limit?i.last():null,c=Wf(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),f=ih(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.vo(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Io(f,s)>0||c&&n.Io(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))}),Kf(this.query)||Wf(this.query))for(;o.size>this.query.limit;){var l=Kf(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ao:o,Po:r,Ln:u,mutatedKeys:a}}},{key:"vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;var a=e.Po.eo();a.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wl()}};return n(e)-n(t)}(e.type,t.type)||r.Io(e.doc,t.doc)}),this.Vo(n);var o=t?this.So():[],u=0===this.Eo.size&&this.current?1:0,s=u!==this.To;return this.To=u,0!==a.length||s?{snapshot:new Im(this.query,e.Ao,i,a,e.mutatedKeys,0===u,s,!1),Do:o}:{Do:o}}},{key:"io",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new xm,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}},{key:"Co",value:function(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}},{key:"Vo",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.po=t.po.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.po=t.po.delete(e)}),this.current=e.current)}},{key:"So",value:function(){var e=this;if(!this.current)return[];var t=this.Eo;this.Eo=nd(),this.Ao.forEach(function(t){e.Co(t.key)&&(e.Eo=e.Eo.add(t.key))});var n=[];return t.forEach(function(t){e.Eo.has(t)||n.push(new jm(t))}),this.Eo.forEach(function(e){t.has(e)||n.push(new Vm(e))}),n}},{key:"No",value:function(e){this.po=e.Gn,this.Eo=nd();var t=this.bo(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return Im.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}]),e}(),Bm=function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r},Zm=function e(t){d(this,e),this.key=t,this.ko=!1},zm=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.$o={},this.Oo=new mv(function(e){return nh(e)},th),this.Fo=new Map,this.Mo=new Set,this.Lo=new zh(of.comparator),this.Bo=new Map,this.Uo=new tg,this.qo={},this.Ko=new Map,this.jo=iv.ie(),this.onlineState="Unknown",this.Qo=void 0}return h(e,[{key:"isPrimaryClient",get:function(){return!0===this.Qo}}]),e}();function Hm(e,t){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ly(t),!(o=r.Oo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,zv(r.localStore,Xf(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Km(r,n,i,"current"===s);case 13:a=e.sent,r.isPrimaryClient&&Vg(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Km(e,t,n,r){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.Wo=function(e,n,r){return(i=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.bo(r),e.t0=a.Ln,!e.t0){e.next=6;break}return e.next=5,Kv(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.bo(t,a)});case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(hy(t,n.targetId,u.Do),u.snapshot));case 8:case"end":return e.stop()}},e)})),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.next=3,Kv(t.localStore,n,!0);case 3:return a=e.sent,o=new qm(n,a.Gn),u=o.bo(a.documents),s=od.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),hy(t,r,c.Do),l=new Bm(n,r,o),e.abrupt("return",(t.Oo.set(n,l),t.Fo.has(r)?t.Fo.get(r).push(n):t.Fo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qm(e,t){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_l(t),i=r.Oo.get(n),!((a=r.Fo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Fo.set(i.targetId,a.filter(function(e){return!th(e,n)})),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Hv(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),jg(r.remoteStore,i.targetId),ly(r,i.targetId)}).catch(cv);case 9:e.next=14;break;case 11:return ly(r,i.targetId),e.next=14,Hv(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jm(){return(Jm=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=My(t),e.prev=1,e.next=4,function(e,t){var n,r=_l(e),i=Ul.now(),a=t.reduce(function(e,t){return e.add(t.key)},nd());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.Qn.Pn(e,a).next(function(a){n=a;var u,s=[],c=o(t);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=Ch(l,n.get(l.key));null!=f&&s.push(new Dh(l.key,f,_f(f.value.mapValue),Ih.exists(!0)))}}catch(h){c.e(h)}finally{c.f()}return r.In.addMutationBatch(e,i,s,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.qo[e.currentUser.toKey()];r||(r=new zh(Ll)),r=r.insert(t,n),e.qo[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,vy(i,a.changes);case 9:return e.next=11,nm(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=bm(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function $m(e,t){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_l(t),e.prev=1,e.next=4,qv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.Bo.get(t);n&&(bl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ko=!0:e.modifiedDocuments.size>0?bl(n.ko):e.removedDocuments.size>0&&(bl(n.ko),n.ko=!1))}),e.next=8,vy(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,cv(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function ey(e,t,n){var r=_l(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach(function(e,n){var r=n.view.io(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=_l(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,a=o(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.io(t)&&(r=!0)}}catch(u){a.e(u)}finally{a.f()}}),r&&Dm(n)}(r.eventManager,t),i.length&&r.$o.Rr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ty(e,t,n){return ny.apply(this,arguments)}function ny(){return(ny=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=_l(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Bo.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new zh(of.comparator)).insert(o,xf.newNoDocument(o,Vl.min())),s=nd().add(o),c=new ad(Vl.min(),new Map,new Kh(Ll),u,s),e.next=9,$m(i,c);case 9:i.Lo=i.Lo.remove(o),i.Bo.delete(n),py(i),e.next=16;break;case 14:return e.next=16,Hv(i.localStore,n,!1).then(function(){return ly(i,n,r)}).catch(cv);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ry(e,t){return iy.apply(this,arguments)}function iy(){return(iy=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_l(t),i=n.batch.batchId,e.prev=1,e.next=4,Vv(r.localStore,n);case 4:return a=e.sent,cy(r,i,null),sy(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,vy(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,cv(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function ay(e,t,n){return oy.apply(this,arguments)}function oy(){return(oy=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_l(t),e.prev=1,e.next=4,function(e,t){var n=_l(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.In.lookupMutationBatch(e,t).next(function(t){return bl(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t)}).next(function(){return n.In.performConsistencyCheck(e)}).next(function(){return n.Qn.Pn(e,r)})})}(i.localStore,n);case 4:return a=e.sent,cy(i,n,r),sy(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,vy(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,cv(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function uy(){return(uy=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Hg((r=_l(t)).remoteStore)||gl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=_l(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.In.getHighestUnacknowledgedBatchId(e)})}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ko.get(i)||[]).push(n),r.Ko.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=bm(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function sy(e,t){(e.Ko.get(t)||[]).forEach(function(e){e.resolve()}),e.Ko.delete(t)}function cy(e,t,n){var r=_l(e),i=r.qo[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.qo[r.currentUser.toKey()]=i}}function ly(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=o(e.Fo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Oo.delete(a),n&&e.$o.Go(a,n)}}catch(u){i.e(u)}finally{i.f()}e.Fo.delete(t),e.isPrimaryClient&&e.Uo.cs(t).forEach(function(t){e.Uo.containsKey(t)||fy(e,t)})}function fy(e,t){e.Mo.delete(t.path.canonicalString());var n=e.Lo.get(t);null!==n&&(jg(e.remoteStore,n),e.Lo=e.Lo.remove(t),e.Bo.delete(n),py(e))}function hy(e,t,n){var r,i=o(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Vm?(e.Uo.addReference(a.key,t),dy(e,a)):a instanceof jm?(gl("SyncEngine","Document no longer in limbo: "+a.key),e.Uo.removeReference(a.key,t),e.Uo.containsKey(a.key)||fy(e,a.key)):wl()}}catch(u){i.e(u)}finally{i.f()}}function dy(e,t){var n=t.key,r=n.path.canonicalString();e.Lo.get(n)||e.Mo.has(r)||(gl("SyncEngine","New document in limbo: "+n),e.Mo.add(r),py(e))}function py(e){for(;e.Mo.size>0&&e.Lo.size<e.maxConcurrentLimboResolutions;){var t=e.Mo.values().next().value;e.Mo.delete(t);var n=new of(zl.fromString(t)),r=e.jo.next();e.Bo.set(r,new Zm(n)),e.Lo=e.Lo.insert(n,r),Vg(e.remoteStore,new Ap(Xf(Gf(n.path)),r,2,Ol.T))}}function vy(e,t,n){return gy.apply(this,arguments)}function gy(){return(gy=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_l(t),a=[],u=[],s=[],e.t0=i.Oo.isEmpty(),e.t0){e.next=9;break}return i.Oo.forEach(function(e,t){s.push(i.Wo(t,n,r).then(function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Dv.kn(t.targetId,e);u.push(n)}}))}),e.next=6,Promise.all(s);case 6:return i.$o.Rr(a),e.next=9,(c=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_l(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return gp.forEach(n,function(t){return gp.forEach(t.Nn,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return gp.forEach(t.xn,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),bp(e.t0)){e.next=10;break}throw e.t0;case 10:gl("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=o(n);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.targetId,u.fromCache||(c=r.Un.get(s),l=c.withLastLimboFreeSnapshotVersion(c.snapshotVersion),r.Un=r.Un.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])})),function(e,t){return c.apply(this,arguments)})(i.localStore,u);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function my(e,t){return yy.apply(this,arguments)}function yy(){return(yy=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=_l(t)).currentUser.isEqual(n)){e.next=11;break}return gl("SyncEngine","User change. New user:",n.toKey()),e.next=5,Fv(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ko.forEach(function(e){e.forEach(function(e){e.reject(new Il(xl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ko.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,vy(r,i.Wn);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ky(e,t){var n=_l(e),r=n.Bo.get(t);if(r&&r.ko)return nd().add(r.key);var i=nd(),a=n.Fo.get(t);if(!a)return i;var u,s=o(a);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=n.Oo.get(c);i=i.unionWith(l.view.Ro)}}catch(f){s.e(f)}finally{s.f()}return i}function wy(e,t){return by.apply(this,arguments)}function by(){return(by=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_l(t),e.next=3,Kv(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.No(i),e.abrupt("return",(r.isPrimaryClient&&hy(r,n.targetId,a.Do),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _y(e){return xy.apply(this,arguments)}function xy(){return(xy=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=_l(t),e.abrupt("return",Qv(n.localStore).then(function(e){return vy(n,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Iy(e,t,n,r){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=_l(t),e.next=3,function(e,t){var n=_l(e),r=_l(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.Xt(e,t).next(function(t){return t?n.Qn.Pn(e,t):gp.resolve(null)})})}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,nm(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(cy(a,n,i||null),sy(a,n),function(e,t){_l(_l(e).In).te(t)}(a.localStore,n)):wl();case 11:return e.next=13,vy(a,o);case 13:e.next=16;break;case 15:gl("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ey(){return(Ey=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,u,s,c,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ly(r=_l(t)),My(r),!0!==n||!0===r.Qo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Sy(r,i.toArray());case 5:return a=e.sent,r.Qo=!0,e.next=9,gm(r.remoteStore,!0);case 9:u=o(a);try{for(u.s();!(s=u.n()).done;)c=s.value,Vg(r.remoteStore,c)}catch(h){u.e(h)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Qo){e.next=25;break}return l=[],f=Promise.resolve(),r.Fo.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then(function(){return ly(r,t),Hv(r.localStore,t,!0)}),jg(r.remoteStore,t)}),e.next=19,f;case 19:return e.next=21,Sy(r,l);case 21:return function(e){var t=_l(e);t.Bo.forEach(function(e,n){jg(t.remoteStore,n)}),t.Uo.us(),t.Bo=new Map,t.Lo=new zh(of.comparator)}(r),r.Qo=!1,e.next=25,gm(r.remoteStore,!1);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Sy(e,t,n){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,u,s,c,l,f,h,d,p,v,g,m,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=_l(t),a=[],u=[],s=o(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i.Fo.get(l))||0===h.length){e.next=34;break}return e.next=11,zv(i.localStore,Xf(h[0]));case 11:f=e.sent,d=o(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,g=i.Oo.get(v),e.next=20,wy(i,g);case 20:(m=e.sent).snapshot&&u.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Wv(i.localStore,l);case 36:return y=e.sent,e.next=39,zv(i.localStore,y);case 39:return f=e.sent,e.next=42,Km(i,Cy(y),l,!1);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.$o.Rr(u),a));case 54:case"end":return e.stop()}},e,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function Cy(e){return Hf(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ay(e){var t=_l(e);return _l(_l(t.localStore).persistence).pn()}function Ny(e,t,n,r){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=_l(t)).Qo){e.next=5;break}gl("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Fo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Qv(a.localStore);case 11:return o=e.sent,u=ad.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,vy(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,Hv(a.localStore,n,!0);case 18:return ly(a,n,i),e.abrupt("break",21);case 20:wl();case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dy(e,t,n){return Py.apply(this,arguments)}function Py(){return(Py=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,u,s,c,l,f,h,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Ly(t)).Qo){e.next=45;break}a=o(n),e.prev=3,a.s();case 5:if((u=a.n()).done){e.next=21;break}if(s=u.value,!i.Fo.has(s)){e.next=10;break}return gl("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Wv(i.localStore,s);case 12:return c=e.sent,e.next=15,zv(i.localStore,c);case 15:return l=e.sent,e.next=18,Km(i,Cy(c),l.targetId,!1);case 18:Vg(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=o(r),e.prev=30,d=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.Fo.has(t),!e.t0){e.next=5;break}return e.next=5,Hv(i.localStore,t,!1).then(function(){jg(i.remoteStore,t),ly(i,t)}).catch(cv);case 5:case"end":return e.stop()}},e)}),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function Ly(e){var t=_l(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=$m.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ky.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ty.bind(null,t),t.$o.Rr=Nm.bind(null,t.eventManager),t.$o.Go=Om.bind(null,t.eventManager),t}function My(e){var t=_l(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ry.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ay.bind(null,t),t}var Fy=function(){function e(){d(this,e),this.synchronizeTabs=!1}return h(e,[{key:"initialize",value:function(e){var t=this;return(0,eo.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.N=Sg(e.databaseInfo.databaseId),t.sharedClientState=t.Ho(e),t.persistence=t.Jo(e),n.next=5,t.persistence.start();case 5:t.gcScheduler=t.Yo(e),t.localStore=t.Xo(e);case 7:case"end":return n.stop()}},n)}))()}},{key:"Yo",value:function(e){return null}},{key:"Xo",value:function(e){return Mv(this.persistence,new Pv,e.initialUser,this.N)}},{key:"Jo",value:function(e){return new ug(cg.Ns,this.N)}},{key:"Ho",value:function(e){return new kg}},{key:"terminate",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.gcScheduler&&e.gcScheduler.stop(),t.next=3,e.sharedClientState.shutdown();case 3:return t.next=5,e.persistence.shutdown();case 5:case"end":return t.stop()}},t)}))()}}]),e}(),Uy=function(e){p(r,e);var n=v(r);function r(e,t,i){var a;return d(this,r),(a=n.call(this)).Zo=e,a.cacheSizeBytes=t,a.forceOwnership=i,a.synchronizeTabs=!1,a}return h(r,[{key:"initialize",value:function(e){var n=this,i=this;return(0,eo.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(_(r.prototype),"initialize",n).call(i,e);case 2:return a.next=4,function(e){return Yv.apply(this,arguments)}(i.localStore);case 4:return a.next=6,i.Zo.initialize(i,e);case 6:return a.next=8,My(i.Zo.syncEngine);case 8:return a.next=10,nm(i.Zo.remoteStore);case 10:return a.next=12,i.persistence.nn(function(){return i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()});case 12:case"end":return a.stop()}},a)}))()}},{key:"Xo",value:function(e){return Mv(this.persistence,new Pv,e.initialUser,this.N)}},{key:"Yo",value:function(e){return new dv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}},{key:"Jo",value:function(e){var t=Av(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Yp.withCacheSize(this.cacheSizeBytes):Yp.DEFAULT;return new Sv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Tg(),Eg(),this.N,this.sharedClientState,!!this.forceOwnership)}},{key:"Ho",value:function(e){return new kg}}]),r}(Fy),Vy=function(e){p(r,e);var n=v(r);function r(e,t){var i;return d(this,r),(i=n.call(this,e,t,!1)).Zo=e,i.cacheSizeBytes=t,i.synchronizeTabs=!0,i}return h(r,[{key:"initialize",value:function(e){var n=this,i=this;return(0,eo.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(_(r.prototype),"initialize",n).call(i,e);case 2:if(o=i.Zo.syncEngine,a.t0=i.sharedClientState instanceof yg,!a.t0){a.next=8;break}return i.sharedClientState.syncEngine={_i:Iy.bind(null,o),mi:Ny.bind(null,o),gi:Dy.bind(null,o),pn:Ay.bind(null,o),wi:_y.bind(null,o)},a.next=8,i.sharedClientState.start();case 8:return a.next=10,i.persistence.nn(function(){var e=(0,eo.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return Ey.apply(this,arguments)}(i.Zo.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return a.stop()}},a)}))()}},{key:"Ho",value:function(e){var t=Tg();if(!yg.bt(t))throw new Il(xl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Av(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),r}(Uy),jy=function(){function e(){d(this,e)}return h(e,[{key:"initialize",value:function(e,t){var n=this;return(0,eo.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n.localStore,r.t0){r.next=12;break}return n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=function(e){return ey(n.syncEngine,e,1)},n.remoteStore.remoteSyncer.handleCredentialChange=my.bind(null,n.syncEngine),r.next=12,gm(n.remoteStore,n.syncEngine.isPrimaryClient);case 12:case"end":return r.stop()}},r)}))()}},{key:"createEventManager",value:function(e){return new Em}},{key:"createDatastore",value:function(e){var t=Sg(e.databaseInfo.databaseId),n=new Ig(e.databaseInfo);return function(e,t,n){return new Og(e,t,n)}(e.credentials,n,t)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ey(o.syncEngine,e,0)},a=bg.bt()?new bg:new wg,new Pg(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new zm(e,t,n,r,i,a);return o&&(u.Qo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return(e=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=_l(t),gl("RemoteStore","RemoteStore shutting down."),n.Wr.add(5),e.next=5,Fg(n);case 5:n.zr.shutdown(),n.Hr.set("Unknown");case 7:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]),e}();function qy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,eo.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}))()},cancel:function(){return(0,eo.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var By=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return h(e,[{key:"next",value:function(e){this.observer.next&&this.tc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"ec",value:function(){this.muted=!0}},{key:"tc",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Zy=function(){function e(t,n){var r=this;d(this,e),this.nc=t,this.N=n,this.metadata=new Tl,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(function(e){e&&e.wo()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))},function(e){return r.metadata.reject(e)})}return h(e,[{key:"close",value:function(){return this.nc.cancel()}},{key:"getMetadata",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.metadata.promise);case 1:case"end":return t.stop()}},t)}))()}},{key:"zo",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMetadata();case 2:return t.abrupt("return",e.ic());case 3:case"end":return t.stop()}},t)}))()}},{key:"ic",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rc();case 2:if(null!==(n=t.sent)){t.next=5;break}return t.abrupt("return",null);case 5:return r=e.sc.decode(n),i=Number(r),isNaN(i)&&e.oc("length string (".concat(r,") is not valid number")),t.next=9,e.cc(i);case 9:return a=t.sent,t.abrupt("return",new Lm(JSON.parse(a),n.length+i));case 11:case"end":return t.stop()}},t)}))()}},{key:"ac",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"rc",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.ac()<0,!t.t0){t.next=5;break}return t.next=4,e.uc();case 4:t.t0=!t.sent;case 5:if(!t.t0){t.next=9;break}case 7:t.next=0;break;case 9:if(0!==e.buffer.length){t.next=11;break}return t.abrupt("return",null);case 11:return(n=e.ac())<0&&e.oc("Reached the end of bundle when a length string is expected."),r=e.buffer.slice(0,n),t.abrupt("return",(e.buffer=e.buffer.slice(n),r));case 15:case"end":return t.stop()}},t)}))()}},{key:"cc",value:function(e){var t=this;return(0,eo.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.buffer.length<e)){n.next=8;break}return n.next=3,t.uc();case 3:if(n.t0=n.sent,!n.t0){n.next=6;break}t.oc("Reached the end of bundle when more is expected.");case 6:n.next=0;break;case 8:return r=t.sc.decode(t.buffer.slice(0,e)),n.abrupt("return",(t.buffer=t.buffer.slice(e),r));case 10:case"end":return n.stop()}},n)}))()}},{key:"oc",value:function(e){throw this.nc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"uc",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.nc.read();case 2:return(n=t.sent).done||((r=new Uint8Array(e.buffer.length+n.value.length)).set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r),t.abrupt("return",n.done);case 5:case"end":return t.stop()}},t)}))()}}]),e}(),zy=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return h(e,[{key:"lookup",value:function(e){var t=this;return(0,eo.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.ensureCommitNotCalled(),!(t.mutations.length>0)){n.next=2;break}throw new Il(xl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return n.next=4,(i=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_l(t),i=Sd(r.N)+"/documents",a={documents:n.map(function(e){return xd(r.N,e)})},e.next=5,r.Ki("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach(function(e){var t=function(e,t){return"found"in t?function(e,t){bl(!!t.found);var n=Id(e,t.found.name),r=wd(t.found.updateTime),i=new bf({mapValue:{fields:t.found.fields}});return xf.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){bl(!!t.missing),bl(!!t.readTime);var n=Id(e,t.missing),r=wd(t.readTime);return xf.newNoDocument(n,r)}(e,t):wl()}(r.N,e);u.set(t.key.toString(),t)}),s=[],e.abrupt("return",(n.forEach(function(e){var t=u.get(e.toString());bl(!!t),s.push(t)}),s));case 10:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})(t.datastore,e);case 4:return r=n.sent,n.abrupt("return",(r.forEach(function(e){return t.recordVersion(e)}),r));case 6:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Vh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ensureCommitNotCalled(),!e.lastWriteError){t.next=2;break}throw e.lastWriteError;case 2:return n=e.readVersions,e.mutations.forEach(function(e){n.delete(e.key.toString())}),n.forEach(function(t,n){var r=of.fromPath(n);e.mutations.push(new jh(r,e.precondition(r)))}),t.next=7,(r=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_l(t),i=Sd(r.N)+"/documents",a={writes:n.map(function(e){return Nd(r.N,e)})},e.next=3,r.Li("Commit",i,a);case 3:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(e.datastore,e.mutations);case 7:e.committed=!0;case 8:case"end":return t.stop()}},t)}))()}},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wl();t=Vl.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Il(xl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ih.updateTime(t):Ih.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vl.min()))throw new Il(xl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ih.updateTime(t)}return Ih.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Hy=function(){function e(t,n,r,i){d(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.hc=5,this.ar=new Rg(this.asyncQueue,"transaction_retry")}return h(e,[{key:"run",value:function(){this.hc-=1,this.lc()}},{key:"lc",value:function(){var e=this;this.ar.Xi((0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new zy(e.datastore),(r=e.fc(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.dc(t)})})}).catch(function(t){e.dc(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"fc",value:function(e){try{var t=this.updateFunction(e);return!nf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"dc",value:function(e){var t=this;this.hc>0&&this.wc(e)?(this.hc-=1,this.asyncQueue.enqueueAndForget(function(){return t.lc(),Promise.resolve()})):this.deferred.reject(e)}},{key:"wc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Bh(t)}return!1}}]),e}(),Gy=function(){function e(t,n,r){d(this,e);var i,a=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=hl.UNAUTHENTICATED,this.clientId=Pl.I(),this.credentialListener=function(){return Promise.resolve()},this.credentials.start(n,(i=(0,eo.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return gl("FirestoreClient","Received user=",t.uid),e.next=3,a.credentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}))}return h(e,[{key:"getConfiguration",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}},t)}))()}},{key:"setCredentialChangeListener",value:function(e){this.credentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Il(xl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Tl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,eo.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.credentials.shutdown(),t.resolve(),n.next=17;break;case 13:n.prev=13,n.t2=n.catch(0),r=bm(n.t2,"Failed to shutdown persistence"),t.reject(r);case 17:case"end":return n.stop()}},n,null,[[0,13]])}))),t.promise}}]),e}();function Ky(e,t){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),gl("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,eo.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Fv(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qy(e,t){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Jy(t);case 3:return r=e.sent,gl("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return(t=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=_l(t)).asyncQueue.verifyOperationInProgress(),gl("RemoteStore","RemoteStore received new credentials"),i=Hg(r),r.Wr.add(3),e.next=6,Fg(r);case 6:return i&&r.Hr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Wr.delete(3),e.next=12,Lg(r);case 12:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})(n.remoteStore,e);var t}),t.onlineComponents=n;case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jy(e){return $y.apply(this,arguments)}function $y(){return($y=(0,eo.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return gl("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Ky(t,new Fy);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xy(e){return ek.apply(this,arguments)}function ek(){return(ek=(0,eo.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return gl("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Qy(t,new jy);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tk(e){return Jy(e).then(function(e){return e.persistence})}function nk(e){return Jy(e).then(function(e){return e.localStore})}function rk(e){return Xy(e).then(function(e){return e.remoteStore})}function ik(e){return Xy(e).then(function(e){return e.syncEngine})}function ak(e){return ok.apply(this,arguments)}function ok(){return(ok=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Hm.bind(null,n.syncEngine),r.onUnlisten=Qm.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function uk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Tl;return e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new By({next:function(a){t.enqueueAndForget(function(){return Cm(e,o)});var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Il(xl.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Il(xl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Pm(Gf(n.path),a,{includeMetadataChanges:!0,fo:!0});return Sm(e,o)},i.next=3,ak(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function sk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Tl;return e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new By({next:function(n){t.enqueueAndForget(function(){return Cm(e,o)}),n.fromCache&&"server"===r.source?i.reject(new Il(xl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Pm(n,a,{includeMetadataChanges:!0,fo:!0});return Sm(e,o)},i.next=3,ak(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}var ck=function e(t,n,r,i,a,o,u,s){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s},lk=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return h(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),fk=new Map;function hk(e,t,n){if(!n)throw new Il(xl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function dk(e,t,n,r){if(!0===t&&!0===r)throw new Il(xl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function pk(e){if(!of.isDocumentKey(e))throw new Il(xl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function vk(e){if(of.isDocumentKey(e))throw new Il(xl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function gk(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":wl()}function mk(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Il(xl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=gk(e);throw new Il(xl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function yk(e,t){if(t<=0)throw new Il(xl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var kk=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Il(xl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Il(xl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,dk("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return h(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),wk=function(){function e(t,n){d(this,e),this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kk({}),this._settingsFrozen=!1,t instanceof lk?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Il(xl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lk(e.options.projectId)}(t))}return h(e,[{key:"app",get:function(){if(!this._app)throw new Il(xl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Il(xl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kk(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Sl;switch(e.type){case"gapi":var t=e.client;return bl(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Nl(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Il(xl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=fk.get(e);t&&(gl("ComponentProvider","Removing Datastore"),fk.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}(),bk=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return h(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new xk(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),_k=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return h(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),xk=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,Gf(i)))._path=i,a.type="collection",a}return h(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new bk(this.firestore,null,new of(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(_k);function Ik(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,io.m9)(e),hk("collection","path",t),e instanceof wk){var a=zl.fromString.apply(zl,[t].concat(r));return vk(a),new xk(e,null,a)}if(!(e instanceof bk||e instanceof xk))throw new Il(xl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zl.fromString.apply(zl,[t].concat(r)));return vk(o),new xk(e.firestore,null,o)}function Tk(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,io.m9)(e),1===arguments.length&&(t=Pl.I()),hk("doc","path",t),e instanceof wk){var a=zl.fromString.apply(zl,[t].concat(r));return pk(a),new bk(e,null,new of(a))}if(!(e instanceof bk||e instanceof xk))throw new Il(xl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zl.fromString.apply(zl,[t].concat(r)));return pk(o),new bk(e.firestore,e instanceof xk?e.converter:null,new of(o))}function Ek(e,t){return e=(0,io.m9)(e),t=(0,io.m9)(t),(e instanceof bk||e instanceof xk)&&(t instanceof bk||t instanceof xk)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Sk(e,t){return e=(0,io.m9)(e),t=(0,io.m9)(t),e instanceof _k&&t instanceof _k&&e.firestore===t.firestore&&th(e._query,t._query)&&e.converter===t.converter}var Rk=function(){function e(){var t=this;d(this,e),this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new Rg(this,"async_queue_retry"),this.Rc=function(){var e=Eg();e&&gl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ar.tr()};var n=Eg();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Rc)}return h(e,[{key:"isShuttingDown",get:function(){return this.gc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.bc(),this.Pc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;var t=Eg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Rc)}}},{key:"enqueue",value:function(e){var t=this;if(this.bc(),this.gc)return new Promise(function(){});var n=new Tl;return this.Pc(function(){return t.gc&&t.Ic?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.mc.push(e),t.vc()})}},{key:"vc",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.mc.length){t.next=14;break}return t.prev=1,t.next=4,e.mc[0]();case 4:e.mc.shift(),e.ar.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),bp(t.t0)){t.next=12;break}throw t.t0;case 12:gl("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:e.mc.length>0&&e.ar.Xi(function(){return e.vc()});case 14:case"end":return t.stop()}},t,null,[[1,8]])}))()}},{key:"Pc",value:function(e){var t=this,n=this._c.then(function(){return t.Ec=!0,e().catch(function(e){throw t.Tc=e,t.Ec=!1,ml("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(function(e){return t.Ec=!1,e})});return this._c=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.bc(),this.Ac.indexOf(e)>-1&&(t=0);var i=wm.createAndSchedule(this,e,t,n,function(e){return r.Vc(e)});return this.yc.push(i),i}},{key:"bc",value:function(){this.Tc&&wl()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sc",value:function(){var e=this;return(0,eo.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._c,t.next=3,n;case 3:if(n!==e._c){t.next=0;break}case 4:case"end":return t.stop()}},t)}))()}},{key:"Dc",value:function(e){var t,n=o(this.yc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Cc",value:function(e){var t=this;return this.Sc().then(function(){t.yc.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=o(t.yc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Sc()})}},{key:"Nc",value:function(e){this.Ac.push(e)}},{key:"Vc",value:function(e){var t=this.yc.indexOf(e);this.yc.splice(t,1)}}]),e}();function Ck(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var Ak=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new Tl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return h(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Nk=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).type="firestore",i._queue=new Rk,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return h(n,[{key:"_terminate",value:function(){return this._firestoreClient||Dk(this),this._firestoreClient.terminate()}}]),n}(wk);function Ok(e){return e._firestoreClient||Dk(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Dk(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ck(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Gy(e._credentials,e._queue,r)}function Pk(e,t,n){var r=new Tl;return e.asyncQueue.enqueue((0,eo.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Ky(e,n);case 3:return i.next=5,Qy(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===xl.FAILED_PRECONDITION||e.code===xl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function Lk(e){if(e._initialized||e._terminated)throw new Il(xl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Mk=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Il(xl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gl(n)}return h(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),Fk=function(){function e(t){d(this,e),this._byteString=t}return h(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Wl.fromBase64String(t))}catch(t){throw new Il(xl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Wl.fromUint8Array(t))}}]),e}(),Uk=function e(t){d(this,e),this._methodName=t},Vk=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Il(xl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Il(xl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return h(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ll(this._lat,e._lat)||Ll(this._long,e._long)}}]),e}(),jk=/^__.*__$/,qk=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Dh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oh(e,this.data,t,this.fieldTransforms)}}]),e}(),Bk=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return new Dh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Zk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wl()}}var zk=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.N=r,this.ignoreUndefinedProperties=i,void 0===a&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return h(e,[{key:"path",get:function(){return this.settings.path}},{key:"kc",get:function(){return this.settings.kc}},{key:"$c",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$c({path:n,Fc:!1});return r.Mc(e),r}},{key:"Lc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$c({path:n,Fc:!1});return r.xc(),r}},{key:"Bc",value:function(e){return this.$c({path:void 0,Fc:!0})}},{key:"Uc",value:function(e){return lw(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}},{key:"Mc",value:function(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(Zk(this.kc)&&jk.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}]),e}(),Hk=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.N=r||Sg(t)}return h(e,[{key:"jc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new zk({kc:e,methodName:t,Kc:n,path:Gl.emptyPath(),Fc:!1,qc:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}]),e}();function Gk(e){var t=e._freezeSettings(),n=Sg(e._databaseId);return new Hk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Kk(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=e.jc(a.merge||a.mergeFields?2:0,t,n,i);ow("Data must be an object, but it was:",u,r);var s,c,l=iw(r,u);if(a.merge)s=new Kl(u.fieldMask),c=u.fieldTransforms;else if(a.mergeFields){var f,h=[],d=o(a.mergeFields);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=uw(t,p,n);if(!u.contains(v))throw new Il(xl.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));fw(h,v)||h.push(v)}}catch(g){d.e(g)}finally{d.f()}s=new Kl(h),c=u.fieldTransforms.filter(function(e){return s.covers(e.field)})}else s=null,c=u.fieldTransforms;return new qk(new bf(l),s,c)}var Wk=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.kc)throw e.Uc(1===e.kc?"".concat(this._methodName,"() can only appear at the top level of your update data"):"".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Uk);function Qk(e,t,n){return new zk({kc:3,Kc:t.settings.Kc,methodName:e._methodName,Fc:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}var Yk=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){return new _h(e.path,new ph)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Uk),Jk=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Qc=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=Qk(this,e,!0),n=this.Qc.map(function(e){return rw(e,t)}),r=new vh(n);return new _h(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Uk),$k=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Qc=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=Qk(this,e,!0),n=this.Qc.map(function(e){return rw(e,t)}),r=new mh(n);return new _h(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Uk),Xk=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Wc=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=new kh(e.N,ch(e.N,this.Wc));return new _h(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Uk);function ew(e,t,n,r){var i=e.jc(1,t,n);ow("Data must be an object, but it was:",i,r);var a=[],o=bf.empty();ql(r,function(e,r){var u=cw(t,e,n);r=(0,io.m9)(r);var s=i.Lc(u);if(r instanceof Wk)a.push(u);else{var c=rw(r,s);null!=c&&(a.push(u),o.set(u,c))}});var u=new Kl(a);return new Bk(o,u,i.fieldTransforms)}function tw(e,t,n,r,i,a){var o=e.jc(1,t,n),u=[uw(t,r,n)],s=[i];if(a.length%2!=0)throw new Il(xl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(uw(t,a[c])),s.push(a[c+1]);for(var l=[],f=bf.empty(),h=u.length-1;h>=0;--h)if(!fw(l,u[h])){var d=u[h],p=s[h];p=(0,io.m9)(p);var v=o.Lc(d);if(p instanceof Wk)l.push(d);else{var g=rw(p,v);null!=g&&(l.push(d),f.set(d,g))}}var m=new Kl(l);return new Bk(f,m,o.fieldTransforms)}function nw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return rw(n,e.jc(r?4:3,t))}function rw(e,t){if(aw(e=(0,io.m9)(e)))return ow("Unsupported field value:",t,e),iw(e,t);if(e instanceof Uk)return function(e,t){if(!Zk(t.kc))throw t.Uc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Uc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.kc)throw t.Uc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=o(e);try{for(a.s();!(n=a.n()).done;){var u=rw(n.value,t.Bc(i));null==u&&(u={nullValue:"NULL_VALUE"}),r.push(u),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,io.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ch(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ul.fromDate(e);return{timestampValue:md(t.N,n)}}if(e instanceof Ul){var r=new Ul(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:md(t.N,r)}}if(e instanceof Vk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fk)return{bytesValue:yd(t.N,e._byteString)};if(e instanceof bk){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Uc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:bd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Uc("Unsupported field value: ".concat(gk(e)))}(e,t)}function iw(e,t){var n={};return Bl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ql(e,function(e,r){var i=rw(r,t.Oc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function aw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ul||e instanceof Vk||e instanceof Fk||e instanceof bk||e instanceof Uk)}function ow(e,t,n){if(!aw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=gk(n);throw t.Uc("an object"===r?e+" a custom object":e+" "+r)}}function uw(e,t,n){if((t=(0,io.m9)(t))instanceof Mk)return t._internalPath;if("string"==typeof t)return cw(e,t);throw lw("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var sw=new RegExp("[~\\*/\\[\\]]");function cw(e,t,n){if(t.search(sw)>=0)throw lw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return k(Mk,u(t.split(".")))._internalPath}catch(r){throw lw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function lw(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Il(xl.INVALID_ARGUMENT,u+e+s)}function fw(e,t){return e.some(function(e){return e.isEqual(t)})}var hw=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return h(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new bk(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new dw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(pw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),dw=function(e){p(r,e);var n=v(r);function r(){return d(this,r),n.apply(this,arguments)}return h(r,[{key:"data",value:function(){return t(_(r.prototype),"data",this).call(this)}}]),r}(hw);function pw(e,t){return"string"==typeof t?cw(e,t):t instanceof Mk?t._internalPath:t._delegate._internalPath}var vw=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return h(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),gw=function(e){p(r,e);var n=v(r);function r(e,t,i,a,o,u){var s;return d(this,r),(s=n.call(this,e,t,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return h(r,[{key:"exists",value:function(){return t(_(r.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new mw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(pw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),r}(hw),mw=function(e){p(r,e);var n=v(r);function r(){return d(this,r),n.apply(this,arguments)}return h(r,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(_(r.prototype),"data",this).call(this,e)}}]),r}(gw),yw=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new vw(i.hasPendingWrites,i.fromCache),this.query=r}return h(e,[{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new mw(n._firestore,n._userDataWriter,r.key,r,new vw(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Il(xl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new mw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new mw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:kw(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function kw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wl()}}function ww(e,t){return e instanceof gw&&t instanceof gw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof yw&&t instanceof yw&&e._firestore===t._firestore&&Sk(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function bw(e){if(Wf(e)&&0===e.explicitOrderBy.length)throw new Il(xl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _w=function e(){d(this,e)};function xw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Iw=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Gc=e,a.zc=r,a.Hc=i,a.type="where",a}return h(n,[{key:"_apply",value:function(e){var t=Gk(e.firestore),n=function(e,t,n,r,i,a,u){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Il(xl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){Nw(u,a);var c,l=[],f=o(u);try{for(f.s();!(c=f.n()).done;){var h=c.value;l.push(Aw(r,e,h))}}catch(p){f.e(p)}finally{f.f()}s={arrayValue:{values:l}}}else s=Aw(r,e,u)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Nw(u,a),s=nw(n,"where",u,"in"===a||"not-in"===a);var d=Cf.create(i,a,s);return function(e,t){if(t.v()){var n=Yf(e);if(null!==n&&!n.isEqual(t.field))throw new Il(xl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Qf(e);null!==r&&Ow(0,t.field,r)}var i=function(e,t){var n,r=o(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new Il(xl.INVALID_ARGUMENT,i===t.op?"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,t,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new _k(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new zf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(_w),Tw=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Gc=e,i.Jc=r,i.type="orderBy",i}return h(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Il(xl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Il(xl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new jf(t,n);return function(e,t){if(null===Qf(e)){var n=Yf(e);null!==n&&Ow(0,n,t.field)}}(e,r),r}(e._query,this.Gc,this.Jc);return new _k(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new zf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(_w),Ew=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Yc=r,a.Xc=i,a}return h(n,[{key:"_apply",value:function(e){return new _k(e.firestore,e.converter,eh(e._query,this.Yc,this.Xc))}}]),n}(_w),Sw=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Zc=r,a.ta=i,a}return h(n,[{key:"_apply",value:function(e){var t=Cw(e,this.type,this.Zc,this.ta);return new _k(e.firestore,e.converter,function(e,t){return new zf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(_w),Rw=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Zc=r,a.ta=i,a}return h(n,[{key:"_apply",value:function(e){var t=Cw(e,this.type,this.Zc,this.ta);return new _k(e.firestore,e.converter,function(e,t){return new zf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(_w);function Cw(e,t,n,r){if(n[0]=(0,io.m9)(n[0]),n[0]instanceof hw)return function(e,t,n,r,i){if(!r)throw new Il(xl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,u=[],s=o($f(e));try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.field.isKeyField())u.push(pf(t,r.key));else{var l=r.data.field(c.field);if(Xl(l))throw new Il(xl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var f=c.field.canonicalString();throw new Il(xl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(f,"' (used as the orderBy) does not exist."))}u.push(l)}}}catch(h){s.e(h)}finally{s.f()}return new Uf(u,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Gk(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Il(xl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Il(xl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Jf(e)&&-1!==c.indexOf("/"))throw new Il(xl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(zl.fromString(c));if(!of.isDocumentKey(l))throw new Il(xl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new of(l);u.push(pf(t,f))}else{var h=nw(n,r,c);u.push(h)}}return new Uf(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Aw(e,t,n){if("string"==typeof(n=(0,io.m9)(n))){if(""===n)throw new Il(xl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jf(t)&&-1!==n.indexOf("/"))throw new Il(xl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(zl.fromString(n));if(!of.isDocumentKey(r))throw new Il(xl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return pf(e,new of(r))}if(n instanceof bk)return pf(e,n._key);throw new Il(xl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gk(n),"."))}function Nw(e,t){if(!Array.isArray(e)||0===e.length)throw new Il(xl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Il(xl.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Ow(e,t,n){if(!n.isEqual(t))throw new Il(xl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Dw=function(){function e(){d(this,e)}return h(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(uf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($l(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wl()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return ql(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Vk(Jl(e.latitude),Jl(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ef(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(tf(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Yl(e);return new Ul(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=zl.fromString(e);bl(Gd(n));var r=new lk(n.get(1),n.get(3)),i=new of(n.popFirst(5));return r.isEqual(t)||ml("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Pw(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Lw=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Fk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bk(this.firestore,null,t)}}]),n}(Dw),Mw=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gk(t)}return h(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Fw(e,this._firestore),i=Pw(r.converter,t,n),a=Kk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ih.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Fw(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=(0,io.m9)(t))||t instanceof Mk?tw(this._dataReader,"WriteBatch.update",i._key,t,n,o):ew(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ih.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Fw(e,this._firestore);return this._mutations=this._mutations.concat(new Vh(t._key,Ih.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Il(xl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Fw(e,t){if((e=(0,io.m9)(e)).firestore!==t)throw new Il(xl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Uw=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Fk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bk(this.firestore,null,t)}}]),n}(Dw);function Vw(e,t,n){e=mk(e,bk);var r=mk(e.firestore,Nk),i=Pw(e.converter,t,n);return Bw(r,[Kk(Gk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ih.none())])}function jw(e,t,n){e=mk(e,bk);for(var r=mk(e.firestore,Nk),i=Gk(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Bw(r,[("string"==typeof(t=(0,io.m9)(t))||t instanceof Mk?tw(i,"updateDoc",e._key,t,n,o):ew(i,"updateDoc",e._key,t)).toMutation(e._key,Ih.exists(!0))])}function qw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=(0,io.m9)(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Ck(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Ck(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof bk)l=mk(e.firestore,Nk),f=Gf(e._key.path),c={next:function(t){n[s]&&n[s](Zw(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=mk(e,_k);l=mk(p.firestore,Nk),f=p._query;var v=new Uw(l);c={next:function(e){n[s]&&n[s](new yw(l,v,p,e))},error:n[s+1],complete:n[s+2]},bw(e._query)}return function(e,t,n,r){var i=new By(r),a=new Pm(t,i,n);return e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Sm,t.next=3,ak(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.ec(),e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Cm,t.next=3,ak(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(Ok(l),f,h,c)}function Bw(e,t){return function(e,t){var n=new Tl;return e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(e,t,n){return Jm.apply(this,arguments)},r.next=3,ik(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(Ok(e),t)}function Zw(e,t,n){var r=n.docs.get(t._key),i=new Uw(e);return new gw(e,i,t._key,r,new vw(n.hasPendingWrites,n.fromCache),t.converter)}var zw=function(e){p(r,e);var n=v(r);function r(e,t){var i;return d(this,r),(i=n.call(this,e,t))._firestore=e,i}return h(r,[{key:"get",value:function(e){var n=this,i=Fw(e,this._firestore),a=new Uw(this._firestore);return t(_(r.prototype),"get",this).call(this,e).then(function(e){return new gw(n._firestore,a,i._key,e._document,new vw(!1,!1),i.converter)})}}]),r}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=Gk(t)}return h(e,[{key:"get",value:function(e){var t=this,n=Fw(e,this._firestore),r=new Lw(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return wl();var i=e[0];if(i.isFoundDocument())return new hw(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new hw(t._firestore,r,n._key,null,n.converter);throw wl()})}},{key:"set",value:function(e,t,n){var r=Fw(e,this._firestore),i=Pw(r.converter,t,n),a=Kk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Fw(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=(0,io.m9)(t))||t instanceof Mk?tw(this._dataReader,"Transaction.update",i._key,t,n,o):ew(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Fw(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Hw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Il("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function Gw(){if("undefined"==typeof Uint8Array)throw new Il("unimplemented","Uint8Arrays are not available in this environment.")}function Kw(){if("undefined"==typeof atob)throw new Il("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){dl=e}(to.SDK_VERSION),(0,to._registerComponent)(new no.wA("firestore",function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Nk(i,new Cl(e.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC")),(0,to.registerVersion)("@firebase/firestore","3.3.0",e),(0,to.registerVersion)("@firebase/firestore","3.3.0","esm2017")}();var Ww=function(){function e(t){d(this,e),this._delegate=t}return h(e,[{key:"toBase64",value:function(){return Kw(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Gw(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Kw(),new e(Fk.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Gw(),new e(Fk.fromUint8Array(t))}}]),e}();function Qw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var Yw=function(){function e(){d(this,e)}return h(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Lk(e=mk(e,Nk));var n=Ok(e),r=e._freezeSettings(),i=new jy;return Pk(n,i,new Uy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Lk(e=mk(e,Nk));var t=Ok(e),n=e._freezeSettings(),r=new jy;return Pk(t,r,new Vy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Il(xl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Tl;return e._queue.enqueueAndForgetEvenWhileRestricted((0,eo.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(r=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(yp.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,yp.delete(n);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})(Av(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}(e._delegate)}}]),e}(),Jw=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof lk||(this._appCompat=t)}return h(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||yl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=mk(e,wk))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&yl("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=hl.MOCK_USER;else{o=(0,io.Sg)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Il(xl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new hl(s)}e._credentials=new Rl(new El(o,u))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tk(e);case 2:return n=t.sent,t.next=5,rk(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=_l(e);return t.Wr.delete(0),Lg(t)}(r)));case 7:case"end":return t.stop()}},t)})))}(Ok(e=mk(e,Nk)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,eo.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tk(e);case 2:return n=t.sent,t.next=5,rk(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),(i=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=_l(t)).Wr.add(0),e.next=4,Fg(n);case 4:n.Hr.set("Offline");case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})(r)));case 7:case"end":return t.stop()}},t)})))}(Ok(e=mk(e,Nk)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&dk("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Tl;return e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){return uy.apply(this,arguments)},n.next=3,ik(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)}))),t.promise}(Ok(e=mk(e,Nk)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function(e,t){return function(e,t){var n=new By(t);return e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){_l(e).so.add(t),t.next()},t.next=3,ak(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){n.ec(),e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){_l(e).so.delete(t)},t.next=3,ak(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(Ok(e=mk(e,Nk)),Ck(t)?t:{next:t})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Il("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new fb(this,Ik(this._delegate,e))}catch(t){throw rb(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new nb(this,Tk(this._delegate,e))}catch(t){throw rb(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new sb(this,function(e,t){if(e=mk(e,wk),hk("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Il(xl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new _k(e,null,function(e){return new zf(zl.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw rb(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(n,r){return function(e,t){var n=new Tl;return e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Xy(e).then(function(e){return e.datastore})}(e);case 2:i=r.sent,new Hy(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}},r)}))),n.promise}(Ok(n=mk(n,Nk)),function(r){return i=new zw(n,r),e(new Xw(t,i));var i})}(this._delegate)}},{key:"batch",value:function(){var e=this;return Ok(this._delegate),new eb(new Mw(this._delegate,function(t){return Bw(e._delegate,t)}))}},{key:"loadBundle",value:function(e){return function(e,t){var n=Ok(e=mk(e,Nk)),r=new Ak;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Zy(e,t)}(function(e,t){if(e instanceof Uint8Array)return qy(e,t);if(e instanceof ArrayBuffer)return qy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Sg(t));e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n){var r,i=_l(e);(r=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=_l(e),r=wd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n.Je.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(Um(i)),a=new Fm(i,t.localStore,n.N),e.next=14,n.zo();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.mo(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.zo();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,vy(t,s.En,void 0);case 30:return e.next=32,function(e,t){var n=_l(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n.Je.saveBundleMetadata(e,t)})}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),yl("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}},e,null,[[0,35]])})),function(e,t,n){return r.apply(this,arguments)})(i,t,n).then(function(){i.sharedClientState.notifyBundleLoaded()})},t.next=3,ik(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}(n,e._databaseId,t,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,eo.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=_l(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n.Je.getNamedQuery(e,t)})},n.next=3,nk(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}(Ok(e=mk(e,Nk)),t).then(function(t){return t?new _k(e,null,t.query):null})}(this._delegate,e).then(function(e){return e?new sb(t,e):null})}}]),e}(),$w=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Ww(new Fk(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return nb.forKey(t,this.firestore,null)}}]),n}(Dw),Xw=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new $w(t)}return h(e,[{key:"get",value:function(e){var t=this,n=hb(e);return this._delegate.get(n).then(function(e){return new ob(t._firestore,new gw(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=hb(e);return n?(Hw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var u=hb(e);return 2===arguments.length?this._delegate.update(u,t):(r=this._delegate).update.apply(r,[u,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=hb(e);return this._delegate.delete(t),this}}]),e}(),eb=function(){function e(t){d(this,e),this._delegate=t}return h(e,[{key:"set",value:function(e,t,n){var r=hb(e);return n?(Hw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var u=hb(e);return 2===arguments.length?this._delegate.update(u,t):(r=this._delegate).update.apply(r,[u,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=hb(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),tb=function(){var e=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return h(e,[{key:"fromFirestore",value:function(e,t){var n=new mw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ub(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new $w(t),n),i.set(n,a)),a}}]),e}();return e.INSTANCES=new WeakMap,e}(),nb=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $w(t)}return h(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new fb(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new fb(this.firestore,Ik(this._delegate,e))}catch(t){throw rb(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,io.m9)(e))instanceof bk&&Ek(this._delegate,e)}},{key:"set",value:function(e,t){t=Hw("DocumentReference.set",t);try{return t?Vw(this._delegate,e,t):Vw(this._delegate,e)}catch(n){throw rb(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?jw(this._delegate,e):jw.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw rb(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Bw(mk(e.firestore,Nk),[new Vh(e._key,Ih.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ib(n),a=ab(n,function(t){return new ob(e.firestore,new gw(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return qw(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=mk(e,bk);var t=mk(e.firestore,Nk),n=Ok(t),r=new Uw(t);return function(e,t){var n=new Tl;return e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=_l(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.Qn.An(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Il(xl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=bm(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,nk(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._key).then(function(n){return new gw(t,r,e._key,n,new vw(null!==n&&n.hasLocalMutations,!0),e.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=mk(e,bk);var t=mk(e.firestore,Nk);return uk(Ok(t),e._key,{source:"server"}).then(function(n){return Zw(t,e,n)})}(this._delegate):function(e){e=mk(e,bk);var t=mk(e.firestore,Nk);return uk(Ok(t),e._key).then(function(n){return Zw(t,e,n)})}(this._delegate)).then(function(e){return new ob(t.firestore,new gw(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?tb.getInstance(this.firestore,t):null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new Il("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new bk(n._delegate,r,new of(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new bk(n._delegate,r,t))}}]),e}();function rb(e,t,n){return e.message=e.message.replace(t,n),e}function ib(e){var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==typeof r&&!Qw(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function ab(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Qw(e[0])?e[0]:Qw(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ob=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"ref",get:function(){return new nb(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return ww(this._delegate,e._delegate)}}]),e}(),ub=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||wl()}(void 0!==t),t}}]),n}(ob),sb=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $w(t)}return h(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,xw(this._delegate,function(e,t,n){var r=t,i=pw("where",e);return new Iw(i,r,n)}(t,n,r)))}catch(i){throw rb(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,xw(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=pw("orderBy",e);return new Tw(r,n)}(t,n)))}catch(r){throw rb(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,xw(this._delegate,function(e){return yk("limit",e),new Ew("limit",e,"F")}(t)))}catch(n){throw rb(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,xw(this._delegate,function(e){return yk("limitToLast",e),new Ew("limitToLast",e,"L")}(t)))}catch(n){throw rb(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,xw(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sw("startAt",t,!0)}).apply(void 0,arguments)))}catch(t){throw rb(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,xw(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sw("startAfter",t,!1)}).apply(void 0,arguments)))}catch(t){throw rb(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,xw(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Rw("endBefore",t,!0)}).apply(void 0,arguments)))}catch(t){throw rb(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,xw(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Rw("endAt",t,!1)}).apply(void 0,arguments)))}catch(t){throw rb(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Sk(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=mk(e,_k);var t=mk(e.firestore,Nk),n=Ok(t),r=new Uw(t);return function(e,t){var n=new Tl;return e.asyncQueue.enqueueAndForget((0,eo.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kv(t,n,!0);case 3:i=e.sent,a=new qm(n,i.Gn),o=a.bo(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=bm(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,nk(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._query).then(function(n){return new yw(t,r,e,n)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=mk(e,_k);var t=mk(e.firestore,Nk),n=Ok(t),r=new Uw(t);return sk(n,e._query,{source:"server"}).then(function(n){return new yw(t,r,e,n)})}(this._delegate):function(e){e=mk(e,_k);var t=mk(e.firestore,Nk),n=Ok(t),r=new Uw(t);return bw(e._query),sk(n,e._query).then(function(n){return new yw(t,r,e,n)})}(this._delegate)).then(function(e){return new lb(t.firestore,new yw(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ib(n),a=ab(n,function(t){return new lb(e.firestore,new yw(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return qw(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?tb.getInstance(this.firestore,t):null))}}]),e}(),cb=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ub(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),lb=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"query",get:function(){return new sb(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new ub(e._firestore,t)})}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new cb(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new ub(n._firestore,r))})}},{key:"isEqual",value:function(e){return ww(this._delegate,e._delegate)}}]),e}(),fb=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return h(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new nb(this.firestore,e):null}},{key:"doc",value:function(e){try{return new nb(this.firestore,void 0===e?Tk(this._delegate):Tk(this._delegate,e))}catch(t){throw rb(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=mk(e.firestore,Nk),r=Tk(e),i=Pw(e.converter,t);return Bw(n,[Kk(Gk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ih.exists(!1))]).then(function(){return r})}(this._delegate,e).then(function(e){return new nb(t.firestore,e)})}},{key:"isEqual",value:function(e){return Ek(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,this._delegate.withConverter(e?tb.getInstance(this.firestore,e):null))}}]),n}(sb);function hb(e){return mk(e,bk)}var db,pb,vb={Firestore:Jw,GeoPoint:Vk,Timestamp:Ul,Blob:Ww,Transaction:Xw,WriteBatch:eb,DocumentReference:nb,DocumentSnapshot:ob,Query:sb,QueryDocumentSnapshot:ub,QuerySnapshot:lb,CollectionReference:fb,FieldPath:function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=k(Mk,n)}return h(e,[{key:"isEqual",value:function(e){return(e=(0,io.m9)(e))instanceof Mk&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Gl.keyField().canonicalString())}}]),e}(),FieldValue:function(){function e(t){d(this,e),this._delegate=t}return h(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Yk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Wk("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Jk("arrayUnion",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $k("arrayRemove",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Xk("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),setLogLevel:function(e){!function(e){pl.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};pb=function(e,t){return new Jw(e,t,new Yw)},(db=Xa.Z).INTERNAL.registerComponent(new no.wA("firestore-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return pb(t,n)},"PUBLIC").setServiceProps(Object.assign({},vb))),db.registerVersion("@firebase/firestore-compat","0.1.7");var gb=a(1906),mb=a(9098),yb=a(8489),kb=a(9291),wb=function(e){p(r,e);var n=v(r);function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,a=arguments.length>2?arguments[2]:void 0;return d(this,r),(e=n.call(this)).scheduler=a,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=t<1?1:t,e._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return h(r,[{key:"nextInfiniteTimeWindow",value:function(e){if(!this.isStopped){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}t(_(r.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this.isStopped||(this._events.push(new bb(this._getNow(),e)),this._trimBufferThenGetEvents()),t(_(r.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new Ce.N;if(this.isStopped||this.hasError?t=At.w.EMPTY:(this.observers.push(e),t=new kb.W(this,e)),i&&e.add(e=new mb.ht(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(var u=0;u<a&&!e.closed;u++)e.next(r[u].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||yb.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r}}]),r}(Re.xQ),bb=function e(t,n){d(this,e),this.time=t,this.value=n};function _b(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,a=e.windowTime,o=void 0===a?Number.POSITIVE_INFINITY:a,u=e.refCount,s=e.scheduler,c=0,l=!1,f=!1;return function(e){var r;c++,!t||l?(l=!1,t=new wb(i,o,s),r=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){f=!0,n=void 0,t.complete()}}),f&&(n=void 0)):r=t.subscribe(this),this.add(function(){c--,r.unsubscribe(),r=void 0,n&&!f&&u&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)})}}(r))}}function xb(e,t){return t?Je(function(){return e},t):Je(function(){return e})}var Ib=a(2893),Tb=a(2293);function Eb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return(0,Tb.k)(t)?r=Number(t)<1?1:Number(t):(0,Ne.K)(t)&&(n=t),(0,Ne.K)(n)||(n=Ha.P),new Fe.y(function(t){var i=(0,Tb.k)(e)?e:+e-n.now();return n.schedule(Sb,i,{index:0,period:r,subscriber:t})})}function Sb(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Rb(e,t){return function(n){return n.lift(new Cb(e,t))}}var Cb=function(){function e(t,n){d(this,e),this.keySelector=t,this.flushes=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Ab(e,this.keySelector,this.flushes))}}]),e}(),Ab=function(e){p(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e)).keySelector=r,a.values=new Set,i&&a.add((0,Ye.ft)(i,new Ye.IY(m(a)))),a}return h(n,[{key:"notifyNext",value:function(){this.values.clear()}},{key:"notifyError",value:function(e){this._error(e)}},{key:"_next",value:function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)}},{key:"_useKeySelector",value:function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(r){return void n.error(r)}this._finalizeNext(t,e)}},{key:"_finalizeNext",value:function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))}}]),n}(Ye.Ds),Nb=a(1858);Eb(0,300).pipe(vt(function(){return(0,Ee.D)((0,Nb.C6)())}),Rb()),new s.OlP("angularfire2._apps"),new s.FiY,new s.FiY,(0,Ga.u3)(Nb.P2,!0),(0,Ga.u3)(Nb.Mq,!0),(0,Ga.u3)(Nb.C6,!0),(0,Ga.u3)(Nb.ZF,!0),(0,Ga.u3)(Nb.TP,!0),(0,Ga.u3)(Nb.KN,!0),(0,Ga.u3)(Nb.Ub,!0);var Ob=new Map,Db={activated:!1,tokenObservers:[]},Pb={initialized:!1,enabled:!1};function Lb(e){return Ob.get(e)||Db}function Mb(e,t){Ob.set(e,t)}function Fb(){return Pb}var Ub=function(){function e(t,n,r,i,a){if(d(this,e),this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}return h(e,[{key:"start",value:function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})}},{key:"stop",value:function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}},{key:"isRunning",value:function(){return!!this.pending}},{key:"process",value:function(e){var t=this;return(0,eo.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.stop(),n.prev=1,t.pending=new io.BH,n.next=5,function(e){return new Promise(function(t){setTimeout(t,e)})}(t.getNextRun(e));case 5:return t.pending.resolve(),n.next=8,t.pending.promise;case 8:return t.pending=new io.BH,n.next=11,t.operation();case 11:return t.pending.resolve(),n.next=14,t.pending.promise;case 14:t.process(!0).catch(function(){}),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),t.retryPolicy(n.t0)?t.process(!1).catch(function(){}):t.stop();case 20:case"end":return n.stop()}},n,null,[[1,17]])}))()}},{key:"getNextRun",value:function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}]),e}(),Vb=new io.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function jb(e){if(!Lb(e).activated)throw Vb.create("use-before-activation",{appName:e.name})}function qb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function Bb(e,t){return Zb.apply(this,arguments)}function Zb(){return(Zb=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s,c,l,f,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,i=t.body,a={"Content-Type":"application/json"},(o=n.getImmediate({optional:!0}))&&(a["X-Firebase-Client"]=o.getPlatformInfoString()),u={method:"POST",body:JSON.stringify(i),headers:a},e.prev=4,e.next=7,fetch(r,u);case 7:s=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),Vb.create("fetch-network-error",{originalErrorMessage:e.t0.message});case 13:if(200===s.status){e.next=15;break}throw Vb.create("fetch-status-error",{httpStatus:s.status});case 15:return e.prev=15,e.next=18,s.json();case 18:c=e.sent,e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(15),Vb.create("fetch-parse-error",{originalErrorMessage:e.t1.message});case 24:if((l=c.ttl.match(/^([\d.]+)(s)$/))&&l[2]&&!isNaN(Number(l[1]))){e.next=27;break}throw Vb.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: ".concat(c.ttl)});case 27:return f=1e3*Number(l[1]),h=Date.now(),e.abrupt("return",{token:c.attestationToken,expireTimeMillis:h+f,issuedAtTimeMillis:h});case 29:case"end":return e.stop()}},e,null,[[4,10],[15,21]])}))).apply(this,arguments)}function zb(e,t){var n=e.options,r=n.projectId,i=n.appId,a=n.apiKey;return{url:"https://content-firebaseappcheck.googleapis.com/v1beta/projects/".concat(r,"/apps/").concat(i,":exchangeDebugToken?key=").concat(a),body:{debug_token:t}}}var Hb="firebase-app-check-store",Gb=null;function Kb(){return Gb||(Gb=new Promise(function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(Vb.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(Hb,{keyPath:"compositeKey"})}}}catch(r){t(Vb.create("storage-open",{originalErrorMessage:r.message}))}}))}function Wb(e){return Xb(t_(e))}function Qb(e){return Jb("debug-token",e)}function Yb(){return Xb("debug-token")}function Jb(e,t){return $b.apply(this,arguments)}function $b(){return($b=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kb();case 2:return r=e.sent.transaction(Hb,"readwrite"),i=r.objectStore(Hb).put({compositeKey:t,value:n}),e.abrupt("return",new Promise(function(e,t){i.onsuccess=function(t){e()},r.onerror=function(e){var n;t(Vb.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xb(e){return e_.apply(this,arguments)}function e_(){return(e_=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kb();case 2:return n=e.sent.transaction(Hb,"readonly"),r=n.objectStore(Hb).get(t),e.abrupt("return",new Promise(function(e,t){r.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(Vb.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function t_(e){return"".concat(e.options.appId,"-").concat(e.name)}var n_=new ro.Yd("@firebase/app-check");function r_(){return(r_=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,io.hl)()){e.next=11;break}return e.prev=1,e.next=4,Wb(t);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n_.warn("Failed to read token from IndexedDB. Error: ".concat(e.t0));case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function i_(e,t){return(0,io.hl)()?function(e,t){return Jb(t_(e),t)}(e,t).catch(function(e){n_.warn("Failed to write token to IndexedDB. Error: ".concat(e))}):Promise.resolve()}function a_(){return(a_=(0,eo.Z)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yb();case 3:t=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:if(!t){e.next=10;break}return e.abrupt("return",t);case 10:return n=qb(),e.abrupt("return",(Qb(n).catch(function(e){return n_.warn("Failed to persist debug token to IndexedDB. Error: ".concat(e))}),n));case 12:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function o_(){return Fb().enabled}function u_(){return s_.apply(this,arguments)}function s_(){return(s_=(0,eo.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Fb()).enabled||!t.token){e.next=3;break}return e.abrupt("return",t.token.promise);case 3:throw Error("\n            Can't get debug token in production mode.\n        ");case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var c_={error:"UNKNOWN_ERROR"};function l_(e){return f_.apply(this,arguments)}function f_(){return(f_=(0,eo.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,s,c,l=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]&&l[1],jb(r=t.app),i=Lb(r),u=i.token){e.next=10;break}return e.next=8,i.cachedTokenPromise;case 8:(s=e.sent)&&v_(s)&&(u=s,Mb(r,Object.assign(Object.assign({},i),{token:u})),p_(r,{token:u.token}));case 10:if(n||!u||!v_(u)){e.next=12;break}return e.abrupt("return",{token:u.token});case 12:if(!o_()){e.next=28;break}return e.t0=Bb,e.t1=zb,e.t2=r,e.next=18,u_();case 18:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5=t.platformLoggerProvider,e.next=23,(0,e.t0)(e.t4,e.t5);case 23:return c=e.sent,e.next=26,i_(r,c);case 26:return Mb(r,Object.assign(Object.assign({},i),{token:c})),e.abrupt("return",{token:c.token});case 28:return e.prev=28,e.next=31,i.provider.getToken();case 31:u=e.sent,e.next=37;break;case 34:e.prev=34,e.t6=e.catch(28),n_.error(e.t6),a=e.t6;case 37:if(!u){e.next=44;break}return o={token:u.token},Mb(r,Object.assign(Object.assign({},i),{token:u})),e.next=42,i_(r,u);case 42:e.next=45;break;case 44:o=g_(a);case 45:return p_(r,o),e.abrupt("return",o);case 47:case"end":return e.stop()}},e,null,[[28,34]])}))).apply(this,arguments)}function h_(e,t,n,r){var i=e.app,a=Lb(i),o={next:n,error:r,type:t},s=Object.assign(Object.assign({},a),{tokenObservers:[].concat(u(a.tokenObservers),[o])});if(!s.tokenRefresher){var c=function(e){var t=e.app;return new Ub((0,eo.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!Lb(t).token){n.next=6;break}return n.next=3,l_(e,!0);case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,l_(e);case 8:n.t0=n.sent;case 9:if(!(r=n.t0).error){n.next=12;break}throw r.error;case 12:case"end":return n.stop()}},n)})),function(){return!0},function(){var e=Lb(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(e);s.tokenRefresher=c}if(!s.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&s.tokenRefresher.start(),a.token&&v_(a.token)){var l=a.token;Promise.resolve().then(function(){return n({token:l.token})}).catch(function(){})}else null==a.token&&a.cachedTokenPromise.then(function(e){e&&v_(e)&&n({token:e.token})}).catch(function(){});Mb(i,s)}function d_(e,t){var n=Lb(e),r=n.tokenObservers.filter(function(e){return e.next!==t});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Mb(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function p_(e,t){var n,r=o(Lb(e).tokenObservers);try{for(r.s();!(n=r.n()).done;){var i=n.value;try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(a){}}}catch(u){r.e(u)}finally{r.f()}}function v_(e){return e.expireTimeMillis-Date.now()>0}function g_(e){return{token:(t=c_,io.US.encodeString(JSON.stringify(t),!1)),error:e};var t}var m_=function(){function e(t,n){d(this,e),this.app=t,this.platformLoggerProvider=n}return h(e,[{key:"_delete",value:function(){var e,t=o(Lb(this.app).tokenObservers);try{for(t.s();!(e=t.n()).done;){var n=e.value;d_(this.app,n.next)}}catch(r){t.e(r)}finally{t.f()}return Promise.resolve()}}]),e}();function y_(){return(y_=(0,eo.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l_(t,n);case 2:if(!(r=e.sent).error){e.next=5;break}throw r.error;case 5:return e.abrupt("return",{token:r.token});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}(0,to._registerComponent)(new no.wA("app-check",function(e){return t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger"),new m_(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("app-check-internal").initialize()})),(0,to._registerComponent)(new no.wA("app-check-internal",function(e){return t=e.getProvider("app-check").getImmediate(),{getToken:function(e){return l_(t,e)},addTokenListener:function(e){return h_(t,"INTERNAL",e)},removeTokenListener:function(e){return d_(t.app,e)}};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,to.registerVersion)("@firebase/app-check","0.5.1");var k_=function e(){return d(this,e),(0,Ga.vb)("app-check")};Eb(0,300).pipe(vt(function(){return(0,Ee.D)((0,Ga.vb)("app-check"))}),Rb()),new s.OlP("angularfire2.app-check-instances"),Symbol("angularfire2.app-check.namespace"),"undefined"!=typeof window&&["localhost","0.0.0.0","127.0.0.1"].includes(window.location.hostname),new s.FiY,new s.FiY,(0,Ga.u3)(function(e,t){return y_.apply(this,arguments)},!0),(0,Ga.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,to.getApp)(),t=arguments.length>1?arguments[1]:void 0;e=(0,io.m9)(e);var n=(0,to._getProvider)(e,"app-check");if(Fb().initialized||function(){var e=(0,io.Rd)(),t=Fb();if(t.initialized=!0,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){t.enabled=!0;var n=new io.BH;t.token=n,n.resolve("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?e.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return a_.apply(this,arguments)}())}}(),o_()&&u_().then(function(e){return console.log("App Check debug token: ".concat(e,". You will need to add it to your app's App Check settings in the Firebase console for it to work."))}),n.isInitialized()){var r=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return r;throw Vb.create("already-initialized",{appName:e.name})}var a=n.initialize({options:t});return function(e,t,n){var r=Lb(e),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=t,i.cachedTokenPromise=function(e){return r_.apply(this,arguments)}(e).then(function(t){return t&&v_(t)&&Mb(e,Object.assign(Object.assign({},Lb(e)),{token:t})),t}),i.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,Mb(e,i),i.provider.initialize(e)}(e,t.provider,t.isTokenAutoRefreshEnabled),a},!0),(0,Ga.u3)(function(e,t,n,r){var i,a=function(){};return i=null!=t.next?t.next.bind(t):t,null!=t.error?a=t.error.bind(t):n&&(a=n),h_(e,"EXTERNAL",i,a),function(){return d_(e.app,i)}},!0),(0,Ga.u3)(function(e,t){var n=e.app,r=Lb(n);r.tokenRefresher&&(!0===t?r.tokenRefresher.start():r.tokenRefresher.stop()),Mb(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:t}))},!0);var w_=a(9001),b_=new s.OlP("angularfire2.auth.use-emulator"),__=new s.OlP("angularfire2.auth.settings"),x_=new s.OlP("angularfire2.auth.tenant-id"),I_=new s.OlP("angularfire2.auth.langugage-code"),T_=new s.OlP("angularfire2.auth.use-device-language"),E_=new s.OlP("angularfire.auth.persistence"),S_=function(e,t,n,i,a,o,s,c){return(0,za.cc)("".concat(e.name,".auth"),"AngularFireAuth",e.name,function(){var l=t.runOutsideAngular(function(){return e.auth()});if(n&&l.useEmulator.apply(l,u(n)),i&&(l.tenantId=i),l.languageCode=a,o&&l.useDeviceLanguage(),s)for(var f=0,h=Object.entries(s);f<h.length;f++){var d=r(h[f],2),p=d[0],v=d[1];l.settings[p]=v}return c&&l.setPersistence(c),l},[n,i,a,o,s,c])},R_=function(){var e=function e(t,n,r,i,o,u,s,c,l,f,h,p){d(this,e);var v=new Re.xQ,g=(0,Se.of)(void 0).pipe((0,mb.QV)(o.outsideAngular),Je(function(){return i.runOutsideAngular(function(){return Promise.resolve().then(a.bind(a,14))})}),(0,Qe.U)(function(){return(0,za.on)(t,i,n)}),(0,Qe.U)(function(e){return S_(e,i,u,c,l,f,s,h)}),_b({bufferSize:1,refCount:!1}));if(G(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Se.of)(null);else{g.pipe(St()).subscribe();var m=g.pipe(Je(function(e){return e.getRedirectResult().then(function(e){return e},function(){return null})}),Ga.iC,_b({bufferSize:1,refCount:!1})),y=g.pipe(Je(function(e){return new Fe.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onAuthStateChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})})),k=g.pipe(Je(function(e){return new Fe.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onIdTokenChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})}));this.authState=m.pipe(xb(y),(0,Ib.R)(o.outsideAngular),(0,mb.QV)(o.insideAngular)),this.user=m.pipe(xb(k),(0,Ib.R)(o.outsideAngular),(0,mb.QV)(o.insideAngular)),this.idToken=this.user.pipe(Je(function(e){return e?(0,Ee.D)(e.getIdToken()):(0,Se.of)(null)})),this.idTokenResult=this.user.pipe(Je(function(e){return e?(0,Ee.D)(e.getIdTokenResult()):(0,Se.of)(null)})),this.credential=(0,gb.T)(m,v,this.authState.pipe(st(function(e){return!e}))).pipe((0,Qe.U)(function(e){return(null==e?void 0:e.user)?e:null}),(0,Ib.R)(o.outsideAngular),(0,mb.QV)(o.insideAngular))}return(0,za.pX)(this,g,i,{spy:{apply:function(e,t,n){(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(function(e){return v.next(e)})}}})};return e.\u0275fac=function(t){return new(t||e)(s.LFG(za.Dh),s.LFG(za.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Ga.HU),s.LFG(b_,8),s.LFG(__,8),s.LFG(x_,8),s.LFG(I_,8),s.LFG(T_,8),s.LFG(E_,8),s.LFG(k_,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}();function C_(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ha.z;return new Fe.y(function(n){var r;return null!=t?t.schedule(function(){r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(e,t)}function A_(e,t){return C_(e,t).pipe((0,Qe.U)(function(e){return{payload:e,type:"query"}}))}function N_(e,t){return A_(e,t).pipe(it(void 0),Ka(),(0,Qe.U)(function(e){var t=r(e,2),n=t[0],i=t[1],a=i.payload.docChanges(),o=a.map(function(e){return{type:e.type,payload:e}});return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach(function(e,t){var r=a.find(function(t){return t.doc.ref.isEqual(e.ref)}),i=null==n?void 0:n.payload.docs.find(function(t){return t.ref.isEqual(e.ref)});r&&JSON.stringify(r.doc.metadata)===JSON.stringify(e.metadata)||!r&&i&&JSON.stringify(i.metadata)===JSON.stringify(e.metadata)||o.push({type:"modified",payload:{oldIndex:t,newIndex:t,type:"modified",doc:e}})}),o}))}function O_(e,t,n){return N_(e,n).pipe(at(function(e,n){return function(e,t,n){return t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return D_(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){var n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return D_(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return D_(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(function(e){return e.payload}),t)},[]),function(e){return e.lift(new Ya(void 0,void 0))},(0,Qe.U)(function(e){return e.map(function(e){return{type:e.type,payload:e}})}))}function D_(e,t,n){for(var r=e.slice(),i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return r.splice.apply(r,[t,n].concat(a)),r}function P_(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}(0,za.GT)(R_,[{name:null,config:null,emulatorConfig:null,app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var L_=function(){function t(e,n,r){d(this,t),this.ref=e,this.query=n,this.afs=r}return h(t,[{key:"stateChanges",value:function(e){var t=N_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Qe.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}))),t.pipe(it(void 0),Ka(),st(function(e){var t=r(e,2),n=t[0];return t[1].length>0||!n}),(0,Qe.U)(function(e){var t=r(e,2);t[0];return t[1]}),Ga.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(at(function(e,t){return[].concat(u(e),u(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=P_(e);return O_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ga.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(function(n){return n.payload.docs.map(function(n){return t.idField?Object.assign(Object.assign({},n.data()),e({},t.idField,n.id)):n.data()})}),Ga.iC)}},{key:"get",value:function(e){return(0,Ee.D)(this.query.get(e)).pipe(Ga.iC)}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new M_(this.ref.doc(e),this.afs)}}]),t}(),M_=function(){function t(e,n){d(this,t),this.ref=e,this.afs=n}return h(t,[{key:"set",value:function(e,t){return this.ref.set(e,t)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,t){var n=B_(this.ref.collection(e),t),r=n.ref,i=n.query;return new L_(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return C_(this.ref,this.afs.schedulers.outsideAngular).pipe(it(void 0),Ka(),(0,Qe.U)(function(e){var t=r(e,2),n=t[0],i=t[1];return i.exists?(null==n?void 0:n.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}})).pipe(Ga.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,Qe.U)(function(n){var r=n.payload;return t.idField?Object.assign(Object.assign({},r.data()),e({},t.idField,r.id)):r.data()}))}},{key:"get",value:function(e){return(0,Ee.D)(this.ref.get(e)).pipe(Ga.iC)}}]),t}(),F_=function(){function t(e,n){d(this,t),this.query=e,this.afs=n}return h(t,[{key:"stateChanges",value:function(e){return e&&0!==e.length?N_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}),st(function(e){return e.length>0}),Ga.iC):N_(this.query,this.afs.schedulers.outsideAngular).pipe(Ga.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(at(function(e,t){return[].concat(u(e),u(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=P_(e);return O_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ga.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(function(n){return n.payload.docs.map(function(n){return t.idField?Object.assign(e({},t.idField,n.id),n.data()):n.data()})}),Ga.iC)}},{key:"get",value:function(e){return(0,Ee.D)(this.query.get(e)).pipe(Ga.iC)}}]),t}(),U_=new s.OlP("angularfire2.enableFirestorePersistence"),V_=new s.OlP("angularfire2.firestore.persistenceSettings"),j_=new s.OlP("angularfire2.firestore.settings"),q_=new s.OlP("angularfire2.firestore.use-emulator");function B_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return{query:t(e),ref:e}}var Z_=function(){var e=function(){function e(t,n,i,a,o,s,c,l,f,h,p,v,g,m,y,k,w){var b;d(this,e),this.schedulers=c;var _=(0,za.on)(t,s,n),x=f;h&&S_(_,s,p,g,m,y,v,k),b=r((0,za.cc)("".concat(_.name,".firestore"),"AngularFirestore",_.name,function(){var e=s.runOutsideAngular(function(){return _.firestore()});if(a&&e.settings(a),x&&e.useEmulator.apply(e,u(x)),i&&!G(o)){return[e,s.runOutsideAngular(function(){try{return(0,Ee.D)(e.enablePersistence(l||void 0).then(function(){return!0},function(){return!1}))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,Se.of)(!1)}})]}return[e,(0,Se.of)(!1)]},[a,x,i]),2),this.firestore=b[0],this.persistenceEnabled$=b[1]}return h(e,[{key:"collection",value:function(e,t){var n=B_("string"==typeof e?this.firestore.collection(e):e,t),r=n.ref,i=n.query,a=this.schedulers.ngZone.run(function(){return r});return new L_(a,i,this)}},{key:"collectionGroup",value:function(e,t){var n=t||function(e){return e},r=this.firestore.collectionGroup(e);return new F_(n(r),this)}},{key:"doc",value:function(e){var t;t="string"==typeof e?this.firestore.doc(e):e;var n=this.schedulers.ngZone.run(function(){return t});return new M_(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(za.Dh),s.LFG(za.xv,8),s.LFG(U_,8),s.LFG(j_,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Ga.HU),s.LFG(V_,8),s.LFG(q_,8),s.LFG(R_,8),s.LFG(b_,8),s.LFG(__,8),s.LFG(x_,8),s.LFG(I_,8),s.LFG(T_,8),s.LFG(E_,8),s.LFG(k_,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),z_=function(){var e=function(){function e(){d(this,e),w_.Z.registerVersion("angularfire",Ga.q4.full,"fst-compat")}return h(e,null,[{key:"enablePersistence",value:function(t){return{ngModule:e,providers:[{provide:U_,useValue:!0},{provide:V_,useValue:t}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[Z_]}),e}(),H_={apiKey:"AIzaSyAe7ljanBIqAkIkAgX4tw35gI0v3GSnOUs",authDomain:"shirt-tracker.firebaseapp.com",projectId:"shirt-tracker",storageBucket:"shirt-tracker.appspot.com",messagingSenderId:"112850782186",appId:"1:112850782186:web:87f001f8d7e719dd469493",measurementId:"G-R9VEHPWJCB"},G_=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e,bootstrap:[Za]}),e.\u0275inj=s.cJS({providers:[],imports:[[Te,ja,Oa,za.hO.initializeApp(H_),z_]]}),e}();(0,s.G48)(),xe().bootstrapModule(G_).catch(function(e){return console.error(e)})},6304:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){"use strict";e(e.s=1620)}])}();